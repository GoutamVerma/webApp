var AsgardeoAuth=function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})})),t}var l=function(e){return e&&e.Math==Math&&e},o=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=o,a=function(e){try{return!!e()}catch(e){return!0}},r=!a((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),s=r,d=Function.prototype,u=d.bind,h=d.call,b=s&&u.bind(h,h),Z=s?function(e){return e&&b(e)}:function(e){return e&&function(){return h.apply(e,arguments)}},m=TypeError,p=function(e){if(null==e)throw m("Can't call method on "+e);return e},y=p,G=Object,X=function(e){return G(y(e))},W=X,V=Z({}.hasOwnProperty),I=Object.hasOwn||function(e,t){return V(W(e),t)},R={},g={exports:{}},f=o,v=Object.defineProperty,S=function(e,t){try{v(f,e,{value:t,configurable:!0,writable:!0})}catch(i){f[e]=t}return t},Y=S,K="__core-js_shared__",N=o[K]||Y(K,{}),J=N;(g.exports=function(e,t){return J[e]||(J[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.0",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"});var k,C,U=Z,L=0,H=Math.random(),T=U(1..toString),w=function(e){return"Symbol("+(void 0===e?"":e)+")_"+T(++L+H,36)},F=function(e){return"function"==typeof e},x=o,P=F,z=function(e){return P(e)?e:void 0},B=function(e,t){return arguments.length<2?z(x[e]):x[e]&&x[e][t]},j=B("navigator","userAgent")||"",M=o,Q=j,E=M.process,D=M.Deno,O=E&&E.versions||D&&D.version,A=O&&O.v8;A&&(C=(k=A.split("."))[0]>0&&k[0]<4?1:+(k[0]+k[1])),!C&&Q&&(!(k=Q.match(/Edge\/(\d+)/))||k[1]>=74)&&(k=Q.match(/Chrome\/(\d+)/))&&(C=+k[1]);var _=C,q=_,$=a,ee=!!Object.getOwnPropertySymbols&&!$((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&q&&q<41})),te=ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ie=o,ne=g.exports,le=I,oe=w,ce=ee,ae=te,re=ne("wks"),se=ie.Symbol,de=se&&se.for,ue=ae?se:se&&se.withoutSetter||oe,he=function(e){if(!le(re,e)||!ce&&"string"!=typeof re[e]){var t="Symbol."+e;ce&&le(se,e)?re[e]=se[e]:re[e]=ae&&de?de(t):ue(t)}return re[e]},be=he;R.f=be;var Ze={},me=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe=F,ye=function(e){return"object"==typeof e?null!==e:pe(e)},Ge=ye,Xe=o.document,We=Ge(Xe)&&Ge(Xe.createElement),Ve=function(e){return We?Xe.createElement(e):{}},Ie=Ve,Re=!me&&!a((function(){return 7!=Object.defineProperty(Ie("div"),"a",{get:function(){return 7}}).a})),ge=me&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),fe=ye,ve=String,Se=TypeError,Ye=function(e){if(fe(e))return e;throw Se(ve(e)+" is not an object")},Ke=r,Ne=Function.prototype.call,Je=Ke?Ne.bind(Ne):function(){return Ne.apply(Ne,arguments)},ke=Z({}.isPrototypeOf),Ce=B,Ue=F,Le=ke,He=Object,Te=te?function(e){return"symbol"==typeof e}:function(e){var t=Ce("Symbol");return Ue(t)&&Le(t.prototype,He(e))},we=String,Fe=function(e){try{return we(e)}catch(e){return"Object"}},xe=F,Pe=Fe,ze=TypeError,Be=function(e){if(xe(e))return e;throw ze(Pe(e)+" is not a function")},je=Be,Me=function(e,t){var i=e[t];return null==i?void 0:je(i)},Qe=Je,Ee=F,De=ye,Oe=TypeError,Ae=Je,_e=ye,qe=Te,$e=Me,et=function(e,t){var i,n;if("string"===t&&Ee(i=e.toString)&&!De(n=Qe(i,e)))return n;if(Ee(i=e.valueOf)&&!De(n=Qe(i,e)))return n;if("string"!==t&&Ee(i=e.toString)&&!De(n=Qe(i,e)))return n;throw Oe("Can't convert object to primitive value")},tt=TypeError,it=he("toPrimitive"),nt=function(e,t){if(!_e(e)||qe(e))return e;var i,n=$e(e,it);if(n){if(void 0===t&&(t="default"),i=Ae(n,e,t),!_e(i)||qe(i))return i;throw tt("Can't convert object to primitive value")}return void 0===t&&(t="number"),et(e,t)},lt=nt,ot=Te,ct=function(e){var t=lt(e,"string");return ot(t)?t:t+""},at=me,rt=Re,st=ge,dt=Ye,ut=ct,ht=TypeError,bt=Object.defineProperty,Zt=Object.getOwnPropertyDescriptor,mt="enumerable",pt="configurable",yt="writable";Ze.f=at?st?function(e,t,i){if(dt(e),t=ut(t),dt(i),"function"==typeof e&&"prototype"===t&&"value"in i&&yt in i&&!i.writable){var n=Zt(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:pt in i?i.configurable:n.configurable,enumerable:mt in i?i.enumerable:n.enumerable,writable:!1})}return bt(e,t,i)}:bt:function(e,t,i){if(dt(e),t=ut(t),dt(i),rt)try{return bt(e,t,i)}catch(e){}if("get"in i||"set"in i)throw ht("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var Gt=c,Xt=I,Wt=R,Vt=Ze.f,It=function(e){var t=Gt.Symbol||(Gt.Symbol={});Xt(t,e)||Vt(t,e,{value:Wt.f(e)})};It("matchAll");var Rt={},gt={},ft={}.propertyIsEnumerable,vt=Object.getOwnPropertyDescriptor,St=vt&&!ft.call({1:2},1);gt.f=St?function(e){var t=vt(this,e);return!!t&&t.enumerable}:ft;var Yt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Kt=Z,Nt=Kt({}.toString),Jt=Kt("".slice),kt=function(e){return Jt(Nt(e),8,-1)},Ct=a,Ut=kt,Lt=Object,Ht=Z("".split),Tt=Ct((function(){return!Lt("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ut(e)?Ht(e,""):Lt(e)}:Lt,wt=Tt,Ft=p,xt=function(e){return wt(Ft(e))},Pt=me,zt=Je,Bt=gt,jt=Yt,Mt=xt,Qt=ct,Et=I,Dt=Re,Ot=Object.getOwnPropertyDescriptor;Rt.f=Pt?Ot:function(e,t){if(e=Mt(e),t=Qt(t),Dt)try{return Ot(e,t)}catch(e){}if(Et(e,t))return jt(!zt(Bt.f,e,t),e[t])};var At=Ze,_t=Yt,qt=me?function(e,t,i){return At.f(e,t,_t(1,i))}:function(e,t,i){return e[t]=i,e},$t={exports:{}},ei=me,ti=I,ii=Function.prototype,ni=ei&&Object.getOwnPropertyDescriptor,li=ti(ii,"name"),oi={EXISTS:li,PROPER:li&&"something"===function(){}.name,CONFIGURABLE:li&&(!ei||ei&&ni(ii,"name").configurable)},ci=F,ai=N,ri=Z(Function.toString);ci(ai.inspectSource)||(ai.inspectSource=function(e){return ri(e)});var si,di,ui,hi=ai.inspectSource,bi=F,Zi=hi,mi=o.WeakMap,pi=bi(mi)&&/native code/.test(Zi(mi)),yi=g.exports,Gi=w,Xi=yi("keys"),Wi=function(e){return Xi[e]||(Xi[e]=Gi(e))},Vi={},Ii=pi,Ri=o,gi=Z,fi=ye,vi=qt,Si=I,Yi=N,Ki=Wi,Ni=Vi,Ji="Object already initialized",ki=Ri.TypeError,Ci=Ri.WeakMap;if(Ii||Yi.state){var Ui=Yi.state||(Yi.state=new Ci),Li=gi(Ui.get),Hi=gi(Ui.has),Ti=gi(Ui.set);si=function(e,t){if(Hi(Ui,e))throw new ki(Ji);return t.facade=e,Ti(Ui,e,t),t},di=function(e){return Li(Ui,e)||{}},ui=function(e){return Hi(Ui,e)}}else{var wi=Ki("state");Ni[wi]=!0,si=function(e,t){if(Si(e,wi))throw new ki(Ji);return t.facade=e,vi(e,wi,t),t},di=function(e){return Si(e,wi)?e[wi]:{}},ui=function(e){return Si(e,wi)}}var Fi={set:si,get:di,has:ui,enforce:function(e){return ui(e)?di(e):si(e,{})},getterFor:function(e){return function(t){var i;if(!fi(t)||(i=di(t)).type!==e)throw ki("Incompatible receiver, "+e+" required");return i}}},xi=a,Pi=F,zi=I,Bi=me,ji=oi.CONFIGURABLE,Mi=hi,Qi=Fi.enforce,Ei=Fi.get,Di=Object.defineProperty,Oi=Bi&&!xi((function(){return 8!==Di((function(){}),"length",{value:8}).length})),Ai=String(String).split("String"),_i=$t.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!zi(e,"name")||ji&&e.name!==t)&&(Bi?Di(e,"name",{value:t,configurable:!0}):e.name=t),Oi&&i&&zi(i,"arity")&&e.length!==i.arity&&Di(e,"length",{value:i.arity});try{i&&zi(i,"constructor")&&i.constructor?Bi&&Di(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=Qi(e);return zi(n,"source")||(n.source=Ai.join("string"==typeof t?t:"")),e};Function.prototype.toString=_i((function(){return Pi(this)&&Ei(this).source||Mi(this)}),"toString");var qi=F,$i=Ze,en=$t.exports,tn=S,nn=function(e,t,i,n){n||(n={});var l=n.enumerable,o=void 0!==n.name?n.name:t;if(qi(i)&&en(i,o,n),n.global)l?e[t]=i:tn(t,i);else{try{n.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:$i.f(e,t,{value:i,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},ln={},on=Math.ceil,cn=Math.floor,an=Math.trunc||function(e){var t=+e;return(t>0?cn:on)(t)},rn=an,sn=function(e){var t=+e;return t!=t||0===t?0:rn(t)},dn=sn,un=Math.max,hn=Math.min,bn=function(e,t){var i=dn(e);return i<0?un(i+t,0):hn(i,t)},Zn=sn,mn=Math.min,pn=function(e){return e>0?mn(Zn(e),9007199254740991):0},yn=pn,Gn=function(e){return yn(e.length)},Xn=xt,Wn=bn,Vn=Gn,In=function(e){return function(t,i,n){var l,o=Xn(t),c=Vn(o),a=Wn(n,c);if(e&&i!=i){for(;c>a;)if((l=o[a++])!=l)return!0}else for(;c>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},Rn={includes:In(!0),indexOf:In(!1)},gn=I,fn=xt,vn=Rn.indexOf,Sn=Vi,Yn=Z([].push),Kn=function(e,t){var i,n=fn(e),l=0,o=[];for(i in n)!gn(Sn,i)&&gn(n,i)&&Yn(o,i);for(;t.length>l;)gn(n,i=t[l++])&&(~vn(o,i)||Yn(o,i));return o},Nn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Jn=Kn,kn=Nn.concat("length","prototype");ln.f=Object.getOwnPropertyNames||function(e){return Jn(e,kn)};var Cn={};Cn.f=Object.getOwnPropertySymbols;var Un=B,Ln=ln,Hn=Cn,Tn=Ye,wn=Z([].concat),Fn=Un("Reflect","ownKeys")||function(e){var t=Ln.f(Tn(e)),i=Hn.f;return i?wn(t,i(e)):t},xn=I,Pn=Fn,zn=Rt,Bn=Ze,jn=a,Mn=F,Qn=/#|\.prototype\./,En=function(e,t){var i=On[Dn(e)];return i==_n||i!=An&&(Mn(t)?jn(t):!!t)},Dn=En.normalize=function(e){return String(e).replace(Qn,".").toLowerCase()},On=En.data={},An=En.NATIVE="N",_n=En.POLYFILL="P",qn=En,$n=o,el=Rt.f,tl=qt,il=nn,nl=S,ll=function(e,t,i){for(var n=Pn(t),l=Bn.f,o=zn.f,c=0;c<n.length;c++){var a=n[c];xn(e,a)||i&&xn(i,a)||l(e,a,o(t,a))}},ol=qn,cl=function(e,t){var i,n,l,o,c,a=e.target,r=e.global,s=e.stat;if(i=r?$n:s?$n[a]||nl(a,{}):($n[a]||{}).prototype)for(n in t){if(o=t[n],l=e.dontCallGetSet?(c=el(i,n))&&c.value:i[n],!ol(r?n:a+(s?".":"#")+n,e.forced)&&void 0!==l){if(typeof o==typeof l)continue;ll(o,l)}(e.sham||l&&l.sham)&&tl(o,"sham",!0),il(i,n,o,e)}},al={},rl=Kn,sl=Nn,dl=Object.keys||function(e){return rl(e,sl)},ul=me,hl=ge,bl=Ze,Zl=Ye,ml=xt,pl=dl;al.f=ul&&!hl?Object.defineProperties:function(e,t){Zl(e);for(var i,n=ml(t),l=pl(t),o=l.length,c=0;o>c;)bl.f(e,i=l[c++],n[i]);return e};var yl,Gl=B("document","documentElement"),Xl=Ye,Wl=al,Vl=Nn,Il=Vi,Rl=Gl,gl=Ve,fl=Wi("IE_PROTO"),vl=function(){},Sl=function(e){return"<script>"+e+"</"+"script>"},Yl=function(e){e.write(Sl("")),e.close();var t=e.parentWindow.Object;return e=null,t},Kl=function(){try{yl=new ActiveXObject("htmlfile")}catch(e){}var e,t;Kl="undefined"!=typeof document?document.domain&&yl?Yl(yl):((t=gl("iframe")).style.display="none",Rl.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Sl("document.F=Object")),e.close(),e.F):Yl(yl);for(var i=Vl.length;i--;)delete Kl.prototype[Vl[i]];return Kl()};Il[fl]=!0;var Nl=Object.create||function(e,t){var i;return null!==e?(vl.prototype=Xl(e),i=new vl,vl.prototype=null,i[fl]=e):i=Kl(),void 0===t?i:Wl.f(i,t)},Jl=he,kl=Nl,Cl=Ze.f,Ul=Jl("unscopables"),Ll=Array.prototype;null==Ll[Ul]&&Cl(Ll,Ul,{configurable:!0,value:kl(null)});var Hl=function(e){Ll[Ul][e]=!0},Tl=Rn.includes,wl=Hl;cl({target:"Array",proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(e){return Tl(this,e,arguments.length>1?arguments[1]:void 0)}}),wl("includes"),Hl("flat"),Hl("flatMap");var Fl={},xl=Be,Pl=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=xl(t),this.reject=xl(i)};Fl.f=function(e){return new Pl(e)};var zl=Be,Bl=r,jl=Z(Z.bind),Ml=function(e,t){return zl(e),void 0===t?e:Bl?jl(e,t):function(){return e.apply(t,arguments)}},Ql={},El=Ql,Dl=he("iterator"),Ol=Array.prototype,Al=function(e){return void 0!==e&&(El.Array===e||Ol[Dl]===e)},_l={};_l[he("toStringTag")]="z";var ql="[object z]"===String(_l),$l=F,eo=kt,to=he("toStringTag"),io=Object,no="Arguments"==eo(function(){return arguments}()),lo=ql?eo:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=io(e),to))?i:no?eo(t):"Object"==(n=eo(t))&&$l(t.callee)?"Arguments":n},oo=lo,co=Me,ao=Ql,ro=he("iterator"),so=function(e){if(null!=e)return co(e,ro)||co(e,"@@iterator")||ao[oo(e)]},uo=Je,ho=Be,bo=Ye,Zo=Fe,mo=so,po=TypeError,yo=function(e,t){var i=arguments.length<2?mo(e):t;if(ho(i))return bo(uo(i,e));throw po(Zo(e)+" is not iterable")},Go=Je,Xo=Ye,Wo=Me,Vo=function(e,t,i){var n,l;Xo(e);try{if(!(n=Wo(e,"return"))){if("throw"===t)throw i;return i}n=Go(n,e)}catch(e){l=!0,n=e}if("throw"===t)throw i;if(l)throw n;return Xo(n),i},Io=Ml,Ro=Je,go=Ye,fo=Fe,vo=Al,So=Gn,Yo=ke,Ko=yo,No=so,Jo=Vo,ko=TypeError,Co=function(e,t){this.stopped=e,this.result=t},Uo=Co.prototype,Lo=Je,Ho=Be,To=Fl,wo=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Fo=function(e,t,i){var n,l,o,c,a,r,s,d=i&&i.that,u=!(!i||!i.AS_ENTRIES),h=!(!i||!i.IS_RECORD),b=!(!i||!i.IS_ITERATOR),Z=!(!i||!i.INTERRUPTED),m=Io(t,d),p=function(e){return n&&Jo(n,"normal",e),new Co(!0,e)},y=function(e){return u?(go(e),Z?m(e[0],e[1],p):m(e[0],e[1])):Z?m(e,p):m(e)};if(h)n=e.iterator;else if(b)n=e;else{if(!(l=No(e)))throw ko(fo(e)+" is not iterable");if(vo(l)){for(o=0,c=So(e);c>o;o++)if((a=y(e[o]))&&Yo(Uo,a))return a;return new Co(!1)}n=Ko(e,l)}for(r=h?e.next:n.next;!(s=Ro(r,n)).done;){try{a=y(s.value)}catch(e){Jo(n,"throw",e)}if("object"==typeof a&&a&&Yo(Uo,a))return a}return new Co(!1)};cl({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=To.f(t),n=i.resolve,l=i.reject,o=wo((function(){var i=Ho(t.resolve),l=[],o=0,c=1;Fo(e,(function(e){var a=o++,r=!1;c++,Lo(i,t,e).then((function(e){r||(r=!0,l[a]={status:"fulfilled",value:e},--c||n(l))}),(function(e){r||(r=!0,l[a]={status:"rejected",reason:e},--c||n(l))}))})),--c||n(l)}));return o.error&&l(o.value),i.promise}});var xo=o.Promise,Po=Z,zo=a,Bo=F,jo=lo,Mo=hi,Qo=function(){},Eo=[],Do=B("Reflect","construct"),Oo=/^\s*(?:class|function)\b/,Ao=Po(Oo.exec),_o=!Oo.exec(Qo),qo=function(e){if(!Bo(e))return!1;try{return Do(Qo,Eo,e),!0}catch(e){return!1}},$o=function(e){if(!Bo(e))return!1;switch(jo(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _o||!!Ao(Oo,Mo(e))}catch(e){return!0}};$o.sham=!0;var ec=!Do||zo((function(){var e;return qo(qo.call)||!qo(Object)||!qo((function(){e=!0}))||e}))?$o:qo,tc=ec,ic=Fe,nc=TypeError,lc=function(e){if(tc(e))return e;throw nc(ic(e)+" is not a constructor")},oc=Ye,cc=lc,ac=he("species"),rc=function(e,t){var i,n=oc(e).constructor;return void 0===n||null==(i=oc(n)[ac])?t:cc(i)},sc=Ye,dc=ye,uc=Fl,hc=cl,bc=xo,Zc=a,mc=B,pc=F,yc=rc,Gc=function(e,t){if(sc(e),dc(t)&&t.constructor===e)return t;var i=uc.f(e);return(0,i.resolve)(t),i.promise},Xc=nn,Wc=bc&&bc.prototype;if(hc({target:"Promise",proto:!0,real:!0,forced:!!bc&&Zc((function(){Wc.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=yc(this,mc("Promise")),i=pc(e);return this.then(i?function(i){return Gc(t,e()).then((function(){return i}))}:e,i?function(i){return Gc(t,e()).then((function(){throw i}))}:e)}}),pc(bc)){var Vc=mc("Promise").prototype.finally;Wc.finally!==Vc&&Xc(Wc,"finally",Vc,{unsafe:!0})}var Ic=$t.exports,Rc=Ze,gc=function(e,t,i){return i.get&&Ic(i.get,t,{getter:!0}),i.set&&Ic(i.set,t,{setter:!0}),Rc.f(e,t,i)},fc=Ye,vc=function(){var e=fc(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Sc=me,Yc=gc,Kc=vc,Nc=a,Jc=o.RegExp,kc=Jc.prototype,Cc=Sc&&Nc((function(){var e=!0;try{Jc(".","d")}catch(t){e=!1}var t={},i="",n=e?"dgimsy":"gimsy",l=function(e,n){Object.defineProperty(t,e,{get:function(){return i+=n,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var c in e&&(o.hasIndices="d"),o)l(c,o[c]);return Object.getOwnPropertyDescriptor(kc,"flags").get.call(t)!==n||i!==n}));Cc&&Yc(kc,"flags",{configurable:!0,get:Kc});var Uc,Lc,Hc,Tc=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),wc=I,Fc=F,xc=X,Pc=Tc,zc=Wi("IE_PROTO"),Bc=Object,jc=Bc.prototype,Mc=Pc?Bc.getPrototypeOf:function(e){var t=xc(e);if(wc(t,zc))return t[zc];var i=t.constructor;return Fc(i)&&t instanceof i?i.prototype:t instanceof Bc?jc:null},Qc=a,Ec=F,Dc=Mc,Oc=nn,Ac=he("iterator"),_c=!1;[].keys&&("next"in(Hc=[].keys())?(Lc=Dc(Dc(Hc)))!==Object.prototype&&(Uc=Lc):_c=!0);var qc=null==Uc||Qc((function(){var e={};return Uc[Ac].call(e)!==e}));qc&&(Uc={}),Ec(Uc[Ac])||Oc(Uc,Ac,(function(){return this}));var $c,ea,ta={IteratorPrototype:Uc,BUGGY_SAFARI_ITERATORS:_c},ia=Ze.f,na=I,la=he("toStringTag"),oa=function(e,t,i){e&&!i&&(e=e.prototype),e&&!na(e,la)&&ia(e,la,{configurable:!0,value:t})},ca=ta.IteratorPrototype,aa=Nl,ra=Yt,sa=oa,da=Ql,ua=function(){return this},ha=function(e,t,i,n){var l=t+" Iterator";return e.prototype=aa(ca,{next:ra(+!n,i)}),sa(e,l,!1),da[l]=ua,e},ba=lo,Za=String,ma=function(e){if("Symbol"===ba(e))throw TypeError("Cannot convert a Symbol value to a string");return Za(e)},pa=ye,ya=kt,Ga=he("match"),Xa=Je,Wa=I,Va=ke,Ia=vc,Ra=RegExp.prototype,ga=Z,fa=sn,va=ma,Sa=p,Ya=ga("".charAt),Ka=ga("".charCodeAt),Na=ga("".slice),Ja=function(e){return function(t,i){var n,l,o=va(Sa(t)),c=fa(i),a=o.length;return c<0||c>=a?e?"":void 0:(n=Ka(o,c))<55296||n>56319||c+1===a||(l=Ka(o,c+1))<56320||l>57343?e?Ya(o,c):n:e?Na(o,c,c+2):l-56320+(n-55296<<10)+65536}},ka={codeAt:Ja(!1),charAt:Ja(!0)},Ca=ka.charAt,Ua=function(e,t,i){return t+(i?Ca(e,t).length:1)},La=a,Ha=o.RegExp,Ta=La((function(){var e=Ha("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),wa=Ta||La((function(){return!Ha("a","y").sticky})),Fa={BROKEN_CARET:Ta||La((function(){var e=Ha("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:wa,UNSUPPORTED_Y:Ta},xa=a,Pa=o.RegExp,za=xa((function(){var e=Pa(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Ba=a,ja=o.RegExp,Ma=Ba((function(){var e=ja("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Qa=Je,Ea=Z,Da=ma,Oa=vc,Aa=Fa,_a=g.exports,qa=Nl,$a=Fi.get,er=za,tr=Ma,ir=_a("native-string-replace",String.prototype.replace),nr=RegExp.prototype.exec,lr=nr,or=Ea("".charAt),cr=Ea("".indexOf),ar=Ea("".replace),rr=Ea("".slice),sr=(ea=/b*/g,Qa(nr,$c=/a/,"a"),Qa(nr,ea,"a"),0!==$c.lastIndex||0!==ea.lastIndex),dr=Aa.BROKEN_CARET,ur=void 0!==/()??/.exec("")[1];(sr||ur||dr||er||tr)&&(lr=function(e){var t,i,n,l,o,c,a,r=this,s=$a(r),d=Da(e),u=s.raw;if(u)return u.lastIndex=r.lastIndex,t=Qa(lr,u,d),r.lastIndex=u.lastIndex,t;var h=s.groups,b=dr&&r.sticky,Z=Qa(Oa,r),m=r.source,p=0,y=d;if(b&&(Z=ar(Z,"y",""),-1===cr(Z,"g")&&(Z+="g"),y=rr(d,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==or(d,r.lastIndex-1))&&(m="(?: "+m+")",y=" "+y,p++),i=new RegExp("^(?:"+m+")",Z)),ur&&(i=new RegExp("^"+m+"$(?!\\s)",Z)),sr&&(n=r.lastIndex),l=Qa(nr,b?i:r,y),b?l?(l.input=rr(l.input,p),l[0]=rr(l[0],p),l.index=r.lastIndex,r.lastIndex+=l[0].length):r.lastIndex=0:sr&&l&&(r.lastIndex=r.global?l.index+l[0].length:n),ur&&l&&l.length>1&&Qa(ir,l[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(l[o]=void 0)})),l&&h)for(l.groups=c=qa(null),o=0;o<h.length;o++)c[(a=h[o])[0]]=l[a[1]];return l});var hr=lr,br=Je,Zr=Ye,mr=F,pr=kt,yr=hr,Gr=TypeError,Xr=function(e,t){var i=e.exec;if(mr(i)){var n=br(i,e,t);return null!==n&&Zr(n),n}if("RegExp"===pr(e))return br(yr,e,t);throw Gr("RegExp#exec called on incompatible receiver")},Wr=cl,Vr=Je,Ir=Z,Rr=ha,gr=p,fr=pn,vr=ma,Sr=Ye,Yr=function(e){var t;return pa(e)&&(void 0!==(t=e[Ga])?!!t:"RegExp"==ya(e))},Kr=function(e){var t=e.flags;return void 0!==t||"flags"in Ra||Wa(e,"flags")||!Va(Ra,e)?t:Xa(Ia,e)},Nr=Me,Jr=nn,kr=a,Cr=rc,Ur=Ua,Lr=Xr,Hr=Fi,Tr=he("matchAll"),wr="RegExp String",Fr="RegExp String Iterator",xr=Hr.set,Pr=Hr.getterFor(Fr),zr=RegExp.prototype,Br=TypeError,jr=Ir("".indexOf),Mr=Ir("".matchAll),Qr=!!Mr&&!kr((function(){Mr("a",/./)})),Er=Rr((function(e,t,i,n){xr(this,{type:Fr,regexp:e,string:t,global:i,unicode:n,done:!1})}),wr,(function(){var e=Pr(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,i=e.string,n=Lr(t,i);return null===n?{value:void 0,done:e.done=!0}:e.global?(""===vr(n[0])&&(t.lastIndex=Ur(i,fr(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),Dr=function(e){var t,i,n,l=Sr(this),o=vr(e),c=Cr(l,RegExp),a=vr(Kr(l));return t=new c(c===RegExp?l.source:l,a),i=!!~jr(a,"g"),n=!!~jr(a,"u"),t.lastIndex=fr(l.lastIndex),new Er(t,o,i,n)};Wr({target:"String",proto:!0,forced:Qr},{matchAll:function(e){var t,i,n,l=gr(this);if(null!=e){if(Yr(e)&&(t=vr(gr(Kr(e))),!~jr(t,"g")))throw Br("`.matchAll` does not allow non-global regexes");if(Qr)return Mr(l,e);if(n=Nr(e,Tr))return Vr(n,e,l)}else if(Qr)return Mr(l,e);return i=vr(l),new RegExp(e,"g")[Tr](i)}}),Tr in zr||Jr(zr,Tr,Dr);var Or=r,Ar=Function.prototype,_r=Ar.apply,qr=Ar.call,$r="object"==typeof Reflect&&Reflect.apply||(Or?qr.bind(_r):function(){return qr.apply(_r,arguments)});cl({target:"RegExp",proto:!0,forced:/./.exec!==hr},{exec:hr});var es=Z,ts=nn,is=hr,ns=a,ls=he,os=qt,cs=ls("species"),as=RegExp.prototype,rs=Z,ss=X,ds=Math.floor,us=rs("".charAt),hs=rs("".replace),bs=rs("".slice),Zs=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,ms=/\$([$&'`]|\d{1,2})/g,ps=$r,ys=Je,Gs=Z,Xs=function(e,t,i,n){var l=ls(e),o=!ns((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})),c=o&&!ns((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[cs]=function(){return i},i.flags="",i[l]=/./[l]),i.exec=function(){return t=!0,null},i[l](""),!t}));if(!o||!c||i){var a=es(/./[l]),r=t(l,""[e],(function(e,t,i,n,l){var c=es(e),r=t.exec;return r===is||r===as.exec?o&&!l?{done:!0,value:a(t,i,n)}:{done:!0,value:c(i,t,n)}:{done:!1}}));ts(String.prototype,e,r[0]),ts(as,l,r[1])}n&&os(as[l],"sham",!0)},Ws=a,Vs=Ye,Is=F,Rs=sn,gs=pn,fs=ma,vs=p,Ss=Ua,Ys=Me,Ks=function(e,t,i,n,l,o){var c=i+e.length,a=n.length,r=ms;return void 0!==l&&(l=ss(l),r=Zs),hs(o,r,(function(o,r){var s;switch(us(r,0)){case"$":return"$";case"&":return e;case"`":return bs(t,0,i);case"'":return bs(t,c);case"<":s=l[bs(r,1,-1)];break;default:var d=+r;if(0===d)return o;if(d>a){var u=ds(d/10);return 0===u?o:u<=a?void 0===n[u-1]?us(r,1):n[u-1]+us(r,1):o}s=n[d-1]}return void 0===s?"":s}))},Ns=Xr,Js=he("replace"),ks=Math.max,Cs=Math.min,Us=Gs([].concat),Ls=Gs([].push),Hs=Gs("".indexOf),Ts=Gs("".slice),ws="$0"==="a".replace(/./,"$0"),Fs=!!/./[Js]&&""===/./[Js]("a","$0");Xs("replace",(function(e,t,i){var n=Fs?"$":"$0";return[function(e,i){var n=vs(this),l=null==e?void 0:Ys(e,Js);return l?ys(l,e,n,i):ys(t,fs(n),e,i)},function(e,l){var o=Vs(this),c=fs(e);if("string"==typeof l&&-1===Hs(l,n)&&-1===Hs(l,"$<")){var a=i(t,o,c,l);if(a.done)return a.value}var r=Is(l);r||(l=fs(l));var s=o.global;if(s){var d=o.unicode;o.lastIndex=0}for(var u=[];;){var h=Ns(o,c);if(null===h)break;if(Ls(u,h),!s)break;""===fs(h[0])&&(o.lastIndex=Ss(c,gs(o.lastIndex),d))}for(var b,Z="",m=0,p=0;p<u.length;p++){for(var y=fs((h=u[p])[0]),G=ks(Cs(Rs(h.index),c.length),0),X=[],W=1;W<h.length;W++)Ls(X,void 0===(b=h[W])?b:String(b));var V=h.groups;if(r){var I=Us([y],X,G,c);void 0!==V&&Ls(I,V);var R=fs(ps(l,void 0,I))}else R=Ks(y,c,G,X,V,l);G>=m&&(Z+=Ts(c,m,G)+R,m=G+y.length)}return Z+Ts(c,m)}]}),!!Ws((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!ws||Fs);var xs={exports:{}},Ps=he("iterator"),zs=!1;try{var Bs=0,js={next:function(){return{done:!!Bs++}},return:function(){zs=!0}};js[Ps]=function(){return this},Array.from(js,(function(){throw 2}))}catch(e){}var Ms,Qs,Es,Ds="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Os=F,As=String,_s=TypeError,qs=Z,$s=Ye,ed=function(e){if("object"==typeof e||Os(e))return e;throw _s("Can't set "+As(e)+" as a prototype")},td=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=qs(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return $s(i),ed(n),t?e(i,n):i.__proto__=n,i}}():void 0),id=Ds,nd=me,ld=o,od=F,cd=ye,ad=I,rd=lo,sd=Fe,dd=qt,ud=nn,hd=Ze.f,bd=ke,Zd=Mc,md=td,pd=he,yd=w,Gd=Fi.enforce,Xd=Fi.get,Wd=ld.Int8Array,Vd=Wd&&Wd.prototype,Id=ld.Uint8ClampedArray,Rd=Id&&Id.prototype,gd=Wd&&Zd(Wd),fd=Vd&&Zd(Vd),vd=Object.prototype,Sd=ld.TypeError,Yd=pd("toStringTag"),Kd=yd("TYPED_ARRAY_TAG"),Nd="TypedArrayConstructor",Jd=id&&!!md&&"Opera"!==rd(ld.opera),kd=!1,Cd={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ud={BigInt64Array:8,BigUint64Array:8},Ld=function(e){var t=Zd(e);if(cd(t)){var i=Xd(t);return i&&ad(i,Nd)?i.TypedArrayConstructor:Ld(t)}},Hd=function(e){if(!cd(e))return!1;var t=rd(e);return ad(Cd,t)||ad(Ud,t)};for(Ms in Cd)(Es=(Qs=ld[Ms])&&Qs.prototype)?Gd(Es).TypedArrayConstructor=Qs:Jd=!1;for(Ms in Ud)(Es=(Qs=ld[Ms])&&Qs.prototype)&&(Gd(Es).TypedArrayConstructor=Qs);if((!Jd||!od(gd)||gd===Function.prototype)&&(gd=function(){throw Sd("Incorrect invocation")},Jd))for(Ms in Cd)ld[Ms]&&md(ld[Ms],gd);if((!Jd||!fd||fd===vd)&&(fd=gd.prototype,Jd))for(Ms in Cd)ld[Ms]&&md(ld[Ms].prototype,fd);if(Jd&&Zd(Rd)!==fd&&md(Rd,fd),nd&&!ad(fd,Yd))for(Ms in kd=!0,hd(fd,Yd,{get:function(){return cd(this)?this[Kd]:void 0}}),Cd)ld[Ms]&&dd(ld[Ms],Kd,Ms);var Td={NATIVE_ARRAY_BUFFER_VIEWS:Jd,TYPED_ARRAY_TAG:kd&&Kd,aTypedArray:function(e){if(Hd(e))return e;throw Sd("Target is not a typed array")},aTypedArrayConstructor:function(e){if(od(e)&&(!md||bd(gd,e)))return e;throw Sd(sd(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(nd){if(i)for(var l in Cd){var o=ld[l];if(o&&ad(o.prototype,e))try{delete o.prototype[e]}catch(i){try{o.prototype[e]=t}catch(e){}}}fd[e]&&!i||ud(fd,e,i?t:Jd&&Vd[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,l;if(nd){if(md){if(i)for(n in Cd)if((l=ld[n])&&ad(l,e))try{delete l[e]}catch(e){}if(gd[e]&&!i)return;try{return ud(gd,e,i?t:Jd&&gd[e]||t)}catch(e){}}for(n in Cd)!(l=ld[n])||l[e]&&!i||ud(l,e,t)}},getTypedArrayConstructor:Ld,isView:function(e){if(!cd(e))return!1;var t=rd(e);return"DataView"===t||ad(Cd,t)||ad(Ud,t)},isTypedArray:Hd,TypedArray:gd,TypedArrayPrototype:fd},wd=o,Fd=a,xd=function(e,t){if(!t&&!zs)return!1;var i=!1;try{var n={};n[Ps]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},Pd=Td.NATIVE_ARRAY_BUFFER_VIEWS,zd=wd.ArrayBuffer,Bd=wd.Int8Array,jd=!Pd||!Fd((function(){Bd(1)}))||!Fd((function(){new Bd(-1)}))||!xd((function(e){new Bd,new Bd(null),new Bd(1.5),new Bd(e)}),!0)||Fd((function(){return 1!==new Bd(new zd(2),1,void 0).length})),Md=nn,Qd=function(e,t,i){for(var n in t)Md(e,n,t[n],i);return e},Ed=ke,Dd=TypeError,Od=function(e,t){if(Ed(t,e))return e;throw Dd("Incorrect invocation")},Ad=sn,_d=pn,qd=RangeError,$d=function(e){if(void 0===e)return 0;var t=Ad(e),i=_d(t);if(t!==i)throw qd("Wrong length or index");return i},eu=Array,tu=Math.abs,iu=Math.pow,nu=Math.floor,lu=Math.log,ou=Math.LN2,cu={pack:function(e,t,i){var n,l,o,c=eu(i),a=8*i-t-1,r=(1<<a)-1,s=r>>1,d=23===t?iu(2,-24)-iu(2,-77):0,u=e<0||0===e&&1/e<0?1:0,h=0;for((e=tu(e))!=e||e===1/0?(l=e!=e?1:0,n=r):(n=nu(lu(e)/ou),e*(o=iu(2,-n))<1&&(n--,o*=2),(e+=n+s>=1?d/o:d*iu(2,1-s))*o>=2&&(n++,o/=2),n+s>=r?(l=0,n=r):n+s>=1?(l=(e*o-1)*iu(2,t),n+=s):(l=e*iu(2,s-1)*iu(2,t),n=0));t>=8;)c[h++]=255&l,l/=256,t-=8;for(n=n<<t|l,a+=t;a>0;)c[h++]=255&n,n/=256,a-=8;return c[--h]|=128*u,c},unpack:function(e,t){var i,n=e.length,l=8*n-t-1,o=(1<<l)-1,c=o>>1,a=l-7,r=n-1,s=e[r--],d=127&s;for(s>>=7;a>0;)d=256*d+e[r--],a-=8;for(i=d&(1<<-a)-1,d>>=-a,a+=t;a>0;)i=256*i+e[r--],a-=8;if(0===d)d=1-c;else{if(d===o)return i?NaN:s?-1/0:1/0;i+=iu(2,t),d-=c}return(s?-1:1)*i*iu(2,d-t)}},au=X,ru=bn,su=Gn,du=function(e){for(var t=au(this),i=su(t),n=arguments.length,l=ru(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,c=void 0===o?i:ru(o,i);c>l;)t[l++]=e;return t},uu=ct,hu=Ze,bu=Yt,Zu=function(e,t,i){var n=uu(t);n in e?hu.f(e,n,bu(0,i)):e[n]=i},mu=bn,pu=Gn,yu=Zu,Gu=Array,Xu=Math.max,Wu=function(e,t,i){for(var n=pu(e),l=mu(t,n),o=mu(void 0===i?n:i,n),c=Gu(Xu(o-l,0)),a=0;l<o;l++,a++)yu(c,a,e[l]);return c.length=a,c},Vu=o,Iu=Z,Ru=me,gu=Ds,fu=oi,vu=qt,Su=Qd,Yu=a,Ku=Od,Nu=sn,Ju=pn,ku=$d,Cu=cu,Uu=Mc,Lu=td,Hu=ln.f,Tu=Ze.f,wu=du,Fu=Wu,xu=oa,Pu=fu.PROPER,zu=fu.CONFIGURABLE,Bu=Fi.get,ju=Fi.set,Mu="ArrayBuffer",Qu="DataView",Eu="Wrong index",Du=Vu.ArrayBuffer,Ou=Du,Au=Ou&&Ou.prototype,_u=Vu.DataView,qu=_u&&_u.prototype,$u=Object.prototype,eh=Vu.Array,th=Vu.RangeError,ih=Iu(wu),nh=Iu([].reverse),lh=Cu.pack,oh=Cu.unpack,ch=function(e){return[255&e]},ah=function(e){return[255&e,e>>8&255]},rh=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},sh=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},dh=function(e){return lh(e,23,4)},uh=function(e){return lh(e,52,8)},hh=function(e,t){Tu(e.prototype,t,{get:function(){return Bu(this)[t]}})},bh=function(e,t,i,n){var l=ku(i),o=Bu(e);if(l+t>o.byteLength)throw th(Eu);var c=Bu(o.buffer).bytes,a=l+o.byteOffset,r=Fu(c,a,a+t);return n?r:nh(r)},Zh=function(e,t,i,n,l,o){var c=ku(i),a=Bu(e);if(c+t>a.byteLength)throw th(Eu);for(var r=Bu(a.buffer).bytes,s=c+a.byteOffset,d=n(+l),u=0;u<t;u++)r[s+u]=d[o?u:t-u-1]};if(gu){var mh=Pu&&Du.name!==Mu;if(Yu((function(){Du(1)}))&&Yu((function(){new Du(-1)}))&&!Yu((function(){return new Du,new Du(1.5),new Du(NaN),mh&&!zu})))mh&&zu&&vu(Du,"name",Mu);else{(Ou=function(e){return Ku(this,Au),new Du(ku(e))}).prototype=Au;for(var ph,yh=Hu(Du),Gh=0;yh.length>Gh;)(ph=yh[Gh++])in Ou||vu(Ou,ph,Du[ph]);Au.constructor=Ou}Lu&&Uu(qu)!==$u&&Lu(qu,$u);var Xh=new _u(new Ou(2)),Wh=Iu(qu.setInt8);Xh.setInt8(0,2147483648),Xh.setInt8(1,2147483649),!Xh.getInt8(0)&&Xh.getInt8(1)||Su(qu,{setInt8:function(e,t){Wh(this,e,t<<24>>24)},setUint8:function(e,t){Wh(this,e,t<<24>>24)}},{unsafe:!0})}else Ou=function(e){Ku(this,Au);var t=ku(e);ju(this,{bytes:ih(eh(t),0),byteLength:t}),Ru||(this.byteLength=t)},Au=Ou.prototype,_u=function(e,t,i){Ku(this,qu),Ku(e,Au);var n=Bu(e).byteLength,l=Nu(t);if(l<0||l>n)throw th("Wrong offset");if(l+(i=void 0===i?n-l:Ju(i))>n)throw th("Wrong length");ju(this,{buffer:e,byteLength:i,byteOffset:l}),Ru||(this.buffer=e,this.byteLength=i,this.byteOffset=l)},qu=_u.prototype,Ru&&(hh(Ou,"byteLength"),hh(_u,"buffer"),hh(_u,"byteLength"),hh(_u,"byteOffset")),Su(qu,{getInt8:function(e){return bh(this,1,e)[0]<<24>>24},getUint8:function(e){return bh(this,1,e)[0]},getInt16:function(e){var t=bh(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=bh(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return sh(bh(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return sh(bh(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return oh(bh(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return oh(bh(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Zh(this,1,e,ch,t)},setUint8:function(e,t){Zh(this,1,e,ch,t)},setInt16:function(e,t){Zh(this,2,e,ah,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Zh(this,2,e,ah,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Zh(this,4,e,rh,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Zh(this,4,e,rh,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Zh(this,4,e,dh,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Zh(this,8,e,uh,t,arguments.length>2?arguments[2]:void 0)}});xu(Ou,Mu),xu(_u,Qu);var Vh={ArrayBuffer:Ou,DataView:_u},Ih=ye,Rh=Math.floor,gh=Number.isInteger||function(e){return!Ih(e)&&isFinite(e)&&Rh(e)===e},fh=sn,vh=RangeError,Sh=function(e){var t=fh(e);if(t<0)throw vh("The argument can't be less than 0");return t},Yh=RangeError,Kh=function(e,t){var i=Sh(e);if(i%t)throw Yh("Wrong offset");return i},Nh=Ml,Jh=Je,kh=lc,Ch=X,Uh=Gn,Lh=yo,Hh=so,Th=Al,wh=Td.aTypedArrayConstructor,Fh=function(e){var t,i,n,l,o,c,a=kh(this),r=Ch(e),s=arguments.length,d=s>1?arguments[1]:void 0,u=void 0!==d,h=Hh(r);if(h&&!Th(h))for(c=(o=Lh(r,h)).next,r=[];!(l=Jh(c,o)).done;)r.push(l.value);for(u&&s>2&&(d=Nh(d,arguments[2])),i=Uh(r),n=new(wh(a))(i),t=0;i>t;t++)n[t]=u?d(r[t],t):r[t];return n},xh=kt,Ph=Array.isArray||function(e){return"Array"==xh(e)},zh=ec,Bh=ye,jh=he("species"),Mh=Array,Qh=function(e){var t;return Ph(e)&&(t=e.constructor,(zh(t)&&(t===Mh||Ph(t.prototype))||Bh(t)&&null===(t=t[jh]))&&(t=void 0)),void 0===t?Mh:t},Eh=Ml,Dh=Tt,Oh=X,Ah=Gn,_h=function(e,t){return new(Qh(e))(0===t?0:t)},qh=Z([].push),$h=function(e){var t=1==e,i=2==e,n=3==e,l=4==e,o=6==e,c=7==e,a=5==e||o;return function(r,s,d,u){for(var h,b,Z=Oh(r),m=Dh(Z),p=Eh(s,d),y=Ah(m),G=0,X=u||_h,W=t?X(r,y):i||c?X(r,0):void 0;y>G;G++)if((a||G in m)&&(b=p(h=m[G],G,Z),e))if(t)W[G]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return G;case 2:qh(W,h)}else switch(e){case 4:return!1;case 7:qh(W,h)}return o?-1:n||l?l:W}},eb={forEach:$h(0),map:$h(1),filter:$h(2),some:$h(3),every:$h(4),find:$h(5),findIndex:$h(6),filterReject:$h(7)},tb=B,ib=Ze,nb=me,lb=he("species"),ob=F,cb=ye,ab=td,rb=cl,sb=o,db=Je,ub=me,hb=jd,bb=Td,Zb=Vh,mb=Od,pb=Yt,yb=qt,Gb=gh,Xb=pn,Wb=$d,Vb=Kh,Ib=ct,Rb=I,gb=lo,fb=ye,vb=Te,Sb=Nl,Yb=ke,Kb=td,Nb=ln.f,Jb=Fh,kb=eb.forEach,Cb=function(e){var t=tb(e),i=ib.f;nb&&t&&!t[lb]&&i(t,lb,{configurable:!0,get:function(){return this}})},Ub=Ze,Lb=Rt,Hb=function(e,t,i){var n,l;return ab&&ob(n=t.constructor)&&n!==i&&cb(l=n.prototype)&&l!==i.prototype&&ab(e,l),e},Tb=Fi.get,wb=Fi.set,Fb=Fi.enforce,xb=Ub.f,Pb=Lb.f,zb=Math.round,Bb=sb.RangeError,jb=Zb.ArrayBuffer,Mb=jb.prototype,Qb=Zb.DataView,Eb=bb.NATIVE_ARRAY_BUFFER_VIEWS,Db=bb.TYPED_ARRAY_TAG,Ob=bb.TypedArray,Ab=bb.TypedArrayPrototype,_b=bb.aTypedArrayConstructor,qb=bb.isTypedArray,$b="BYTES_PER_ELEMENT",eZ="Wrong length",tZ=function(e,t){_b(e);for(var i=0,n=t.length,l=new e(n);n>i;)l[i]=t[i++];return l},iZ=function(e,t){xb(e,t,{get:function(){return Tb(this)[t]}})},nZ=function(e){var t;return Yb(Mb,e)||"ArrayBuffer"==(t=gb(e))||"SharedArrayBuffer"==t},lZ=function(e,t){return qb(e)&&!vb(t)&&t in e&&Gb(+t)&&t>=0},oZ=function(e,t){return t=Ib(t),lZ(e,t)?pb(2,e[t]):Pb(e,t)},cZ=function(e,t,i){return t=Ib(t),!(lZ(e,t)&&fb(i)&&Rb(i,"value"))||Rb(i,"get")||Rb(i,"set")||i.configurable||Rb(i,"writable")&&!i.writable||Rb(i,"enumerable")&&!i.enumerable?xb(e,t,i):(e[t]=i.value,e)};ub?(Eb||(Lb.f=oZ,Ub.f=cZ,iZ(Ab,"buffer"),iZ(Ab,"byteOffset"),iZ(Ab,"byteLength"),iZ(Ab,"length")),rb({target:"Object",stat:!0,forced:!Eb},{getOwnPropertyDescriptor:oZ,defineProperty:cZ}),xs.exports=function(e,t,i){var n=e.match(/\d+$/)[0]/8,l=e+(i?"Clamped":"")+"Array",o="get"+e,c="set"+e,a=sb[l],r=a,s=r&&r.prototype,d={},u=function(e,t){xb(e,t,{get:function(){return function(e,t){var i=Tb(e);return i.view[o](t*n+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,l){var o=Tb(e);i&&(l=(l=zb(l))<0?0:l>255?255:255&l),o.view[c](t*n+o.byteOffset,l,!0)}(this,t,e)},enumerable:!0})};Eb?hb&&(r=t((function(e,t,i,l){return mb(e,s),Hb(fb(t)?nZ(t)?void 0!==l?new a(t,Vb(i,n),l):void 0!==i?new a(t,Vb(i,n)):new a(t):qb(t)?tZ(r,t):db(Jb,r,t):new a(Wb(t)),e,r)})),Kb&&Kb(r,Ob),kb(Nb(a),(function(e){e in r||yb(r,e,a[e])})),r.prototype=s):(r=t((function(e,t,i,l){mb(e,s);var o,c,a,d=0,h=0;if(fb(t)){if(!nZ(t))return qb(t)?tZ(r,t):db(Jb,r,t);o=t,h=Vb(i,n);var b=t.byteLength;if(void 0===l){if(b%n)throw Bb(eZ);if((c=b-h)<0)throw Bb(eZ)}else if((c=Xb(l)*n)+h>b)throw Bb(eZ);a=c/n}else a=Wb(t),o=new jb(c=a*n);for(wb(e,{buffer:o,byteOffset:h,byteLength:c,length:a,view:new Qb(o)});d<a;)u(e,d++)})),Kb&&Kb(r,Ob),s=r.prototype=Sb(Ab)),s.constructor!==r&&yb(s,"constructor",r),Fb(s).TypedArrayConstructor=r,Db&&yb(s,Db,l);var h=r!=a;d[l]=r,rb({global:!0,constructor:!0,forced:h,sham:!Eb},d),$b in r||yb(r,$b,n),$b in s||yb(s,$b,n),Cb(l)}):xs.exports=function(){},(0,xs.exports)("Float32",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Float64",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Int8",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Int16",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Int32",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}),!0),(0,xs.exports)("Uint16",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,xs.exports)("Uint32",(function(e){return function(t,i,n){return e(this,t,i,n)}}));var aZ=nt,rZ=TypeError,sZ=du,dZ=function(e){var t=aZ(e,"number");if("number"==typeof t)throw rZ("Can't convert number to bigint");return BigInt(t)},uZ=lo,hZ=Je,bZ=a,ZZ=Td.aTypedArray,mZ=Td.exportTypedArrayMethod,pZ=Z("".slice);mZ("fill",(function(e){var t=arguments.length;ZZ(this);var i="Big"===pZ(uZ(this),0,3)?dZ(e):+e;return hZ(sZ,this,i,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),bZ((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}))),(0,Td.exportTypedArrayStaticMethod)("from",Fh,jd);var yZ=Td.aTypedArrayConstructor;(0,Td.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,i=new(yZ(this))(t);t>e;)i[e]=arguments[e++];return i}),jd);var GZ=o,XZ=Je,WZ=Td,VZ=Gn,IZ=Kh,RZ=X,gZ=a,fZ=GZ.RangeError,vZ=GZ.Int8Array,SZ=vZ&&vZ.prototype,YZ=SZ&&SZ.set,KZ=WZ.aTypedArray,NZ=WZ.exportTypedArrayMethod,JZ=!gZ((function(){var e=new Uint8ClampedArray(2);return XZ(YZ,e,{length:1,0:3},1),3!==e[1]})),kZ=JZ&&WZ.NATIVE_ARRAY_BUFFER_VIEWS&&gZ((function(){var e=new vZ(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));NZ("set",(function(e){KZ(this);var t=IZ(arguments.length>1?arguments[1]:void 0,1),i=RZ(e);if(JZ)return XZ(YZ,this,i,t);var n=this.length,l=VZ(i),o=0;if(l+t>n)throw fZ("Wrong length");for(;o<l;)this[t+o]=i[o++]}),!JZ||kZ);var CZ=Wu,UZ=Math.floor,LZ=function(e,t){var i=e.length,n=UZ(i/2);return i<8?HZ(e,t):TZ(e,LZ(CZ(e,0,n),t),LZ(CZ(e,n),t),t)},HZ=function(e,t){for(var i,n,l=e.length,o=1;o<l;){for(n=o,i=e[o];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==o++&&(e[n]=i)}return e},TZ=function(e,t,i,n){for(var l=t.length,o=i.length,c=0,a=0;c<l||a<o;)e[c+a]=c<l&&a<o?n(t[c],i[a])<=0?t[c++]:i[a++]:c<l?t[c++]:i[a++];return e},wZ=LZ,FZ=j.match(/firefox\/(\d+)/i),xZ=!!FZ&&+FZ[1],PZ=/MSIE|Trident/.test(j),zZ=j.match(/AppleWebKit\/(\d+)\./),BZ=!!zZ&&+zZ[1],jZ=Z,MZ=a,QZ=Be,EZ=wZ,DZ=xZ,OZ=PZ,AZ=_,_Z=BZ,qZ=Td.aTypedArray,$Z=Td.exportTypedArrayMethod,em=o.Uint16Array,tm=em&&jZ(em.prototype.sort),im=!(!tm||MZ((function(){tm(new em(2),null)}))&&MZ((function(){tm(new em(2),{})}))),nm=!!tm&&!MZ((function(){if(AZ)return AZ<74;if(DZ)return DZ<67;if(OZ)return!0;if(_Z)return _Z<602;var e,t,i=new em(516),n=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,n[e]=e-2*t+3;for(tm(i,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==n[e])return!0}));$Z("sort",(function(e){return void 0!==e&&QZ(e),nm?tm(this,e):EZ(qZ(this),function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}}(e))}),!nm||im);var lm=Ve("span").classList,om=lm&&lm.constructor&&lm.constructor.prototype,cm=om===Object.prototype?void 0:om,am=cl,rm=Je,sm=F,dm=ha,um=Mc,hm=td,bm=oa,Zm=qt,mm=nn,pm=Ql,ym=oi.PROPER,Gm=oi.CONFIGURABLE,Xm=ta.IteratorPrototype,Wm=ta.BUGGY_SAFARI_ITERATORS,Vm=he("iterator"),Im="keys",Rm="values",gm="entries",fm=function(){return this},vm=function(e,t,i,n,l,o,c){dm(i,t,n);var a,r,s,d=function(e){if(e===l&&m)return m;if(!Wm&&e in b)return b[e];switch(e){case Im:case Rm:case gm:return function(){return new i(this,e)}}return function(){return new i(this)}},u=t+" Iterator",h=!1,b=e.prototype,Z=b[Vm]||b["@@iterator"]||l&&b[l],m=!Wm&&Z||d(l),p="Array"==t&&b.entries||Z;if(p&&(a=um(p.call(new e)))!==Object.prototype&&a.next&&(um(a)!==Xm&&(hm?hm(a,Xm):sm(a[Vm])||mm(a,Vm,fm)),bm(a,u,!0)),ym&&l==Rm&&Z&&Z.name!==Rm&&(Gm?Zm(b,"name",Rm):(h=!0,m=function(){return rm(Z,this)})),l)if(r={values:d(Rm),keys:o?m:d(Im),entries:d(gm)},c)for(s in r)(Wm||h||!(s in b))&&mm(b,s,r[s]);else am({target:t,proto:!0,forced:Wm||h},r);return b[Vm]!==m&&mm(b,Vm,m,{name:l}),pm[t]=m,r},Sm=xt,Ym=Hl,Km=Ql,Nm=Fi,Jm=Ze.f,km=vm,Cm=me,Um="Array Iterator",Lm=Nm.set,Hm=Nm.getterFor(Um),Tm=km(Array,"Array",(function(e,t){Lm(this,{type:Um,target:Sm(e),index:0,kind:t})}),(function(){var e=Hm(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),wm=Km.Arguments=Km.Array;if(Ym("keys"),Ym("values"),Ym("entries"),Cm&&"values"!==wm.name)try{Jm(wm,"name",{value:"values"})}catch(e){}var Fm=o,xm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Pm=cm,zm=Tm,Bm=qt,jm=he,Mm=jm("iterator"),Qm=jm("toStringTag"),Em=zm.values,Dm=function(e,t){if(e){if(e[Mm]!==Em)try{Bm(e,Mm,Em)}catch(t){e[Mm]=Em}if(e[Qm]||Bm(e,Qm,t),xm[t])for(var i in zm)if(e[i]!==zm[i])try{Bm(e,i,zm[i])}catch(t){e[i]=zm[i]}}};for(var Om in xm)Dm(Fm[Om]&&Fm[Om].prototype,Om);Dm(Pm,"DOMTokenList");var Am,_m,qm,$m,ep=Z([].slice),tp=TypeError,ip=function(e,t){if(e<t)throw tp("Not enough arguments");return e},np=/(?:ipad|iphone|ipod).*applewebkit/i.test(j),lp="process"==kt(o.process),op=o,cp=$r,ap=Ml,rp=F,sp=I,dp=a,up=Gl,hp=ep,bp=Ve,Zp=ip,mp=np,pp=lp,yp=op.setImmediate,Gp=op.clearImmediate,Xp=op.process,Wp=op.Dispatch,Vp=op.Function,Ip=op.MessageChannel,Rp=op.String,gp=0,fp={},vp="onreadystatechange";try{Am=op.location}catch(e){}var Sp=function(e){if(sp(fp,e)){var t=fp[e];delete fp[e],t()}},Yp=function(e){return function(){Sp(e)}},Kp=function(e){Sp(e.data)},Np=function(e){op.postMessage(Rp(e),Am.protocol+"//"+Am.host)};yp&&Gp||(yp=function(e){Zp(arguments.length,1);var t=rp(e)?e:Vp(e),i=hp(arguments,1);return fp[++gp]=function(){cp(t,void 0,i)},_m(gp),gp},Gp=function(e){delete fp[e]},pp?_m=function(e){Xp.nextTick(Yp(e))}:Wp&&Wp.now?_m=function(e){Wp.now(Yp(e))}:Ip&&!mp?($m=(qm=new Ip).port2,qm.port1.onmessage=Kp,_m=ap($m.postMessage,$m)):op.addEventListener&&rp(op.postMessage)&&!op.importScripts&&Am&&"file:"!==Am.protocol&&!dp(Np)?(_m=Np,op.addEventListener("message",Kp,!1)):_m=vp in bp("script")?function(e){up.appendChild(bp("script")).onreadystatechange=function(){up.removeChild(this),Sp(e)}}:function(e){setTimeout(Yp(e),0)});var Jp={set:yp,clear:Gp},kp=Jp.clear;cl({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==kp},{clearImmediate:kp});var Cp=Jp.set;cl({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==Cp},{setImmediate:Cp});var Up=ka.charAt,Lp=ma,Hp=Fi,Tp=vm,wp="String Iterator",Fp=Hp.set,xp=Hp.getterFor(wp);Tp(String,"String",(function(e){Fp(this,{type:wp,string:Lp(e),index:0})}),(function(){var e,t=xp(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=Up(i,n),t.index+=e.length,{value:e,done:!1})}));var Pp=a,zp=he("iterator"),Bp=!Pp((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),i+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[zp]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})),jp=me,Mp=Z,Qp=Je,Ep=a,Dp=dl,Op=Cn,Ap=gt,_p=X,qp=Tt,$p=Object.assign,ey=Object.defineProperty,ty=Mp([].concat),iy=!$p||Ep((function(){if(jp&&1!==$p({b:1},$p(ey({},"a",{enumerable:!0,get:function(){ey(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=$p({},e)[i]||Dp($p({},t)).join("")!=n}))?function(e,t){for(var i=_p(e),n=arguments.length,l=1,o=Op.f,c=Ap.f;n>l;)for(var a,r=qp(arguments[l++]),s=o?ty(Dp(r),o(r)):Dp(r),d=s.length,u=0;d>u;)a=s[u++],jp&&!Qp(c,r,a)||(i[a]=r[a]);return i}:$p,ny=Ye,ly=Vo,oy=Ml,cy=Je,ay=X,ry=function(e,t,i,n){try{return n?t(ny(i)[0],i[1]):t(i)}catch(t){ly(e,"throw",t)}},sy=Al,dy=ec,uy=Gn,hy=Zu,by=yo,Zy=so,my=Array,py=Z,yy=2147483647,Gy=/[^\0-\u007E]/,Xy=/[.\u3002\uFF0E\uFF61]/g,Wy="Overflow: input needs wider integers to process",Vy=RangeError,Iy=py(Xy.exec),Ry=Math.floor,gy=String.fromCharCode,fy=py("".charCodeAt),vy=py([].join),Sy=py([].push),Yy=py("".replace),Ky=py("".split),Ny=py("".toLowerCase),Jy=function(e){return e+22+75*(e<26)},ky=function(e,t,i){var n=0;for(e=i?Ry(e/700):e>>1,e+=Ry(e/t);e>455;)e=Ry(e/35),n+=36;return Ry(n+36*e/(e+38))},Cy=function(e){var t=[];e=function(e){for(var t=[],i=0,n=e.length;i<n;){var l=fy(e,i++);if(l>=55296&&l<=56319&&i<n){var o=fy(e,i++);56320==(64512&o)?Sy(t,((1023&l)<<10)+(1023&o)+65536):(Sy(t,l),i--)}else Sy(t,l)}return t}(e);var i,n,l=e.length,o=128,c=0,a=72;for(i=0;i<e.length;i++)(n=e[i])<128&&Sy(t,gy(n));var r=t.length,s=r;for(r&&Sy(t,"-");s<l;){var d=yy;for(i=0;i<e.length;i++)(n=e[i])>=o&&n<d&&(d=n);var u=s+1;if(d-o>Ry((yy-c)/u))throw Vy(Wy);for(c+=(d-o)*u,o=d,i=0;i<e.length;i++){if((n=e[i])<o&&++c>yy)throw Vy(Wy);if(n==o){for(var h=c,b=36;;){var Z=b<=a?1:b>=a+26?26:b-a;if(h<Z)break;var m=h-Z,p=36-Z;Sy(t,gy(Jy(Z+m%p))),h=Ry(m/p),b+=36}Sy(t,gy(Jy(h))),a=ky(c,u,s==r),c=0,s++}}c++,o++}return vy(t,"")},Uy=cl,Ly=o,Hy=Je,Ty=Z,wy=me,Fy=Bp,xy=nn,Py=Qd,zy=oa,By=ha,jy=Fi,My=Od,Qy=F,Ey=I,Dy=Ml,Oy=lo,Ay=Ye,_y=ye,qy=ma,$y=Nl,eG=Yt,tG=yo,iG=so,nG=ip,lG=wZ,oG=he("iterator"),cG="URLSearchParams",aG="URLSearchParamsIterator",rG=jy.set,sG=jy.getterFor(cG),dG=jy.getterFor(aG),uG=Object.getOwnPropertyDescriptor,hG=function(e){if(!wy)return Ly[e];var t=uG(Ly,e);return t&&t.value},bG=hG("fetch"),ZG=hG("Request"),mG=hG("Headers"),pG=ZG&&ZG.prototype,yG=mG&&mG.prototype,GG=Ly.RegExp,XG=Ly.TypeError,WG=Ly.decodeURIComponent,VG=Ly.encodeURIComponent,IG=Ty("".charAt),RG=Ty([].join),gG=Ty([].push),fG=Ty("".replace),vG=Ty([].shift),SG=Ty([].splice),YG=Ty("".split),KG=Ty("".slice),NG=/\+/g,JG=Array(4),kG=function(e){return JG[e-1]||(JG[e-1]=GG("((?:%[\\da-f]{2}){"+e+"})","gi"))},CG=function(e){try{return WG(e)}catch(t){return e}},UG=function(e){var t=fG(e,NG," "),i=4;try{return WG(t)}catch(e){for(;i;)t=fG(t,kG(i--),CG);return t}},LG=/[!'()~]|%20/g,HG={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},TG=function(e){return HG[e]},wG=function(e){return fG(VG(e),LG,TG)},FG=By((function(e,t){rG(this,{type:aG,iterator:tG(sG(e).entries),kind:t})}),"Iterator",(function(){var e=dG(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i}),!0),xG=function(e){this.entries=[],this.url=null,void 0!==e&&(_y(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===IG(e,0)?KG(e,1):e:qy(e)))};xG.prototype={type:cG,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,l,o,c,a,r=iG(e);if(r)for(i=(t=tG(e,r)).next;!(n=Hy(i,t)).done;){if(o=(l=tG(Ay(n.value))).next,(c=Hy(o,l)).done||(a=Hy(o,l)).done||!Hy(o,l).done)throw XG("Expected sequence with length 2");gG(this.entries,{key:qy(c.value),value:qy(a.value)})}else for(var s in e)Ey(e,s)&&gG(this.entries,{key:s,value:qy(e[s])})},parseQuery:function(e){if(e)for(var t,i,n=YG(e,"&"),l=0;l<n.length;)(t=n[l++]).length&&(i=YG(t,"="),gG(this.entries,{key:UG(vG(i)),value:UG(RG(i,"="))}))},serialize:function(){for(var e,t=this.entries,i=[],n=0;n<t.length;)e=t[n++],gG(i,wG(e.key)+"="+wG(e.value));return RG(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var PG=function(){My(this,zG);var e=arguments.length>0?arguments[0]:void 0;rG(this,new xG(e))},zG=PG.prototype;if(Py(zG,{append:function(e,t){nG(arguments.length,2);var i=sG(this);gG(i.entries,{key:qy(e),value:qy(t)}),i.updateURL()},delete:function(e){nG(arguments.length,1);for(var t=sG(this),i=t.entries,n=qy(e),l=0;l<i.length;)i[l].key===n?SG(i,l,1):l++;t.updateURL()},get:function(e){nG(arguments.length,1);for(var t=sG(this).entries,i=qy(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){nG(arguments.length,1);for(var t=sG(this).entries,i=qy(e),n=[],l=0;l<t.length;l++)t[l].key===i&&gG(n,t[l].value);return n},has:function(e){nG(arguments.length,1);for(var t=sG(this).entries,i=qy(e),n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){nG(arguments.length,1);for(var i,n=sG(this),l=n.entries,o=!1,c=qy(e),a=qy(t),r=0;r<l.length;r++)(i=l[r]).key===c&&(o?SG(l,r--,1):(o=!0,i.value=a));o||gG(l,{key:c,value:a}),n.updateURL()},sort:function(){var e=sG(this);lG(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,i=sG(this).entries,n=Dy(e,arguments.length>1?arguments[1]:void 0),l=0;l<i.length;)n((t=i[l++]).value,t.key,this)},keys:function(){return new FG(this,"keys")},values:function(){return new FG(this,"values")},entries:function(){return new FG(this,"entries")}},{enumerable:!0}),xy(zG,oG,zG.entries,{name:"entries"}),xy(zG,"toString",(function(){return sG(this).serialize()}),{enumerable:!0}),zy(PG,cG),Uy({global:!0,constructor:!0,forced:!Fy},{URLSearchParams:PG}),!Fy&&Qy(mG)){var BG=Ty(yG.has),jG=Ty(yG.set),MG=function(e){if(_y(e)){var t,i=e.body;if(Oy(i)===cG)return t=e.headers?new mG(e.headers):new mG,BG(t,"content-type")||jG(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$y(e,{body:eG(0,qy(i)),headers:eG(0,t)})}return e};if(Qy(bG)&&Uy({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return bG(e,arguments.length>1?MG(arguments[1]):{})}}),Qy(ZG)){var QG=function(e){return My(this,pG),new ZG(e,arguments.length>1?MG(arguments[1]):{})};pG.constructor=QG,QG.prototype=pG,Uy({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:QG})}}var EG,DG=cl,OG=me,AG=Bp,_G=o,qG=Ml,$G=Z,eX=nn,tX=gc,iX=Od,nX=I,lX=iy,oX=function(e){var t=ay(e),i=dy(this),n=arguments.length,l=n>1?arguments[1]:void 0,o=void 0!==l;o&&(l=oy(l,n>2?arguments[2]:void 0));var c,a,r,s,d,u,h=Zy(t),b=0;if(!h||this===my&&sy(h))for(c=uy(t),a=i?new this(c):my(c);c>b;b++)u=o?l(t[b],b):t[b],hy(a,b,u);else for(d=(s=by(t,h)).next,a=i?new this:[];!(r=cy(d,s)).done;b++)u=o?ry(s,l,[r.value,b],!0):r.value,hy(a,b,u);return a.length=b,a},cX=Wu,aX=ka.codeAt,rX=function(e){var t,i,n=[],l=Ky(Yy(Ny(e),Xy,"."),".");for(t=0;t<l.length;t++)i=l[t],Sy(n,Iy(Gy,i)?"xn--"+Cy(i):i);return vy(n,".")},sX=ma,dX=oa,uX=ip,hX={URLSearchParams:PG,getState:sG},bX=Fi,ZX=bX.set,mX=bX.getterFor("URL"),pX=hX.URLSearchParams,yX=hX.getState,GX=_G.URL,XX=_G.TypeError,WX=_G.parseInt,VX=Math.floor,IX=Math.pow,RX=$G("".charAt),gX=$G(/./.exec),fX=$G([].join),vX=$G(1..toString),SX=$G([].pop),YX=$G([].push),KX=$G("".replace),NX=$G([].shift),JX=$G("".split),kX=$G("".slice),CX=$G("".toLowerCase),UX=$G([].unshift),LX="Invalid scheme",HX="Invalid host",TX="Invalid port",wX=/[a-z]/i,FX=/[\d+-.a-z]/i,xX=/\d/,PX=/^0x/i,zX=/^[0-7]+$/,BX=/^\d+$/,jX=/^[\da-f]+$/i,MX=/[\0\t\n\r #%/:<>?@[\\\]^|]/,QX=/[\0\t\n\r #/:<>?@[\\\]^|]/,EX=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,DX=/[\t\n\r]/g,OX=function(e){var t,i,n,l;if("number"==typeof e){for(t=[],i=0;i<4;i++)UX(t,e%256),e=VX(e/256);return fX(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,i=1,n=null,l=0,o=0;o<8;o++)0!==e[o]?(l>i&&(t=n,i=l),n=null,l=0):(null===n&&(n=o),++l);return l>i&&(t=n,i=l),t}(e),i=0;i<8;i++)l&&0===e[i]||(l&&(l=!1),n===i?(t+=i?":":"::",l=!0):(t+=vX(e[i],16),i<7&&(t+=":")));return"["+t+"]"}return e},AX={},_X=lX({},AX,{" ":1,'"':1,"<":1,">":1,"`":1}),qX=lX({},_X,{"#":1,"?":1,"{":1,"}":1}),$X=lX({},qX,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),eW=function(e,t){var i=aX(e,0);return i>32&&i<127&&!nX(t,e)?e:encodeURIComponent(e)},tW={ftp:21,file:null,http:80,https:443,ws:80,wss:443},iW=function(e,t){var i;return 2==e.length&&gX(wX,RX(e,0))&&(":"==(i=RX(e,1))||!t&&"|"==i)},nW=function(e){var t;return e.length>1&&iW(kX(e,0,2))&&(2==e.length||"/"===(t=RX(e,2))||"\\"===t||"?"===t||"#"===t)},lW=function(e){return"."===e||"%2e"===CX(e)},oW={},cW={},aW={},rW={},sW={},dW={},uW={},hW={},bW={},ZW={},mW={},pW={},yW={},GW={},XW={},WW={},VW={},IW={},RW={},gW={},fW={},vW=function(e,t,i){var n,l,o,c=sX(e);if(t){if(l=this.parse(c))throw XX(l);this.searchParams=null}else{if(void 0!==i&&(n=new vW(i,!0)),l=this.parse(c,null,n))throw XX(l);(o=yX(new pX)).bindURL(this),this.searchParams=o}};vW.prototype={type:"URL",parse:function(e,t,i){var n,l,o,c,a,r=this,s=t||oW,d=0,u="",h=!1,b=!1,Z=!1;for(e=sX(e),t||(r.scheme="",r.username="",r.password="",r.host=null,r.port=null,r.path=[],r.query=null,r.fragment=null,r.cannotBeABaseURL=!1,e=KX(e,EX,"")),e=KX(e,DX,""),n=oX(e);d<=n.length;){switch(l=n[d],s){case oW:if(!l||!gX(wX,l)){if(t)return LX;s=aW;continue}u+=CX(l),s=cW;break;case cW:if(l&&(gX(FX,l)||"+"==l||"-"==l||"."==l))u+=CX(l);else{if(":"!=l){if(t)return LX;u="",s=aW,d=0;continue}if(t&&(r.isSpecial()!=nX(tW,u)||"file"==u&&(r.includesCredentials()||null!==r.port)||"file"==r.scheme&&!r.host))return;if(r.scheme=u,t)return void(r.isSpecial()&&tW[r.scheme]==r.port&&(r.port=null));u="","file"==r.scheme?s=GW:r.isSpecial()&&i&&i.scheme==r.scheme?s=rW:r.isSpecial()?s=hW:"/"==n[d+1]?(s=sW,d++):(r.cannotBeABaseURL=!0,YX(r.path,""),s=RW)}break;case aW:if(!i||i.cannotBeABaseURL&&"#"!=l)return LX;if(i.cannotBeABaseURL&&"#"==l){r.scheme=i.scheme,r.path=cX(i.path),r.query=i.query,r.fragment="",r.cannotBeABaseURL=!0,s=fW;break}s="file"==i.scheme?GW:dW;continue;case rW:if("/"!=l||"/"!=n[d+1]){s=dW;continue}s=bW,d++;break;case sW:if("/"==l){s=ZW;break}s=IW;continue;case dW:if(r.scheme=i.scheme,l==EG)r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cX(i.path),r.query=i.query;else if("/"==l||"\\"==l&&r.isSpecial())s=uW;else if("?"==l)r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cX(i.path),r.query="",s=gW;else{if("#"!=l){r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cX(i.path),r.path.length--,s=IW;continue}r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cX(i.path),r.query=i.query,r.fragment="",s=fW}break;case uW:if(!r.isSpecial()||"/"!=l&&"\\"!=l){if("/"!=l){r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,s=IW;continue}s=ZW}else s=bW;break;case hW:if(s=bW,"/"!=l||"/"!=RX(u,d+1))continue;d++;break;case bW:if("/"!=l&&"\\"!=l){s=ZW;continue}break;case ZW:if("@"==l){h&&(u="%40"+u),h=!0,o=oX(u);for(var m=0;m<o.length;m++){var p=o[m];if(":"!=p||Z){var y=eW(p,$X);Z?r.password+=y:r.username+=y}else Z=!0}u=""}else if(l==EG||"/"==l||"?"==l||"#"==l||"\\"==l&&r.isSpecial()){if(h&&""==u)return"Invalid authority";d-=oX(u).length+1,u="",s=mW}else u+=l;break;case mW:case pW:if(t&&"file"==r.scheme){s=WW;continue}if(":"!=l||b){if(l==EG||"/"==l||"?"==l||"#"==l||"\\"==l&&r.isSpecial()){if(r.isSpecial()&&""==u)return HX;if(t&&""==u&&(r.includesCredentials()||null!==r.port))return;if(c=r.parseHost(u))return c;if(u="",s=VW,t)return;continue}"["==l?b=!0:"]"==l&&(b=!1),u+=l}else{if(""==u)return HX;if(c=r.parseHost(u))return c;if(u="",s=yW,t==pW)return}break;case yW:if(!gX(xX,l)){if(l==EG||"/"==l||"?"==l||"#"==l||"\\"==l&&r.isSpecial()||t){if(""!=u){var G=WX(u,10);if(G>65535)return TX;r.port=r.isSpecial()&&G===tW[r.scheme]?null:G,u=""}if(t)return;s=VW;continue}return TX}u+=l;break;case GW:if(r.scheme="file","/"==l||"\\"==l)s=XW;else{if(!i||"file"!=i.scheme){s=IW;continue}if(l==EG)r.host=i.host,r.path=cX(i.path),r.query=i.query;else if("?"==l)r.host=i.host,r.path=cX(i.path),r.query="",s=gW;else{if("#"!=l){nW(fX(cX(n,d),""))||(r.host=i.host,r.path=cX(i.path),r.shortenPath()),s=IW;continue}r.host=i.host,r.path=cX(i.path),r.query=i.query,r.fragment="",s=fW}}break;case XW:if("/"==l||"\\"==l){s=WW;break}i&&"file"==i.scheme&&!nW(fX(cX(n,d),""))&&(iW(i.path[0],!0)?YX(r.path,i.path[0]):r.host=i.host),s=IW;continue;case WW:if(l==EG||"/"==l||"\\"==l||"?"==l||"#"==l){if(!t&&iW(u))s=IW;else if(""==u){if(r.host="",t)return;s=VW}else{if(c=r.parseHost(u))return c;if("localhost"==r.host&&(r.host=""),t)return;u="",s=VW}continue}u+=l;break;case VW:if(r.isSpecial()){if(s=IW,"/"!=l&&"\\"!=l)continue}else if(t||"?"!=l)if(t||"#"!=l){if(l!=EG&&(s=IW,"/"!=l))continue}else r.fragment="",s=fW;else r.query="",s=gW;break;case IW:if(l==EG||"/"==l||"\\"==l&&r.isSpecial()||!t&&("?"==l||"#"==l)){if(".."===(a=CX(a=u))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(r.shortenPath(),"/"==l||"\\"==l&&r.isSpecial()||YX(r.path,"")):lW(u)?"/"==l||"\\"==l&&r.isSpecial()||YX(r.path,""):("file"==r.scheme&&!r.path.length&&iW(u)&&(r.host&&(r.host=""),u=RX(u,0)+":"),YX(r.path,u)),u="","file"==r.scheme&&(l==EG||"?"==l||"#"==l))for(;r.path.length>1&&""===r.path[0];)NX(r.path);"?"==l?(r.query="",s=gW):"#"==l&&(r.fragment="",s=fW)}else u+=eW(l,qX);break;case RW:"?"==l?(r.query="",s=gW):"#"==l?(r.fragment="",s=fW):l!=EG&&(r.path[0]+=eW(l,AX));break;case gW:t||"#"!=l?l!=EG&&("'"==l&&r.isSpecial()?r.query+="%27":r.query+="#"==l?"%23":eW(l,AX)):(r.fragment="",s=fW);break;case fW:l!=EG&&(r.fragment+=eW(l,_X))}d++}},parseHost:function(e){var t,i,n;if("["==RX(e,0)){if("]"!=RX(e,e.length-1))return HX;if(t=function(e){var t,i,n,l,o,c,a,r=[0,0,0,0,0,0,0,0],s=0,d=null,u=0,h=function(){return RX(e,u)};if(":"==h()){if(":"!=RX(e,1))return;u+=2,d=++s}for(;h();){if(8==s)return;if(":"!=h()){for(t=i=0;i<4&&gX(jX,h());)t=16*t+WX(h(),16),u++,i++;if("."==h()){if(0==i)return;if(u-=i,s>6)return;for(n=0;h();){if(l=null,n>0){if(!("."==h()&&n<4))return;u++}if(!gX(xX,h()))return;for(;gX(xX,h());){if(o=WX(h(),10),null===l)l=o;else{if(0==l)return;l=10*l+o}if(l>255)return;u++}r[s]=256*r[s]+l,2!=++n&&4!=n||s++}if(4!=n)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;r[s++]=t}else{if(null!==d)return;u++,d=++s}}if(null!==d)for(c=s-d,s=7;0!=s&&c>0;)a=r[s],r[s--]=r[d+c-1],r[d+--c]=a;else if(8!=s)return;return r}(kX(e,1,-1)),!t)return HX;this.host=t}else if(this.isSpecial()){if(e=rX(e),gX(MX,e))return HX;if(t=function(e){var t,i,n,l,o,c,a,r=JX(e,".");if(r.length&&""==r[r.length-1]&&r.length--,(t=r.length)>4)return e;for(i=[],n=0;n<t;n++){if(""==(l=r[n]))return e;if(o=10,l.length>1&&"0"==RX(l,0)&&(o=gX(PX,l)?16:8,l=kX(l,8==o?1:2)),""===l)c=0;else{if(!gX(10==o?BX:8==o?zX:jX,l))return e;c=WX(l,o)}YX(i,c)}for(n=0;n<t;n++)if(c=i[n],n==t-1){if(c>=IX(256,5-t))return null}else if(c>255)return null;for(a=SX(i),n=0;n<i.length;n++)a+=i[n]*IX(256,3-n);return a}(e),null===t)return HX;this.host=t}else{if(gX(QX,e))return HX;for(t="",i=oX(e),n=0;n<i.length;n++)t+=eW(i[n],AX);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return nX(tW,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&iW(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,n=e.password,l=e.host,o=e.port,c=e.path,a=e.query,r=e.fragment,s=t+":";return null!==l?(s+="//",e.includesCredentials()&&(s+=i+(n?":"+n:"")+"@"),s+=OX(l),null!==o&&(s+=":"+o)):"file"==t&&(s+="//"),s+=e.cannotBeABaseURL?c[0]:c.length?"/"+fX(c,"/"):"",null!==a&&(s+="?"+a),null!==r&&(s+="#"+r),s},setHref:function(e){var t=this.parse(e);if(t)throw XX(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new SW(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+OX(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(sX(e)+":",oW)},getUsername:function(){return this.username},setUsername:function(e){var t=oX(sX(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<t.length;i++)this.username+=eW(t[i],$X)}},getPassword:function(){return this.password},setPassword:function(e){var t=oX(sX(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<t.length;i++)this.password+=eW(t[i],$X)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?OX(e):OX(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,mW)},getHostname:function(){var e=this.host;return null===e?"":OX(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,pW)},getPort:function(){var e=this.port;return null===e?"":sX(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=sX(e))?this.port=null:this.parse(e,yW))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+fX(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,VW))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=sX(e))?this.query=null:("?"==RX(e,0)&&(e=kX(e,1)),this.query="",this.parse(e,gW)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=sX(e))?("#"==RX(e,0)&&(e=kX(e,1)),this.fragment="",this.parse(e,fW)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var SW=function(e){var t=iX(this,YW),i=uX(arguments.length,1)>1?arguments[1]:void 0,n=ZX(t,new vW(e,!1,i));OG||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},YW=SW.prototype,KW=function(e,t){return{get:function(){return mX(this)[e]()},set:t&&function(e){return mX(this)[t](e)},configurable:!0,enumerable:!0}};if(OG&&(tX(YW,"href",KW("serialize","setHref")),tX(YW,"origin",KW("getOrigin")),tX(YW,"protocol",KW("getProtocol","setProtocol")),tX(YW,"username",KW("getUsername","setUsername")),tX(YW,"password",KW("getPassword","setPassword")),tX(YW,"host",KW("getHost","setHost")),tX(YW,"hostname",KW("getHostname","setHostname")),tX(YW,"port",KW("getPort","setPort")),tX(YW,"pathname",KW("getPathname","setPathname")),tX(YW,"search",KW("getSearch","setSearch")),tX(YW,"searchParams",KW("getSearchParams")),tX(YW,"hash",KW("getHash","setHash"))),eX(YW,"toJSON",(function(){return mX(this).serialize()}),{enumerable:!0}),eX(YW,"toString",(function(){return mX(this).serialize()}),{enumerable:!0}),GX){var NW=GX.createObjectURL,JW=GX.revokeObjectURL;NW&&eX(SW,"createObjectURL",qG(NW,GX)),JW&&eX(SW,"revokeObjectURL",qG(JW,GX))}dX(SW,"URL"),DG({global:!0,constructor:!0,forced:!AG,sham:!OG},{URL:SW});var kW=Je;function CW(e,t,i,n){return new(i||(i=Promise))((function(l,o){function c(e){try{r(n.next(e))}catch(e){o(e)}}function a(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}r((n=n.apply(e,t||[])).next())}))}function UW(e,t,i,n){return new(i||(i=Promise))((function(l,o){function c(e){try{r(n.next(e))}catch(e){o(e)}}function a(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}r((n=n.apply(e,t||[])).next())}))}cl({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return kW(URL.prototype.toString,this)}}),e.ResponseMode=void 0,function(e){e.formPost="form_post",e.query="query",e.direct="direct"}(e.ResponseMode||(e.ResponseMode={}));e.Stores=void 0,function(e){e.ConfigData="config_data",e.OIDCProviderMetaData="oidc_provider_meta_data",e.SessionData="session_data",e.TemporaryData="temporary_data"}(e.Stores||(e.Stores={}));const LW="refresh_token_timer",HW=["RS256","RS512","RS384","PS256"],TW="code",wW="session_state",FW="sign_out_url",xW="sign_out_success",PW="state";var zW;!function(e){e.Include="include",e.SameOrigin="same-origin",e.Omit="omit"}(zW||(zW={}));class BW{constructor(e,t,i){this.message=i,this.name=t,this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}class jW{constructor(){}static filterClaimsFromIDTokenPayload(e){const t=Object.assign({},e);null==t||delete t.iss,null==t||delete t.aud,null==t||delete t.exp,null==t||delete t.iat,null==t||delete t.acr,null==t||delete t.amr,null==t||delete t.azp,null==t||delete t.auth_time,null==t||delete t.nonce,null==t||delete t.c_hash,null==t||delete t.at_hash,null==t||delete t.nbf,null==t||delete t.isk,null==t||delete t.sid;const i={};return Object.entries(t).forEach((e=>{let[t,n]=e;const l=t.split("_").map(((e,t)=>0===t?e:[e[0].toUpperCase(),...e.slice(1)].join(""))).join("");i[l]=n})),i}static getTokenRequestHeaders(){return{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}static generateStateParamForRequestCorrelation(e,t){const i=parseInt(e.split("#")[1]);return t?"".concat(t,"_request_").concat(i):"request_".concat(i)}static extractPKCEKeyFromStateParam(e){return"pkce_code_verifier#".concat(parseInt(e.split("request_")[1]))}}jW.getTenantDomainFromIdTokenPayload=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@";const i=e.sub.split(t);return i.length>2?i[i.length-1]:""};class MW{constructor(e,t){this._dataLayer=e,this._config=()=>UW(this,void 0,void 0,(function*(){return yield this._dataLayer.getConfigData()})),this._oidcProviderMetaData=()=>UW(this,void 0,void 0,(function*(){return yield this._dataLayer.getOIDCProviderMetaData()})),this._cryptoHelper=t}resolveEndpoints(e){return UW(this,void 0,void 0,(function*(){const t={},i=yield this._config();return i.endpoints&&Object.keys(i.endpoints).forEach((e=>{const n=e.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));t[n]=(null==i?void 0:i.endpoints)?i.endpoints[e]:""})),Object.assign(Object.assign({},e),t)}))}resolveEndpointsExplicitly(){return UW(this,void 0,void 0,(function*(){const e={},t=yield this._config();if(!t.endpoints||!["authorization_endpoint","end_session_endpoint","jwks_uri","check_session_iframe","revocation_endpoint","token_endpoint","issuer","userinfo_endpoint"].every((e=>!!t.endpoints&&Object.keys(t.endpoints).some((t=>t.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())))===e)))))throw new BW("JS-AUTH_HELPER-REE-NF01","Required endpoints missing","Some or all of the required endpoints are missing in the object passed to the `endpoints` attribute of the`AuthConfig` object.");return t.endpoints&&Object.keys(t.endpoints).forEach((i=>{const n=i.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));e[n]=(null==t?void 0:t.endpoints)?t.endpoints[i]:""})),Object.assign({},e)}))}resolveEndpointsByBaseURL(){return UW(this,void 0,void 0,(function*(){const e={},t=yield this._config(),i=t.baseUrl;if(!i)throw new BW("JS-AUTH_HELPER_REBO-NF01","Base URL not defined.","Base URL is not defined in AuthClient config.");t.endpoints&&Object.keys(t.endpoints).forEach((i=>{const n=i.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));e[n]=(null==t?void 0:t.endpoints)?t.endpoints[i]:""}));const n={authorization_endpoint:"".concat(i).concat("/oauth2/authorize"),end_session_endpoint:"".concat(i).concat("/oidc/logout"),issuer:"".concat(i).concat("/oauth2/token"),jwks_uri:"".concat(i).concat("/oauth2/jwks"),check_session_iframe:"".concat(i).concat("/oidc/checksession"),revocation_endpoint:"".concat(i).concat("/oauth2/revoke"),token_endpoint:"".concat(i).concat("/oauth2/token"),userinfo_endpoint:"".concat(i).concat("/oauth2/userinfo")};return Object.assign(Object.assign({},n),e)}))}validateIdToken(e){var t;return UW(this,void 0,void 0,(function*(){const i=(yield this._dataLayer.getOIDCProviderMetaData()).jwks_uri,n=yield this._config();if(!i||0===i.trim().length)throw new BW("JS_AUTH_HELPER-VIT-NF01","JWKS endpoint not found.","No JWKS endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the JWKS endpoint passed to the SDK is empty.");let l;try{l=yield fetch(i,{credentials:n.sendCookiesInRequests?zW.Include:zW.SameOrigin})}catch(i){throw new BW("JS-AUTH_HELPER-VIT-NE02","Request to jwks endpoint failed.",null!=i?i:"The request sent to get the jwks from the server failed.")}if(200!==l.status||!l.ok)throw new BW("JS-AUTH_HELPER-VIT-HE03","Invalid response status received for jwks request (".concat(l.statusText,")."),yield l.json());const o=(yield this._oidcProviderMetaData()).issuer,{keys:c}=yield l.json(),a=yield this._cryptoHelper.getJWKForTheIdToken(e.split(".")[0],c);return this._cryptoHelper.isValidIdToken(e,a,(yield this._config()).clientID,null!=o?o:"",this._cryptoHelper.decodeIDToken(e).sub,(yield this._config()).clockTolerance,null===(t=(yield this._config()).validateIDTokenIssuer)||void 0===t||t)}))}getAuthenticatedUserInfo(e){var t,i,n,l;const o=this._cryptoHelper.decodeIDToken(e),c=jW.getTenantDomainFromIdTokenPayload(o),a=null!==(t=null==o?void 0:o.username)&&void 0!==t?t:"",r=null!==(i=o.given_name)&&void 0!==i?i:"",s=null!==(n=o.family_name)&&void 0!==n?n:"",d=r&&s?"".concat(r," ").concat(s):r||s||"",u=null!==(l=o.preferred_username)&&void 0!==l?l:d;return Object.assign({displayName:u,tenantDomain:c,username:a},jW.filterClaimsFromIDTokenPayload(o))}replaceCustomGrantTemplateTags(e,t){var i;return UW(this,void 0,void 0,(function*(){let n="openid";const l=yield this._config(),o=yield this._dataLayer.getSessionData(t);return l.scope&&l.scope.length>0&&(l.scope.includes("openid")||l.scope.push("openid"),n=l.scope.join(" ")),e.replace("{{token}}",o.access_token).replace("{{username}}",this.getAuthenticatedUserInfo(o.id_token).username).replace("{{scope}}",n).replace("{{clientID}}",l.clientID).replace("{{clientSecret}}",null!==(i=l.clientSecret)&&void 0!==i?i:"")}))}clearUserSessionData(e){return UW(this,void 0,void 0,(function*(){yield this._dataLayer.removeTemporaryData(e),yield this._dataLayer.removeSessionData(e)}))}handleTokenResponse(e,t){return UW(this,void 0,void 0,(function*(){if(200!==e.status||!e.ok)throw new BW("JS-AUTH_HELPER-HTR-NE01","Invalid response status received for token request (".concat(e.statusText,")."),yield e.json());const i=yield e.json();if(i.created_at=(new Date).getTime(),(yield this._config()).validateIDToken)return this.validateIdToken(i.id_token).then((()=>UW(this,void 0,void 0,(function*(){yield this._dataLayer.setSessionData(i,t);const e={accessToken:i.access_token,createdAt:i.created_at,expiresIn:i.expires_in,idToken:i.id_token,refreshToken:i.refresh_token,scope:i.scope,tokenType:i.token_type};return Promise.resolve(e)}))));{const e={accessToken:i.access_token,createdAt:i.created_at,expiresIn:i.expires_in,idToken:i.id_token,refreshToken:i.refresh_token,scope:i.scope,tokenType:i.token_type};return yield this._dataLayer.setSessionData(i,t),Promise.resolve(e)}}))}generatePKCEKey(e){var t;return UW(this,void 0,void 0,(function*(){const i=yield this._dataLayer.getTemporaryData(e),n=[];Object.keys(i).forEach((e=>{e.startsWith("pkce_code_verifier")&&n.push(e)}));const l=n.sort().pop();return"pkce_code_verifier#".concat(parseInt(null!==(t=null==l?void 0:l.split("#")[1])&&void 0!==t?t:"-1")+1)}))}}class QW{constructor(e){this._cryptoUtils=e}getCodeVerifier(){return this._cryptoUtils.base64URLEncode(this._cryptoUtils.generateRandomBytes(32))}getCodeChallenge(e){return this._cryptoUtils.base64URLEncode(this._cryptoUtils.hashSha256(e))}getJWKForTheIdToken(e,t){const i=JSON.parse(this._cryptoUtils.base64URLDecode(e));for(const e of t)if(i.kid===e.kid)return e;throw new BW("JS-CRYPTO_UTIL-GJFTIT-IV01","kid not found.","Failed to find the 'kid' specified in the id_token. 'kid' found in the header : "+i.kid+", Expected values: "+t.map((e=>e.kid)).join(", "))}isValidIdToken(e,t,i,n,l,o,c){return this._cryptoUtils.verifyJwt(e,t,HW,i,n,l,o,c).then((e=>e?Promise.resolve(!0):Promise.reject(new BW("JS-CRYPTO_HELPER-IVIT-IV01","Invalid ID token.","ID token validation returned false"))))}decodeIDToken(e){try{const t=this._cryptoUtils.base64URLDecode(e.split(".")[1]);return JSON.parse(t)}catch(e){throw new BW("JS-CRYPTO_UTIL-DIT-IV01","Decoding ID token failed.",e)}}}class EW{constructor(e,t){this._cryptoUtils=t,this._cryptoHelper=new QW(t),this._authenticationHelper=new MW(e,this._cryptoHelper),this._dataLayer=e,this._config=()=>UW(this,void 0,void 0,(function*(){return yield this._dataLayer.getConfigData()})),this._oidcProviderMetaData=()=>UW(this,void 0,void 0,(function*(){return yield this._dataLayer.getOIDCProviderMetaData()}))}getAuthorizationURLParams(e,t){var i,n,l;return UW(this,void 0,void 0,(function*(){const o=yield this._config(),c=new Map;c.set("response_type","code"),c.set("client_id",o.clientID);let a="openid";o.scope&&o.scope.length>0&&(o.scope.includes("openid")||o.scope.push("openid"),a=o.scope.join(" ")),c.set("scope",a),c.set("redirect_uri",o.signInRedirectURL),o.responseMode&&c.set("response_mode",o.responseMode);const r=yield this._authenticationHelper.generatePKCEKey(t);if(o.enablePKCE){const e=null===(i=this._cryptoHelper)||void 0===i?void 0:i.getCodeVerifier(),l=null===(n=this._cryptoHelper)||void 0===n?void 0:n.getCodeChallenge(e);yield this._dataLayer.setTemporaryDataParameter(r,e,t),c.set("code_challenge_method","S256"),c.set("code_challenge",l)}o.prompt&&c.set("prompt",o.prompt);const s=e;if(s)for(const[e,t]of Object.entries(s))""!=e&&""!=t&&"state"!==e&&c.set(e,t.toString());return c.set("state",jW.generateStateParamForRequestCorrelation(r,s?null===(l=s.state)||void 0===l?void 0:l.toString():"")),c}))}getAuthorizationURL(e,t){return UW(this,void 0,void 0,(function*(){const i=yield this._dataLayer.getOIDCProviderMetaDataParameter("authorization_endpoint");if(!i||0===i.trim().length)throw new BW("JS-AUTH_CORE-GAU-NF01","No authorization endpoint found.","No authorization endpoint was found in the OIDC provider meta data from the well-known endpoint or the authorization endpoint passed to the SDK is empty.");const n=new URL(i),l=yield this.getAuthorizationURLParams(e,t);for(const[e,t]of l.entries())n.searchParams.append(e,t);return n.toString()}))}requestAccessToken(e,t,i,n,l){return UW(this,void 0,void 0,(function*(){const o=(yield this._oidcProviderMetaData()).token_endpoint,c=yield this._config();if(!o||0===o.trim().length)throw new BW("JS-AUTH_CORE-RAT1-NF01","Token endpoint not found.","No token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the token endpoint passed to the SDK is empty.");t&&(yield this._dataLayer.setSessionDataParameter("session_state",t,n));const a=new URLSearchParams;a.set("client_id",c.clientID),c.clientSecret&&c.clientSecret.trim().length>0&&a.set("client_secret",c.clientSecret);const r=e;let s;a.set("code",r),a.set("grant_type","authorization_code"),a.set("redirect_uri",c.signInRedirectURL),(null==l?void 0:l.params)&&Object.entries(l.params).forEach((e=>{let[t,i]=e;a.append(t,i)})),c.enablePKCE&&(a.set("code_verifier","".concat(yield this._dataLayer.getTemporaryDataParameter(jW.extractPKCEKeyFromStateParam(i),n))),yield this._dataLayer.removeTemporaryDataParameter(jW.extractPKCEKeyFromStateParam(i),n));try{s=yield fetch(o,{body:a,credentials:c.sendCookiesInRequests?zW.Include:zW.SameOrigin,headers:new Headers(jW.getTokenRequestHeaders()),method:"POST"})}catch(o){throw new BW("JS-AUTH_CORE-RAT1-NE02","Requesting access token failed",null!=o?o:"The request to get the access token from the server failed.")}if(!s.ok)throw new BW("JS-AUTH_CORE-RAT1-HE03","Requesting access token failed with ".concat(s.statusText),yield s.json());return yield this._authenticationHelper.handleTokenResponse(s,n)}))}refreshAccessToken(e){return UW(this,void 0,void 0,(function*(){const t=(yield this._oidcProviderMetaData()).token_endpoint,i=yield this._config(),n=yield this._dataLayer.getSessionData(e);if(!n.refresh_token)throw new BW("JS-AUTH_CORE-RAT2-NF01","No refresh token found.","There was no refresh token found. Asgardeo doesn't return a refresh token if the refresh token grant is not enabled.");if(!t||0===t.trim().length)throw new BW("JS-AUTH_CORE-RAT2-NF02","No refresh token endpoint found.","No refresh token endpoint was in the OIDC provider meta data returned by the well-known endpoint or the refresh token endpoint passed to the SDK is empty.");const l=[];let o;l.push("client_id=".concat(i.clientID)),l.push("refresh_token=".concat(n.refresh_token)),l.push("grant_type=refresh_token"),i.clientSecret&&i.clientSecret.trim().length>0&&l.push("client_secret=".concat(i.clientSecret));try{o=yield fetch(t,{body:l.join("&"),credentials:i.sendCookiesInRequests?zW.Include:zW.SameOrigin,headers:new Headers(jW.getTokenRequestHeaders()),method:"POST"})}catch(t){throw new BW("JS-AUTH_CORE-RAT2-NR03","Refresh access token request failed.",null!=t?t:"The request to refresh the access token failed.")}if(!o.ok)throw new BW("JS-AUTH_CORE-RAT2-HE04","Refreshing access token failed with ".concat(o.statusText),yield o.json());return this._authenticationHelper.handleTokenResponse(o,e)}))}revokeAccessToken(e){return UW(this,void 0,void 0,(function*(){const t=(yield this._oidcProviderMetaData()).revocation_endpoint,i=yield this._config();if(!t||0===t.trim().length)throw new BW("JS-AUTH_CORE-RAT3-NF01","No revoke access token endpoint found.","No revoke access token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the revoke access token endpoint passed to the SDK is empty.");const n=[];let l;n.push("client_id=".concat(i.clientID)),n.push("token=".concat((yield this._dataLayer.getSessionData(e)).access_token)),n.push("token_type_hint=access_token");try{l=yield fetch(t,{body:n.join("&"),credentials:i.sendCookiesInRequests?zW.Include:zW.SameOrigin,headers:new Headers(jW.getTokenRequestHeaders()),method:"POST"})}catch(t){throw new BW("JS-AUTH_CORE-RAT3-NE02","The request to revoke access token failed.",null!=t?t:"The request sent to revoke the access token failed.")}if(200!==l.status||!l.ok)throw new BW("JS-AUTH_CORE-RAT3-HE03","Invalid response status received for revoke access token request (".concat(l.statusText,")."),yield l.json());return this._authenticationHelper.clearUserSessionData(e),Promise.resolve(l)}))}requestCustomGrant(e,t){return UW(this,void 0,void 0,(function*(){const i=yield this._oidcProviderMetaData(),n=yield this._config();let l;if(l=e.tokenEndpoint&&0!==e.tokenEndpoint.trim().length?e.tokenEndpoint:i.token_endpoint,!l||0===l.trim().length)throw new BW("JS-AUTH_CORE-RCG-NF01","Token endpoint not found.","No token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the token endpoint passed to the SDK is empty.");const o=yield Promise.all(Object.entries(e.data).map((e=>{let[i,n]=e;return UW(this,void 0,void 0,(function*(){const e=yield this._authenticationHelper.replaceCustomGrantTemplateTags(n,t);return"".concat(i,"=").concat(e)}))})));let c=Object.assign({},jW.getTokenRequestHeaders());e.attachToken&&(c=Object.assign(Object.assign({},c),{Authorization:"Bearer ".concat((yield this._dataLayer.getSessionData(t)).access_token)}));const a={body:o.join("&"),credentials:n.sendCookiesInRequests?zW.Include:zW.SameOrigin,headers:new Headers(c),method:"POST"};let r;try{r=yield fetch(l,a)}catch(e){throw new BW("JS-AUTH_CORE-RCG-NE02","The custom grant request failed.",null!=e?e:"The request sent to get the custom grant failed.")}if(200!==r.status||!r.ok)throw new BW("JS-AUTH_CORE-RCG-HE03","Invalid response status received for the custom grant request. (".concat(r.statusText,")"),yield r.json());return e.returnsSession?this._authenticationHelper.handleTokenResponse(r,t):Promise.resolve(yield r.json())}))}getBasicUserInfo(e){return UW(this,void 0,void 0,(function*(){const t=yield this._dataLayer.getSessionData(e),i=this._authenticationHelper.getAuthenticatedUserInfo(null==t?void 0:t.id_token);let n={allowedScopes:t.scope,sessionState:t.session_state};return Object.keys(i).forEach((e=>{void 0!==i[e]&&""!==i[e]&&null!==i[e]||delete i[e]})),n=Object.assign(Object.assign({},n),i),n}))}getDecodedIDToken(e){return UW(this,void 0,void 0,(function*(){const t=(yield this._dataLayer.getSessionData(e)).id_token;return this._cryptoHelper.decodeIDToken(t)}))}getCryptoHelper(){return UW(this,void 0,void 0,(function*(){return this._cryptoHelper}))}getIDToken(e){return UW(this,void 0,void 0,(function*(){return(yield this._dataLayer.getSessionData(e)).id_token}))}getOIDCProviderMetaData(e){return UW(this,void 0,void 0,(function*(){const t=yield this._config();if(!e&&(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated")))return Promise.resolve();const i=t.wellKnownEndpoint;if(i){let e;try{if(e=yield fetch(i),200!==e.status||!e.ok)throw new Error}catch(t){throw new BW("JS-AUTH_CORE-GOPMD-HE01","Invalid well-known response","The well known endpoint response has been failed with an error.")}return yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpoints(yield e.json())),yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}if(t.baseUrl){try{yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpointsByBaseURL())}catch(t){throw new BW("JS-AUTH_CORE-GOPMD-IV02","Resolving endpoints failed.",null!=t?t:"Resolving endpoints by base url failed.")}return yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}return yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpointsExplicitly()),yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}))}getOIDCServiceEndpoints(){var e,t,i,n,l,o,c,a,r,s;return UW(this,void 0,void 0,(function*(){const d=yield this._oidcProviderMetaData();return{authorizationEndpoint:null!==(e=d.authorization_endpoint)&&void 0!==e?e:"",checkSessionIframe:null!==(t=d.check_session_iframe)&&void 0!==t?t:"",endSessionEndpoint:null!==(i=d.end_session_endpoint)&&void 0!==i?i:"",introspectionEndpoint:null!==(n=d.introspection_endpoint)&&void 0!==n?n:"",issuer:null!==(l=d.issuer)&&void 0!==l?l:"",jwksUri:null!==(o=d.jwks_uri)&&void 0!==o?o:"",registrationEndpoint:null!==(c=d.registration_endpoint)&&void 0!==c?c:"",revocationEndpoint:null!==(a=d.revocation_endpoint)&&void 0!==a?a:"",tokenEndpoint:null!==(r=d.token_endpoint)&&void 0!==r?r:"",userinfoEndpoint:null!==(s=d.userinfo_endpoint)&&void 0!==s?s:""}}))}getSignOutURL(e){var t,i,n;return UW(this,void 0,void 0,(function*(){const l=null===(t=yield this._oidcProviderMetaData())||void 0===t?void 0:t.end_session_endpoint,o=yield this._config();if(!l||0===l.trim().length)throw new BW("JS-AUTH_CORE-GSOU-NF01","Sign-out endpoint not found.","No sign-out endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the sign-out endpoint passed to the SDK is empty.");const c=null!==(i=null==o?void 0:o.signOutRedirectURL)&&void 0!==i?i:null==o?void 0:o.signInRedirectURL;if(!c||0===c.trim().length)throw new BW("JS-AUTH_CORE-GSOU-NF03","No sign-out redirect URL found.","The sign-out redirect URL cannot be found or the URL passed to the SDK is empty. No sign-in redirect URL has been found either. ");const a=new URLSearchParams;if(a.set("post_logout_redirect_uri",c),o.sendIdTokenInLogoutRequest){const t=null===(n=yield this._dataLayer.getSessionData(e))||void 0===n?void 0:n.id_token;if(!t||0===t.trim().length)throw new BW("JS-AUTH_CORE-GSOU-NF02","ID token not found.","No ID token could be found. Either the session information is lost or you have not signed in.");a.set("id_token_hint",t)}else a.set("client_id",o.clientID);return a.set("state","sign_out_success"),"".concat(l,"?").concat(a.toString())}))}clearUserSessionData(e){return UW(this,void 0,void 0,(function*(){yield this._authenticationHelper.clearUserSessionData(e)}))}getAccessToken(e){var t;return UW(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.access_token}))}getCreatedAt(e){var t;return UW(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.created_at}))}getExpiresIn(e){var t;return UW(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.expires_in}))}isAuthenticated(e){return UW(this,void 0,void 0,(function*(){const t=Boolean(yield this.getAccessToken(e)),i=yield this.getCreatedAt(e),n=yield this.getExpiresIn(e);if(!n)return!1;const l=1e3*parseInt(n),o=(new Date).getTime();return t&&i+l>o}))}getPKCECode(e,t){return UW(this,void 0,void 0,(function*(){return yield this._dataLayer.getTemporaryDataParameter(jW.extractPKCEKeyFromStateParam(e),t)}))}setPKCECode(e,t,i){return UW(this,void 0,void 0,(function*(){return yield this._dataLayer.setTemporaryDataParameter(jW.extractPKCEKeyFromStateParam(t),e,i)}))}updateConfig(e){return UW(this,void 0,void 0,(function*(){yield this._dataLayer.setConfigData(e),yield this.getOIDCProviderMetaData(!0)}))}}class DW{constructor(e,t){this._id=e,this._store=t}setDataInBulk(e,t){var i;return UW(this,void 0,void 0,(function*(){const n=null!==(i=yield this._store.getData(e))&&void 0!==i?i:null,l=n&&JSON.parse(n),o=Object.assign(Object.assign({},l),t),c=JSON.stringify(o);yield this._store.setData(e,c)}))}setValue(e,t,i){var n;return UW(this,void 0,void 0,(function*(){const l=null!==(n=yield this._store.getData(e))&&void 0!==n?n:null,o=l&&JSON.parse(l),c=Object.assign(Object.assign({},o),{[t]:i}),a=JSON.stringify(c);yield this._store.setData(e,a)}))}removeValue(e,t){var i;return UW(this,void 0,void 0,(function*(){const n=null!==(i=yield this._store.getData(e))&&void 0!==i?i:null,l=n&&JSON.parse(n),o=Object.assign({},l);delete o[t];const c=JSON.stringify(o);yield this._store.setData(e,c)}))}_resolveKey(e,t){return t?"".concat(e,"-").concat(this._id,"-").concat(t):"".concat(e,"-").concat(this._id)}isLocalStorageAvailable(){try{const e="__ASGARDEO_AUTH_CORE_LOCAL_STORAGE_TEST__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}setConfigData(t){return UW(this,void 0,void 0,(function*(){yield this.setDataInBulk(this._resolveKey(e.Stores.ConfigData),t)}))}setOIDCProviderMetaData(t){return UW(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.OIDCProviderMetaData),t)}))}setTemporaryData(t,i){return UW(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.TemporaryData,i),t)}))}setSessionData(t,i){return UW(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.SessionData,i),t)}))}setCustomData(e,t,i){return UW(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e,i),t)}))}getConfigData(){var t;return UW(this,void 0,void 0,(function*(){return JSON.parse(null!==(t=yield this._store.getData(this._resolveKey(e.Stores.ConfigData)))&&void 0!==t?t:null)}))}getOIDCProviderMetaData(){var t;return UW(this,void 0,void 0,(function*(){return JSON.parse(null!==(t=yield this._store.getData(this._resolveKey(e.Stores.OIDCProviderMetaData)))&&void 0!==t?t:null)}))}getTemporaryData(t){var i;return UW(this,void 0,void 0,(function*(){return JSON.parse(null!==(i=yield this._store.getData(this._resolveKey(e.Stores.TemporaryData,t)))&&void 0!==i?i:null)}))}getSessionData(t){var i;return UW(this,void 0,void 0,(function*(){return JSON.parse(null!==(i=yield this._store.getData(this._resolveKey(e.Stores.SessionData,t)))&&void 0!==i?i:null)}))}getCustomData(e,t){var i;return UW(this,void 0,void 0,(function*(){return JSON.parse(null!==(i=yield this._store.getData(this._resolveKey(e,t)))&&void 0!==i?i:null)}))}setSessionStatus(e){this.isLocalStorageAvailable()&&localStorage.setItem("asgardeo-session-active",e)}getSessionStatus(){var e;return this.isLocalStorageAvailable()&&null!==(e=localStorage.getItem("asgardeo-session-active"))&&void 0!==e?e:""}removeSessionStatus(){this.isLocalStorageAvailable()&&localStorage.removeItem("asgardeo-session-active")}removeConfigData(){return UW(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.ConfigData))}))}removeOIDCProviderMetaData(){return UW(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.OIDCProviderMetaData))}))}removeTemporaryData(t){return UW(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.TemporaryData,t))}))}removeSessionData(t){return UW(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.SessionData,t))}))}getConfigDataParameter(t){return UW(this,void 0,void 0,(function*(){const i=yield this._store.getData(this._resolveKey(e.Stores.ConfigData));return i&&JSON.parse(i)[t]}))}getOIDCProviderMetaDataParameter(t){return UW(this,void 0,void 0,(function*(){const i=yield this._store.getData(this._resolveKey(e.Stores.OIDCProviderMetaData));return i&&JSON.parse(i)[t]}))}getTemporaryDataParameter(t,i){return UW(this,void 0,void 0,(function*(){const n=yield this._store.getData(this._resolveKey(e.Stores.TemporaryData,i));return n&&JSON.parse(n)[t]}))}getSessionDataParameter(t,i){return UW(this,void 0,void 0,(function*(){const n=yield this._store.getData(this._resolveKey(e.Stores.SessionData,i));return n&&JSON.parse(n)[t]}))}setConfigDataParameter(t,i){return UW(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.ConfigData),t,i)}))}setOIDCProviderMetaDataParameter(t,i){return UW(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.OIDCProviderMetaData),t,i)}))}setTemporaryDataParameter(t,i,n){return UW(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.TemporaryData,n),t,i)}))}setSessionDataParameter(t,i,n){return UW(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.SessionData,n),t,i)}))}removeConfigDataParameter(t){return UW(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.ConfigData),t)}))}removeOIDCProviderMetaDataParameter(t){return UW(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.OIDCProviderMetaData),t)}))}removeTemporaryDataParameter(t,i){return UW(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.TemporaryData,i),t)}))}removeSessionDataParameter(t,i){return UW(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.SessionData,i),t)}))}}const OW={clockTolerance:300,enablePKCE:!0,responseMode:e.ResponseMode.query,scope:["openid"],sendCookiesInRequests:!0,validateIDToken:!0,validateIDTokenIssuer:!0};class AW{constructor(){}initialize(e,t,i,n){var l,o,c;return UW(this,void 0,void 0,(function*(){const a=e.clientID;AW._instanceID?AW._instanceID+=1:AW._instanceID=0,n&&(AW._instanceID=n),this._dataLayer=new DW(a?"instance_".concat(AW._instanceID,"-").concat(a):"instance_".concat(AW._instanceID),t),this._authenticationCore=new EW(this._dataLayer,i),AW._authenticationCore=new EW(this._dataLayer,i),yield this._dataLayer.setConfigData(Object.assign(Object.assign(Object.assign({},OW),e),{scope:[...null!==(l=OW.scope)&&void 0!==l?l:[],...null!==(c=null===(o=e.scope)||void 0===o?void 0:o.filter((e=>{var t;return!(null===(t=null==OW?void 0:OW.scope)||void 0===t?void 0:t.includes(e))})))&&void 0!==c?c:[]]}))}))}getDataLayer(){return this._dataLayer}getInstanceID(){return AW._instanceID}getAuthorizationURLParams(e,t){return UW(this,void 0,void 0,(function*(){const i=Object.assign({},e);return null==i||delete i.forceInit,(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.getAuthorizationURLParams(i,t):this._authenticationCore.getOIDCProviderMetaData(null==e?void 0:e.forceInit).then((()=>this._authenticationCore.getAuthorizationURLParams(i,t)))}))}getAuthorizationURL(e,t){return UW(this,void 0,void 0,(function*(){const i=Object.assign({},e);return null==i||delete i.forceInit,(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.getAuthorizationURL(i,t):this._authenticationCore.getOIDCProviderMetaData(null==e?void 0:e.forceInit).then((()=>this._authenticationCore.getAuthorizationURL(i,t)))}))}requestAccessToken(e,t,i,n,l){return UW(this,void 0,void 0,(function*(){return(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.requestAccessToken(e,t,i,n,l):this._authenticationCore.getOIDCProviderMetaData(!1).then((()=>this._authenticationCore.requestAccessToken(e,t,i,n,l)))}))}getSignOutURL(e){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getSignOutURL(e)}))}getOIDCServiceEndpoints(){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getOIDCServiceEndpoints()}))}getDecodedIDToken(e){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getDecodedIDToken(e)}))}getIDToken(e){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getIDToken(e)}))}getBasicUserInfo(e){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getBasicUserInfo(e)}))}getCryptoHelper(){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getCryptoHelper()}))}revokeAccessToken(e){return this._authenticationCore.revokeAccessToken(e)}refreshAccessToken(e){return this._authenticationCore.refreshAccessToken(e)}getAccessToken(e){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getAccessToken(e)}))}requestCustomGrant(e,t){return this._authenticationCore.requestCustomGrant(e,t)}isAuthenticated(e){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.isAuthenticated(e)}))}getPKCECode(e,t){return UW(this,void 0,void 0,(function*(){return this._authenticationCore.getPKCECode(e,t)}))}setPKCECode(e,t,i){return UW(this,void 0,void 0,(function*(){yield this._authenticationCore.setPKCECode(e,t,i)}))}static isSignOutSuccessful(e){const t=new URL(e),i=t.searchParams.get("state"),n=Boolean(t.searchParams.get("error"));return!!i&&"sign_out_success"===i&&!n}static didSignOutFail(e){const t=new URL(e),i=t.searchParams.get("state"),n=Boolean(t.searchParams.get("error"));return!!i&&"sign_out_success"===i&&n}updateConfig(e){return UW(this,void 0,void 0,(function*(){yield this._authenticationCore.updateConfig(e)}))}static clearUserSessionData(e){return UW(this,void 0,void 0,(function*(){yield this._authenticationCore.clearUserSessionData(e)}))}}function _W(e,t,i){var n=void 0===t?null:t,l=function(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),l=0,o=i.length;l<o;++l)n[l]=i.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}(e,void 0!==i&&i),o=l.indexOf("\n",10)+1,c=l.substring(o)+(n?"//# sourceMappingURL="+n:""),a=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(a)}var qW,$W,eV,tV,iV=(qW="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbixyKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKGUpe3RyeXtjKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gYShlKXt0cnl7YyhyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBjKGUpe3ZhciB0O2UuZG9uZT9pKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbigoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihzLGEpfWMoKHI9ci5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiB0KGUsdCxuLHIpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIHMoZSl7dHJ5e2Moci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXtjKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ7ZS5kb25lP2koZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKHMsYSl9Yygocj1yLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfXZhciBuOyFmdW5jdGlvbihlKXtlLmZvcm1Qb3N0PSJmb3JtX3Bvc3QiLGUucXVlcnk9InF1ZXJ5IixlLmRpcmVjdD0iZGlyZWN0In0obnx8KG49e30pKTt2YXIgcjshZnVuY3Rpb24oZSl7ZS5Db25maWdEYXRhPSJjb25maWdfZGF0YSIsZS5PSURDUHJvdmlkZXJNZXRhRGF0YT0ib2lkY19wcm92aWRlcl9tZXRhX2RhdGEiLGUuU2Vzc2lvbkRhdGE9InNlc3Npb25fZGF0YSIsZS5UZW1wb3JhcnlEYXRhPSJ0ZW1wb3JhcnlfZGF0YSJ9KHJ8fChyPXt9KSk7Y29uc3QgaT0icmVmcmVzaF90b2tlbl90aW1lciIsbz1bIlJTMjU2IiwiUlM1MTIiLCJSUzM4NCIsIlBTMjU2Il0scz0ic2lnbl9vdXRfdXJsIjt2YXIgYTshZnVuY3Rpb24oZSl7ZS5JbmNsdWRlPSJpbmNsdWRlIixlLlNhbWVPcmlnaW49InNhbWUtb3JpZ2luIixlLk9taXQ9Im9taXQifShhfHwoYT17fSkpO2NsYXNzIGN7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMubWVzc2FnZT1uLHRoaXMubmFtZT10LHRoaXMuY29kZT1lLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG5ldy50YXJnZXQucHJvdG90eXBlKX19Y2xhc3MgdXtjb25zdHJ1Y3Rvcigpe31zdGF0aWMgZmlsdGVyQ2xhaW1zRnJvbUlEVG9rZW5QYXlsb2FkKGUpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7fSxlKTtudWxsPT10fHxkZWxldGUgdC5pc3MsbnVsbD09dHx8ZGVsZXRlIHQuYXVkLG51bGw9PXR8fGRlbGV0ZSB0LmV4cCxudWxsPT10fHxkZWxldGUgdC5pYXQsbnVsbD09dHx8ZGVsZXRlIHQuYWNyLG51bGw9PXR8fGRlbGV0ZSB0LmFtcixudWxsPT10fHxkZWxldGUgdC5henAsbnVsbD09dHx8ZGVsZXRlIHQuYXV0aF90aW1lLG51bGw9PXR8fGRlbGV0ZSB0Lm5vbmNlLG51bGw9PXR8fGRlbGV0ZSB0LmNfaGFzaCxudWxsPT10fHxkZWxldGUgdC5hdF9oYXNoLG51bGw9PXR8fGRlbGV0ZSB0Lm5iZixudWxsPT10fHxkZWxldGUgdC5pc2ssbnVsbD09dHx8ZGVsZXRlIHQuc2lkO2NvbnN0IG49e307cmV0dXJuIE9iamVjdC5lbnRyaWVzKHQpLmZvckVhY2goKGU9PntsZXRbdCxyXT1lO2NvbnN0IGk9dC5zcGxpdCgiXyIpLm1hcCgoKGUsdCk9PjA9PT10P2U6W2VbMF0udG9VcHBlckNhc2UoKSwuLi5lLnNsaWNlKDEpXS5qb2luKCIiKSkpLmpvaW4oIiIpO25baV09cn0pKSxufXN0YXRpYyBnZXRUb2tlblJlcXVlc3RIZWFkZXJzKCl7cmV0dXJue0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9fXN0YXRpYyBnZW5lcmF0ZVN0YXRlUGFyYW1Gb3JSZXF1ZXN0Q29ycmVsYXRpb24oZSx0KXtjb25zdCBuPXBhcnNlSW50KGUuc3BsaXQoIiMiKVsxXSk7cmV0dXJuIHQ/IiIuY29uY2F0KHQsIl9yZXF1ZXN0XyIpLmNvbmNhdChuKToicmVxdWVzdF8iLmNvbmNhdChuKX1zdGF0aWMgZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShlKXtyZXR1cm4icGtjZV9jb2RlX3ZlcmlmaWVyIyIuY29uY2F0KHBhcnNlSW50KGUuc3BsaXQoInJlcXVlc3RfIilbMV0pKX19dS5nZXRUZW5hbnREb21haW5Gcm9tSWRUb2tlblBheWxvYWQ9ZnVuY3Rpb24oZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiJAIjtjb25zdCBuPWUuc3ViLnNwbGl0KHQpO3JldHVybiBuLmxlbmd0aD4yP25bbi5sZW5ndGgtMV06IiJ9O2NsYXNzIGx7Y29uc3RydWN0b3IoZSxuKXt0aGlzLl9kYXRhTGF5ZXI9ZSx0aGlzLl9jb25maWc9KCk9PnQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKX0pKSx0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YT0oKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKX0pKSx0aGlzLl9jcnlwdG9IZWxwZXI9bn1yZXNvbHZlRW5kcG9pbnRzKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD17fSxuPXlpZWxkIHRoaXMuX2NvbmZpZygpO3JldHVybiBuLmVuZHBvaW50cyYmT2JqZWN0LmtleXMobi5lbmRwb2ludHMpLmZvckVhY2goKGU9Pntjb25zdCByPWUucmVwbGFjZSgvW0EtWl0vZywoZT0+Il8iLmNvbmNhdChlLnRvTG93ZXJDYXNlKCkpKSk7dFtyXT0obnVsbD09bj92b2lkIDA6bi5lbmRwb2ludHMpP24uZW5kcG9pbnRzW2VdOiIifSkpLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx0KX0pKX1yZXNvbHZlRW5kcG9pbnRzRXhwbGljaXRseSgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT17fSx0PXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCF0LmVuZHBvaW50c3x8IVsiYXV0aG9yaXphdGlvbl9lbmRwb2ludCIsImVuZF9zZXNzaW9uX2VuZHBvaW50Iiwiandrc191cmkiLCJjaGVja19zZXNzaW9uX2lmcmFtZSIsInJldm9jYXRpb25fZW5kcG9pbnQiLCJ0b2tlbl9lbmRwb2ludCIsImlzc3VlciIsInVzZXJpbmZvX2VuZHBvaW50Il0uZXZlcnkoKGU9PiEhdC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5zb21lKCh0PT50LnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpPT09ZSkpKSkpdGhyb3cgbmV3IGMoIkpTLUFVVEhfSEVMUEVSLVJFRS1ORjAxIiwiUmVxdWlyZWQgZW5kcG9pbnRzIG1pc3NpbmciLCJTb21lIG9yIGFsbCBvZiB0aGUgcmVxdWlyZWQgZW5kcG9pbnRzIGFyZSBtaXNzaW5nIGluIHRoZSBvYmplY3QgcGFzc2VkIHRvIHRoZSBgZW5kcG9pbnRzYCBhdHRyaWJ1dGUgb2YgdGhlYEF1dGhDb25maWdgIG9iamVjdC4iKTtyZXR1cm4gdC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5mb3JFYWNoKChuPT57Y29uc3Qgcj1uLnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpO2Vbcl09KG51bGw9PXQ/dm9pZCAwOnQuZW5kcG9pbnRzKT90LmVuZHBvaW50c1tuXToiIn0pKSxPYmplY3QuYXNzaWduKHt9LGUpfSkpfXJlc29sdmVFbmRwb2ludHNCeUJhc2VVUkwoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9e30sdD15aWVsZCB0aGlzLl9jb25maWcoKSxuPXQuYmFzZVVybDtpZighbil0aHJvdyBuZXcgYygiSlMtQVVUSF9IRUxQRVJfUkVCTy1ORjAxIiwiQmFzZSBVUkwgbm90IGRlZmluZWQuIiwiQmFzZSBVUkwgaXMgbm90IGRlZmluZWQgaW4gQXV0aENsaWVudCBjb25maWcuIik7dC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5mb3JFYWNoKChuPT57Y29uc3Qgcj1uLnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpO2Vbcl09KG51bGw9PXQ/dm9pZCAwOnQuZW5kcG9pbnRzKT90LmVuZHBvaW50c1tuXToiIn0pKTtjb25zdCByPXthdXRob3JpemF0aW9uX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvYXV0aG9yaXplIiksZW5kX3Nlc3Npb25fZW5kcG9pbnQ6IiIuY29uY2F0KG4pLmNvbmNhdCgiL29pZGMvbG9nb3V0IiksaXNzdWVyOiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvdG9rZW4iKSxqd2tzX3VyaToiIi5jb25jYXQobikuY29uY2F0KCIvb2F1dGgyL2p3a3MiKSxjaGVja19zZXNzaW9uX2lmcmFtZToiIi5jb25jYXQobikuY29uY2F0KCIvb2lkYy9jaGVja3Nlc3Npb24iKSxyZXZvY2F0aW9uX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvcmV2b2tlIiksdG9rZW5fZW5kcG9pbnQ6IiIuY29uY2F0KG4pLmNvbmNhdCgiL29hdXRoMi90b2tlbiIpLHVzZXJpbmZvX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvdXNlcmluZm8iKX07cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSxlKX0pKX12YWxpZGF0ZUlkVG9rZW4oZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKSkuandrc191cmkscj15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlNfQVVUSF9IRUxQRVItVklULU5GMDEiLCJKV0tTIGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyBKV0tTIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIEpXS1MgZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7bGV0IGk7dHJ5e2k9eWllbGQgZmV0Y2godCx7Y3JlZGVudGlhbHM6ci5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbn0pfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1WSVQtTkUwMiIsIlJlcXVlc3QgdG8gandrcyBlbmRwb2ludCBmYWlsZWQuIixudWxsIT10P3Q6IlRoZSByZXF1ZXN0IHNlbnQgdG8gZ2V0IHRoZSBqd2tzIGZyb20gdGhlIHNlcnZlciBmYWlsZWQuIil9aWYoMjAwIT09aS5zdGF0dXN8fCFpLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1WSVQtSEUwMyIsIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIHJlY2VpdmVkIGZvciBqd2tzIHJlcXVlc3QgKCIuY29uY2F0KGkuc3RhdHVzVGV4dCwiKS4iKSx5aWVsZCBpLmpzb24oKSk7Y29uc3Qgbz0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkuaXNzdWVyLHtrZXlzOnN9PXlpZWxkIGkuanNvbigpLHU9eWllbGQgdGhpcy5fY3J5cHRvSGVscGVyLmdldEpXS0ZvclRoZUlkVG9rZW4oZS5zcGxpdCgiLiIpWzBdLHMpO3JldHVybiB0aGlzLl9jcnlwdG9IZWxwZXIuaXNWYWxpZElkVG9rZW4oZSx1LCh5aWVsZCB0aGlzLl9jb25maWcoKSkuY2xpZW50SUQsbnVsbCE9bz9vOiIiLHRoaXMuX2NyeXB0b0hlbHBlci5kZWNvZGVJRFRva2VuKGUpLnN1YiwoeWllbGQgdGhpcy5fY29uZmlnKCkpLmNsb2NrVG9sZXJhbmNlLG51bGw9PT0obj0oeWllbGQgdGhpcy5fY29uZmlnKCkpLnZhbGlkYXRlSURUb2tlbklzc3Vlcil8fHZvaWQgMD09PW58fG4pfSkpfWdldEF1dGhlbnRpY2F0ZWRVc2VySW5mbyhlKXt2YXIgdCxuLHIsaTtjb25zdCBvPXRoaXMuX2NyeXB0b0hlbHBlci5kZWNvZGVJRFRva2VuKGUpLHM9dS5nZXRUZW5hbnREb21haW5Gcm9tSWRUb2tlblBheWxvYWQobyksYT1udWxsIT09KHQ9bnVsbD09bz92b2lkIDA6by51c2VybmFtZSkmJnZvaWQgMCE9PXQ/dDoiIixjPW51bGwhPT0obj1vLmdpdmVuX25hbWUpJiZ2b2lkIDAhPT1uP246IiIsbD1udWxsIT09KHI9by5mYW1pbHlfbmFtZSkmJnZvaWQgMCE9PXI/cjoiIixkPWMmJmw/IiIuY29uY2F0KGMsIiAiKS5jb25jYXQobCk6Y3x8bHx8IiIsaD1udWxsIT09KGk9by5wcmVmZXJyZWRfdXNlcm5hbWUpJiZ2b2lkIDAhPT1pP2k6ZDtyZXR1cm4gT2JqZWN0LmFzc2lnbih7ZGlzcGxheU5hbWU6aCx0ZW5hbnREb21haW46cyx1c2VybmFtZTphfSx1LmZpbHRlckNsYWltc0Zyb21JRFRva2VuUGF5bG9hZChvKSl9cmVwbGFjZUN1c3RvbUdyYW50VGVtcGxhdGVUYWdzKGUsbil7dmFyIHI7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtsZXQgdD0ib3BlbmlkIjtjb25zdCBpPXlpZWxkIHRoaXMuX2NvbmZpZygpLG89eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKG4pO3JldHVybiBpLnNjb3BlJiZpLnNjb3BlLmxlbmd0aD4wJiYoaS5zY29wZS5pbmNsdWRlcygib3BlbmlkIil8fGkuc2NvcGUucHVzaCgib3BlbmlkIiksdD1pLnNjb3BlLmpvaW4oIiAiKSksZS5yZXBsYWNlKCJ7e3Rva2VufX0iLG8uYWNjZXNzX3Rva2VuKS5yZXBsYWNlKCJ7e3VzZXJuYW1lfX0iLHRoaXMuZ2V0QXV0aGVudGljYXRlZFVzZXJJbmZvKG8uaWRfdG9rZW4pLnVzZXJuYW1lKS5yZXBsYWNlKCJ7e3Njb3BlfX0iLHQpLnJlcGxhY2UoInt7Y2xpZW50SUR9fSIsaS5jbGllbnRJRCkucmVwbGFjZSgie3tjbGllbnRTZWNyZXR9fSIsbnVsbCE9PShyPWkuY2xpZW50U2VjcmV0KSYmdm9pZCAwIT09cj9yOiIiKX0pKX1jbGVhclVzZXJTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2RhdGFMYXllci5yZW1vdmVUZW1wb3JhcnlEYXRhKGUpLHlpZWxkIHRoaXMuX2RhdGFMYXllci5yZW1vdmVTZXNzaW9uRGF0YShlKX0pKX1oYW5kbGVUb2tlblJlc3BvbnNlKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZigyMDAhPT1lLnN0YXR1c3x8IWUub2spdGhyb3cgbmV3IGMoIkpTLUFVVEhfSEVMUEVSLUhUUi1ORTAxIiwiSW52YWxpZCByZXNwb25zZSBzdGF0dXMgcmVjZWl2ZWQgZm9yIHRva2VuIHJlcXVlc3QgKCIuY29uY2F0KGUuc3RhdHVzVGV4dCwiKS4iKSx5aWVsZCBlLmpzb24oKSk7Y29uc3Qgcj15aWVsZCBlLmpzb24oKTtpZihyLmNyZWF0ZWRfYXQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksKHlpZWxkIHRoaXMuX2NvbmZpZygpKS52YWxpZGF0ZUlEVG9rZW4pcmV0dXJuIHRoaXMudmFsaWRhdGVJZFRva2VuKHIuaWRfdG9rZW4pLnRoZW4oKCgpPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFNlc3Npb25EYXRhKHIsbik7Y29uc3QgZT17YWNjZXNzVG9rZW46ci5hY2Nlc3NfdG9rZW4sY3JlYXRlZEF0OnIuY3JlYXRlZF9hdCxleHBpcmVzSW46ci5leHBpcmVzX2luLGlkVG9rZW46ci5pZF90b2tlbixyZWZyZXNoVG9rZW46ci5yZWZyZXNoX3Rva2VuLHNjb3BlOnIuc2NvcGUsdG9rZW5UeXBlOnIudG9rZW5fdHlwZX07cmV0dXJuIFByb21pc2UucmVzb2x2ZShlKX0pKSkpO3tjb25zdCBlPXthY2Nlc3NUb2tlbjpyLmFjY2Vzc190b2tlbixjcmVhdGVkQXQ6ci5jcmVhdGVkX2F0LGV4cGlyZXNJbjpyLmV4cGlyZXNfaW4saWRUb2tlbjpyLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjpyLnJlZnJlc2hfdG9rZW4sc2NvcGU6ci5zY29wZSx0b2tlblR5cGU6ci50b2tlbl90eXBlfTtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFNlc3Npb25EYXRhKHIsbiksUHJvbWlzZS5yZXNvbHZlKGUpfX0pKX1nZW5lcmF0ZVBLQ0VLZXkoZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhKGUpLHI9W107T2JqZWN0LmtleXModCkuZm9yRWFjaCgoZT0+e2Uuc3RhcnRzV2l0aCgicGtjZV9jb2RlX3ZlcmlmaWVyIikmJnIucHVzaChlKX0pKTtjb25zdCBpPXIuc29ydCgpLnBvcCgpO3JldHVybiJwa2NlX2NvZGVfdmVyaWZpZXIjIi5jb25jYXQocGFyc2VJbnQobnVsbCE9PShuPW51bGw9PWk/dm9pZCAwOmkuc3BsaXQoIiMiKVsxXSkmJnZvaWQgMCE9PW4/bjoiLTEiKSsxKX0pKX19Y2xhc3MgZHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9jcnlwdG9VdGlscz1lfWdldENvZGVWZXJpZmllcigpe3JldHVybiB0aGlzLl9jcnlwdG9VdGlscy5iYXNlNjRVUkxFbmNvZGUodGhpcy5fY3J5cHRvVXRpbHMuZ2VuZXJhdGVSYW5kb21CeXRlcygzMikpfWdldENvZGVDaGFsbGVuZ2UoZSl7cmV0dXJuIHRoaXMuX2NyeXB0b1V0aWxzLmJhc2U2NFVSTEVuY29kZSh0aGlzLl9jcnlwdG9VdGlscy5oYXNoU2hhMjU2KGUpKX1nZXRKV0tGb3JUaGVJZFRva2VuKGUsdCl7Y29uc3Qgbj1KU09OLnBhcnNlKHRoaXMuX2NyeXB0b1V0aWxzLmJhc2U2NFVSTERlY29kZShlKSk7Zm9yKGNvbnN0IGUgb2YgdClpZihuLmtpZD09PWUua2lkKXJldHVybiBlO3Rocm93IG5ldyBjKCJKUy1DUllQVE9fVVRJTC1HSkZUSVQtSVYwMSIsImtpZCBub3QgZm91bmQuIiwiRmFpbGVkIHRvIGZpbmQgdGhlICdraWQnIHNwZWNpZmllZCBpbiB0aGUgaWRfdG9rZW4uICdraWQnIGZvdW5kIGluIHRoZSBoZWFkZXIgOiAiK24ua2lkKyIsIEV4cGVjdGVkIHZhbHVlczogIit0Lm1hcCgoZT0+ZS5raWQpKS5qb2luKCIsICIpKX1pc1ZhbGlkSWRUb2tlbihlLHQsbixyLGkscyxhKXtyZXR1cm4gdGhpcy5fY3J5cHRvVXRpbHMudmVyaWZ5Snd0KGUsdCxvLG4scixpLHMsYSkudGhlbigoZT0+ZT9Qcm9taXNlLnJlc29sdmUoITApOlByb21pc2UucmVqZWN0KG5ldyBjKCJKUy1DUllQVE9fSEVMUEVSLUlWSVQtSVYwMSIsIkludmFsaWQgSUQgdG9rZW4uIiwiSUQgdG9rZW4gdmFsaWRhdGlvbiByZXR1cm5lZCBmYWxzZSIpKSkpfWRlY29kZUlEVG9rZW4oZSl7dHJ5e2NvbnN0IHQ9dGhpcy5fY3J5cHRvVXRpbHMuYmFzZTY0VVJMRGVjb2RlKGUuc3BsaXQoIi4iKVsxXSk7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGMoIkpTLUNSWVBUT19VVElMLURJVC1JVjAxIiwiRGVjb2RpbmcgSUQgdG9rZW4gZmFpbGVkLiIsZSl9fX1jbGFzcyBoe2NvbnN0cnVjdG9yKGUsbil7dGhpcy5fY3J5cHRvVXRpbHM9bix0aGlzLl9jcnlwdG9IZWxwZXI9bmV3IGQobiksdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXI9bmV3IGwoZSx0aGlzLl9jcnlwdG9IZWxwZXIpLHRoaXMuX2RhdGFMYXllcj1lLHRoaXMuX2NvbmZpZz0oKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpfSkpLHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhPSgpPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSgpfSkpfWdldEF1dGhvcml6YXRpb25VUkxQYXJhbXMoZSxuKXt2YXIgcixpLG87cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2NvbmZpZygpLHM9bmV3IE1hcDtzLnNldCgicmVzcG9uc2VfdHlwZSIsImNvZGUiKSxzLnNldCgiY2xpZW50X2lkIix0LmNsaWVudElEKTtsZXQgYT0ib3BlbmlkIjt0LnNjb3BlJiZ0LnNjb3BlLmxlbmd0aD4wJiYodC5zY29wZS5pbmNsdWRlcygib3BlbmlkIil8fHQuc2NvcGUucHVzaCgib3BlbmlkIiksYT10LnNjb3BlLmpvaW4oIiAiKSkscy5zZXQoInNjb3BlIixhKSxzLnNldCgicmVkaXJlY3RfdXJpIix0LnNpZ25JblJlZGlyZWN0VVJMKSx0LnJlc3BvbnNlTW9kZSYmcy5zZXQoInJlc3BvbnNlX21vZGUiLHQucmVzcG9uc2VNb2RlKTtjb25zdCBjPXlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmdlbmVyYXRlUEtDRUtleShuKTtpZih0LmVuYWJsZVBLQ0Upe2NvbnN0IGU9bnVsbD09PShyPXRoaXMuX2NyeXB0b0hlbHBlcil8fHZvaWQgMD09PXI/dm9pZCAwOnIuZ2V0Q29kZVZlcmlmaWVyKCksdD1udWxsPT09KGk9dGhpcy5fY3J5cHRvSGVscGVyKXx8dm9pZCAwPT09aT92b2lkIDA6aS5nZXRDb2RlQ2hhbGxlbmdlKGUpO3lpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGMsZSxuKSxzLnNldCgiY29kZV9jaGFsbGVuZ2VfbWV0aG9kIiwiUzI1NiIpLHMuc2V0KCJjb2RlX2NoYWxsZW5nZSIsdCl9dC5wcm9tcHQmJnMuc2V0KCJwcm9tcHQiLHQucHJvbXB0KTtjb25zdCBsPWU7aWYobClmb3IoY29uc3RbZSx0XW9mIE9iamVjdC5lbnRyaWVzKGwpKSIiIT1lJiYiIiE9dCYmInN0YXRlIiE9PWUmJnMuc2V0KGUsdC50b1N0cmluZygpKTtyZXR1cm4gcy5zZXQoInN0YXRlIix1LmdlbmVyYXRlU3RhdGVQYXJhbUZvclJlcXVlc3RDb3JyZWxhdGlvbihjLGw/bnVsbD09PShvPWwuc3RhdGUpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnRvU3RyaW5nKCk6IiIpKSxzfSkpfWdldEF1dGhvcml6YXRpb25VUkwoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldE9JRENQcm92aWRlck1ldGFEYXRhUGFyYW1ldGVyKCJhdXRob3JpemF0aW9uX2VuZHBvaW50Iik7aWYoIXR8fDA9PT10LnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HQVUtTkYwMSIsIk5vIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgZm91bmQuIiwiTm8gYXV0aG9yaXphdGlvbiBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIGZyb20gdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7Y29uc3Qgcj1uZXcgVVJMKHQpLGk9eWllbGQgdGhpcy5nZXRBdXRob3JpemF0aW9uVVJMUGFyYW1zKGUsbik7Zm9yKGNvbnN0W2UsdF1vZiBpLmVudHJpZXMoKSlyLnNlYXJjaFBhcmFtcy5hcHBlbmQoZSx0KTtyZXR1cm4gci50b1N0cmluZygpfSkpfXJlcXVlc3RBY2Nlc3NUb2tlbihlLG4scixpLG8pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkudG9rZW5fZW5kcG9pbnQscz15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDEtTkYwMSIsIlRva2VuIGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyB0b2tlbiBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIHJldHVybmVkIGJ5IHRoZSB3ZWxsLWtub3duIGVuZHBvaW50IG9yIHRoZSB0b2tlbiBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtuJiYoeWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFNlc3Npb25EYXRhUGFyYW1ldGVyKCJzZXNzaW9uX3N0YXRlIixuLGkpKTtjb25zdCBsPW5ldyBVUkxTZWFyY2hQYXJhbXM7bC5zZXQoImNsaWVudF9pZCIscy5jbGllbnRJRCkscy5jbGllbnRTZWNyZXQmJnMuY2xpZW50U2VjcmV0LnRyaW0oKS5sZW5ndGg+MCYmbC5zZXQoImNsaWVudF9zZWNyZXQiLHMuY2xpZW50U2VjcmV0KTtjb25zdCBkPWU7bGV0IGg7bC5zZXQoImNvZGUiLGQpLGwuc2V0KCJncmFudF90eXBlIiwiYXV0aG9yaXphdGlvbl9jb2RlIiksbC5zZXQoInJlZGlyZWN0X3VyaSIscy5zaWduSW5SZWRpcmVjdFVSTCksKG51bGw9PW8/dm9pZCAwOm8ucGFyYW1zKSYmT2JqZWN0LmVudHJpZXMoby5wYXJhbXMpLmZvckVhY2goKGU9PntsZXRbdCxuXT1lO2wuYXBwZW5kKHQsbil9KSkscy5lbmFibGVQS0NFJiYobC5zZXQoImNvZGVfdmVyaWZpZXIiLCIiLmNvbmNhdCh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcih1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0ociksaSkpKSx5aWVsZCB0aGlzLl9kYXRhTGF5ZXIucmVtb3ZlVGVtcG9yYXJ5RGF0YVBhcmFtZXRlcih1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0ociksaSkpO3RyeXtoPXlpZWxkIGZldGNoKHQse2JvZHk6bCxjcmVkZW50aWFsczpzLnNlbmRDb29raWVzSW5SZXF1ZXN0cz9hLkluY2x1ZGU6YS5TYW1lT3JpZ2luLGhlYWRlcnM6bmV3IEhlYWRlcnModS5nZXRUb2tlblJlcXVlc3RIZWFkZXJzKCkpLG1ldGhvZDoiUE9TVCJ9KX1jYXRjaCh0KXt0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDEtTkUwMiIsIlJlcXVlc3RpbmcgYWNjZXNzIHRva2VuIGZhaWxlZCIsbnVsbCE9dD90OiJUaGUgcmVxdWVzdCB0byBnZXQgdGhlIGFjY2VzcyB0b2tlbiBmcm9tIHRoZSBzZXJ2ZXIgZmFpbGVkLiIpfWlmKCFoLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMS1IRTAzIiwiUmVxdWVzdGluZyBhY2Nlc3MgdG9rZW4gZmFpbGVkIHdpdGggIi5jb25jYXQoaC5zdGF0dXNUZXh0KSx5aWVsZCBoLmpzb24oKSk7cmV0dXJuIHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmhhbmRsZVRva2VuUmVzcG9uc2UoaCxpKX0pKX1yZWZyZXNoQWNjZXNzVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YSgpKS50b2tlbl9lbmRwb2ludCxuPXlpZWxkIHRoaXMuX2NvbmZpZygpLHI9eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpO2lmKCFyLnJlZnJlc2hfdG9rZW4pdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQyLU5GMDEiLCJObyByZWZyZXNoIHRva2VuIGZvdW5kLiIsIlRoZXJlIHdhcyBubyByZWZyZXNoIHRva2VuIGZvdW5kLiBBc2dhcmRlbyBkb2Vzbid0IHJldHVybiBhIHJlZnJlc2ggdG9rZW4gaWYgdGhlIHJlZnJlc2ggdG9rZW4gZ3JhbnQgaXMgbm90IGVuYWJsZWQuIik7aWYoIXR8fDA9PT10LnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQyLU5GMDIiLCJObyByZWZyZXNoIHRva2VuIGVuZHBvaW50IGZvdW5kLiIsIk5vIHJlZnJlc2ggdG9rZW4gZW5kcG9pbnQgd2FzIGluIHRoZSBPSURDIHByb3ZpZGVyIG1ldGEgZGF0YSByZXR1cm5lZCBieSB0aGUgd2VsbC1rbm93biBlbmRwb2ludCBvciB0aGUgcmVmcmVzaCB0b2tlbiBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtjb25zdCBpPVtdO2xldCBvO2kucHVzaCgiY2xpZW50X2lkPSIuY29uY2F0KG4uY2xpZW50SUQpKSxpLnB1c2goInJlZnJlc2hfdG9rZW49Ii5jb25jYXQoci5yZWZyZXNoX3Rva2VuKSksaS5wdXNoKCJncmFudF90eXBlPXJlZnJlc2hfdG9rZW4iKSxuLmNsaWVudFNlY3JldCYmbi5jbGllbnRTZWNyZXQudHJpbSgpLmxlbmd0aD4wJiZpLnB1c2goImNsaWVudF9zZWNyZXQ9Ii5jb25jYXQobi5jbGllbnRTZWNyZXQpKTt0cnl7bz15aWVsZCBmZXRjaCh0LHtib2R5Omkuam9pbigiJiIpLGNyZWRlbnRpYWxzOm4uc2VuZENvb2tpZXNJblJlcXVlc3RzP2EuSW5jbHVkZTphLlNhbWVPcmlnaW4saGVhZGVyczpuZXcgSGVhZGVycyh1LmdldFRva2VuUmVxdWVzdEhlYWRlcnMoKSksbWV0aG9kOiJQT1NUIn0pfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMi1OUjAzIiwiUmVmcmVzaCBhY2Nlc3MgdG9rZW4gcmVxdWVzdCBmYWlsZWQuIixudWxsIT10P3Q6IlRoZSByZXF1ZXN0IHRvIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBmYWlsZWQuIil9aWYoIW8ub2spdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQyLUhFMDQiLCJSZWZyZXNoaW5nIGFjY2VzcyB0b2tlbiBmYWlsZWQgd2l0aCAiLmNvbmNhdChvLnN0YXR1c1RleHQpLHlpZWxkIG8uanNvbigpKTtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuaGFuZGxlVG9rZW5SZXNwb25zZShvLGUpfSkpfXJldm9rZUFjY2Vzc1Rva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkucmV2b2NhdGlvbl9lbmRwb2ludCxuPXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMy1ORjAxIiwiTm8gcmV2b2tlIGFjY2VzcyB0b2tlbiBlbmRwb2ludCBmb3VuZC4iLCJObyByZXZva2UgYWNjZXNzIHRva2VuIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIHJldm9rZSBhY2Nlc3MgdG9rZW4gZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7Y29uc3Qgcj1bXTtsZXQgaTtyLnB1c2goImNsaWVudF9pZD0iLmNvbmNhdChuLmNsaWVudElEKSksci5wdXNoKCJ0b2tlbj0iLmNvbmNhdCgoeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpKS5hY2Nlc3NfdG9rZW4pKSxyLnB1c2goInRva2VuX3R5cGVfaGludD1hY2Nlc3NfdG9rZW4iKTt0cnl7aT15aWVsZCBmZXRjaCh0LHtib2R5OnIuam9pbigiJiIpLGNyZWRlbnRpYWxzOm4uc2VuZENvb2tpZXNJblJlcXVlc3RzP2EuSW5jbHVkZTphLlNhbWVPcmlnaW4saGVhZGVyczpuZXcgSGVhZGVycyh1LmdldFRva2VuUmVxdWVzdEhlYWRlcnMoKSksbWV0aG9kOiJQT1NUIn0pfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMy1ORTAyIiwiVGhlIHJlcXVlc3QgdG8gcmV2b2tlIGFjY2VzcyB0b2tlbiBmYWlsZWQuIixudWxsIT10P3Q6IlRoZSByZXF1ZXN0IHNlbnQgdG8gcmV2b2tlIHRoZSBhY2Nlc3MgdG9rZW4gZmFpbGVkLiIpfWlmKDIwMCE9PWkuc3RhdHVzfHwhaS5vayl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDMtSEUwMyIsIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIHJlY2VpdmVkIGZvciByZXZva2UgYWNjZXNzIHRva2VuIHJlcXVlc3QgKCIuY29uY2F0KGkuc3RhdHVzVGV4dCwiKS4iKSx5aWVsZCBpLmpzb24oKSk7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmNsZWFyVXNlclNlc3Npb25EYXRhKGUpLFByb21pc2UucmVzb2x2ZShpKX0pKX1yZXF1ZXN0Q3VzdG9tR3JhbnQoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHI9eWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSxpPXlpZWxkIHRoaXMuX2NvbmZpZygpO2xldCBvO2lmKG89ZS50b2tlbkVuZHBvaW50JiYwIT09ZS50b2tlbkVuZHBvaW50LnRyaW0oKS5sZW5ndGg/ZS50b2tlbkVuZHBvaW50OnIudG9rZW5fZW5kcG9pbnQsIW98fDA9PT1vLnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQ0ctTkYwMSIsIlRva2VuIGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyB0b2tlbiBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIHJldHVybmVkIGJ5IHRoZSB3ZWxsLWtub3duIGVuZHBvaW50IG9yIHRoZSB0b2tlbiBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtjb25zdCBzPXlpZWxkIFByb21pc2UuYWxsKE9iamVjdC5lbnRyaWVzKGUuZGF0YSkubWFwKChlPT57bGV0W3IsaV09ZTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIucmVwbGFjZUN1c3RvbUdyYW50VGVtcGxhdGVUYWdzKGksbik7cmV0dXJuIiIuY29uY2F0KHIsIj0iKS5jb25jYXQoZSl9KSl9KSkpO2xldCBsPU9iamVjdC5hc3NpZ24oe30sdS5nZXRUb2tlblJlcXVlc3RIZWFkZXJzKCkpO2UuYXR0YWNoVG9rZW4mJihsPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxsKSx7QXV0aG9yaXphdGlvbjoiQmVhcmVyICIuY29uY2F0KCh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEobikpLmFjY2Vzc190b2tlbil9KSk7Y29uc3QgZD17Ym9keTpzLmpvaW4oIiYiKSxjcmVkZW50aWFsczppLnNlbmRDb29raWVzSW5SZXF1ZXN0cz9hLkluY2x1ZGU6YS5TYW1lT3JpZ2luLGhlYWRlcnM6bmV3IEhlYWRlcnMobCksbWV0aG9kOiJQT1NUIn07bGV0IGg7dHJ5e2g9eWllbGQgZmV0Y2gobyxkKX1jYXRjaChlKXt0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJDRy1ORTAyIiwiVGhlIGN1c3RvbSBncmFudCByZXF1ZXN0IGZhaWxlZC4iLG51bGwhPWU/ZToiVGhlIHJlcXVlc3Qgc2VudCB0byBnZXQgdGhlIGN1c3RvbSBncmFudCBmYWlsZWQuIil9aWYoMjAwIT09aC5zdGF0dXN8fCFoLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkNHLUhFMDMiLCJJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cyByZWNlaXZlZCBmb3IgdGhlIGN1c3RvbSBncmFudCByZXF1ZXN0LiAoIi5jb25jYXQoaC5zdGF0dXNUZXh0LCIpIikseWllbGQgaC5qc29uKCkpO3JldHVybiBlLnJldHVybnNTZXNzaW9uP3RoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmhhbmRsZVRva2VuUmVzcG9uc2UoaCxuKTpQcm9taXNlLnJlc29sdmUoeWllbGQgaC5qc29uKCkpfSkpfWdldEJhc2ljVXNlckluZm8oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSxuPXRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmdldEF1dGhlbnRpY2F0ZWRVc2VySW5mbyhudWxsPT10P3ZvaWQgMDp0LmlkX3Rva2VuKTtsZXQgcj17YWxsb3dlZFNjb3Blczp0LnNjb3BlLHNlc3Npb25TdGF0ZTp0LnNlc3Npb25fc3RhdGV9O3JldHVybiBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChlPT57dm9pZCAwIT09bltlXSYmIiIhPT1uW2VdJiZudWxsIT09bltlXXx8ZGVsZXRlIG5bZV19KSkscj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sciksbikscn0pKX1nZXREZWNvZGVkSURUb2tlbihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9KHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSkuaWRfdG9rZW47cmV0dXJuIHRoaXMuX2NyeXB0b0hlbHBlci5kZWNvZGVJRFRva2VuKHQpfSkpfWdldENyeXB0b0hlbHBlcigpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2NyeXB0b0hlbHBlcn0pKX1nZXRJRFRva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSkuaWRfdG9rZW59KSl9Z2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCFlJiYoeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoIm9wX2NvbmZpZ19pbml0aWF0ZWQiKSkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IG49dC53ZWxsS25vd25FbmRwb2ludDtpZihuKXtsZXQgZTt0cnl7aWYoZT15aWVsZCBmZXRjaChuKSwyMDAhPT1lLnN0YXR1c3x8IWUub2spdGhyb3cgbmV3IEVycm9yfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtR09QTUQtSEUwMSIsIkludmFsaWQgd2VsbC1rbm93biByZXNwb25zZSIsIlRoZSB3ZWxsIGtub3duIGVuZHBvaW50IHJlc3BvbnNlIGhhcyBiZWVuIGZhaWxlZCB3aXRoIGFuIGVycm9yLiIpfXJldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoeWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIucmVzb2x2ZUVuZHBvaW50cyh5aWVsZCBlLmpzb24oKSkpLHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIiwhMCksUHJvbWlzZS5yZXNvbHZlKCl9aWYodC5iYXNlVXJsKXt0cnl7eWllbGQgdGhpcy5fZGF0YUxheWVyLnNldE9JRENQcm92aWRlck1ldGFEYXRhKHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLnJlc29sdmVFbmRwb2ludHNCeUJhc2VVUkwoKSl9Y2F0Y2godCl7dGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HT1BNRC1JVjAyIiwiUmVzb2x2aW5nIGVuZHBvaW50cyBmYWlsZWQuIixudWxsIT10P3Q6IlJlc29sdmluZyBlbmRwb2ludHMgYnkgYmFzZSB1cmwgZmFpbGVkLiIpfXJldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIsITApLFByb21pc2UucmVzb2x2ZSgpfXJldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoeWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIucmVzb2x2ZUVuZHBvaW50c0V4cGxpY2l0bHkoKSkseWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoIm9wX2NvbmZpZ19pbml0aWF0ZWQiLCEwKSxQcm9taXNlLnJlc29sdmUoKX0pKX1nZXRPSURDU2VydmljZUVuZHBvaW50cygpe3ZhciBlLG4scixpLG8scyxhLGMsdSxsO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YSgpO3JldHVybnthdXRob3JpemF0aW9uRW5kcG9pbnQ6bnVsbCE9PShlPXQuYXV0aG9yaXphdGlvbl9lbmRwb2ludCkmJnZvaWQgMCE9PWU/ZToiIixjaGVja1Nlc3Npb25JZnJhbWU6bnVsbCE9PShuPXQuY2hlY2tfc2Vzc2lvbl9pZnJhbWUpJiZ2b2lkIDAhPT1uP246IiIsZW5kU2Vzc2lvbkVuZHBvaW50Om51bGwhPT0ocj10LmVuZF9zZXNzaW9uX2VuZHBvaW50KSYmdm9pZCAwIT09cj9yOiIiLGludHJvc3BlY3Rpb25FbmRwb2ludDpudWxsIT09KGk9dC5pbnRyb3NwZWN0aW9uX2VuZHBvaW50KSYmdm9pZCAwIT09aT9pOiIiLGlzc3VlcjpudWxsIT09KG89dC5pc3N1ZXIpJiZ2b2lkIDAhPT1vP286IiIsandrc1VyaTpudWxsIT09KHM9dC5qd2tzX3VyaSkmJnZvaWQgMCE9PXM/czoiIixyZWdpc3RyYXRpb25FbmRwb2ludDpudWxsIT09KGE9dC5yZWdpc3RyYXRpb25fZW5kcG9pbnQpJiZ2b2lkIDAhPT1hP2E6IiIscmV2b2NhdGlvbkVuZHBvaW50Om51bGwhPT0oYz10LnJldm9jYXRpb25fZW5kcG9pbnQpJiZ2b2lkIDAhPT1jP2M6IiIsdG9rZW5FbmRwb2ludDpudWxsIT09KHU9dC50b2tlbl9lbmRwb2ludCkmJnZvaWQgMCE9PXU/dToiIix1c2VyaW5mb0VuZHBvaW50Om51bGwhPT0obD10LnVzZXJpbmZvX2VuZHBvaW50KSYmdm9pZCAwIT09bD9sOiIifX0pKX1nZXRTaWduT3V0VVJMKGUpe3ZhciBuLHIsaTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9bnVsbD09PShuPXlpZWxkIHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmVuZF9zZXNzaW9uX2VuZHBvaW50LG89eWllbGQgdGhpcy5fY29uZmlnKCk7aWYoIXR8fDA9PT10LnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HU09VLU5GMDEiLCJTaWduLW91dCBlbmRwb2ludCBub3QgZm91bmQuIiwiTm8gc2lnbi1vdXQgZW5kcG9pbnQgd2FzIGZvdW5kIGluIHRoZSBPSURDIHByb3ZpZGVyIG1ldGEgZGF0YSByZXR1cm5lZCBieSB0aGUgd2VsbC1rbm93biBlbmRwb2ludCBvciB0aGUgc2lnbi1vdXQgZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7Y29uc3Qgcz1udWxsIT09KHI9bnVsbD09bz92b2lkIDA6by5zaWduT3V0UmVkaXJlY3RVUkwpJiZ2b2lkIDAhPT1yP3I6bnVsbD09bz92b2lkIDA6by5zaWduSW5SZWRpcmVjdFVSTDtpZighc3x8MD09PXMudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLUdTT1UtTkYwMyIsIk5vIHNpZ24tb3V0IHJlZGlyZWN0IFVSTCBmb3VuZC4iLCJUaGUgc2lnbi1vdXQgcmVkaXJlY3QgVVJMIGNhbm5vdCBiZSBmb3VuZCBvciB0aGUgVVJMIHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiBObyBzaWduLWluIHJlZGlyZWN0IFVSTCBoYXMgYmVlbiBmb3VuZCBlaXRoZXIuICIpO2NvbnN0IGE9bmV3IFVSTFNlYXJjaFBhcmFtcztpZihhLnNldCgicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpIixzKSxvLnNlbmRJZFRva2VuSW5Mb2dvdXRSZXF1ZXN0KXtjb25zdCB0PW51bGw9PT0oaT15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmlkX3Rva2VuO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtR1NPVS1ORjAyIiwiSUQgdG9rZW4gbm90IGZvdW5kLiIsIk5vIElEIHRva2VuIGNvdWxkIGJlIGZvdW5kLiBFaXRoZXIgdGhlIHNlc3Npb24gaW5mb3JtYXRpb24gaXMgbG9zdCBvciB5b3UgaGF2ZSBub3Qgc2lnbmVkIGluLiIpO2Euc2V0KCJpZF90b2tlbl9oaW50Iix0KX1lbHNlIGEuc2V0KCJjbGllbnRfaWQiLG8uY2xpZW50SUQpO3JldHVybiBhLnNldCgic3RhdGUiLCJzaWduX291dF9zdWNjZXNzIiksIiIuY29uY2F0KHQsIj8iKS5jb25jYXQoYS50b1N0cmluZygpKX0pKX1jbGVhclVzZXJTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmNsZWFyVXNlclNlc3Npb25EYXRhKGUpfSkpfWdldEFjY2Vzc1Rva2VuKGUpe3ZhciBuO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIG51bGw9PT0obj15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmFjY2Vzc190b2tlbn0pKX1nZXRDcmVhdGVkQXQoZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gbnVsbD09PShuPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY3JlYXRlZF9hdH0pKX1nZXRFeHBpcmVzSW4oZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gbnVsbD09PShuPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZXhwaXJlc19pbn0pKX1pc0F1dGhlbnRpY2F0ZWQoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PUJvb2xlYW4oeWllbGQgdGhpcy5nZXRBY2Nlc3NUb2tlbihlKSksbj15aWVsZCB0aGlzLmdldENyZWF0ZWRBdChlKSxyPXlpZWxkIHRoaXMuZ2V0RXhwaXJlc0luKGUpO2lmKCFyKXJldHVybiExO2NvbnN0IGk9MWUzKnBhcnNlSW50KHIpLG89KG5ldyBEYXRlKS5nZXRUaW1lKCk7cmV0dXJuIHQmJm4raT5vfSkpfWdldFBLQ0VDb2RlKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIodS5leHRyYWN0UEtDRUtleUZyb21TdGF0ZVBhcmFtKGUpLG4pfSkpfXNldFBLQ0VDb2RlKGUsbixyKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcih1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0obiksZSxyKX0pKX11cGRhdGVDb25maWcoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0Q29uZmlnRGF0YShlKSx5aWVsZCB0aGlzLmdldE9JRENQcm92aWRlck1ldGFEYXRhKCEwKX0pKX19Y2xhc3MgZntjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2lkPWUsdGhpcy5fc3RvcmU9dH1zZXREYXRhSW5CdWxrKGUsbil7dmFyIHI7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PW51bGwhPT0ocj15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKGUpKSYmdm9pZCAwIT09cj9yOm51bGwsaT10JiZKU09OLnBhcnNlKHQpLG89T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLG4pLHM9SlNPTi5zdHJpbmdpZnkobyk7eWllbGQgdGhpcy5fc3RvcmUuc2V0RGF0YShlLHMpfSkpfXNldFZhbHVlKGUsbixyKXt2YXIgaTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9bnVsbCE9PShpPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEoZSkpJiZ2b2lkIDAhPT1pP2k6bnVsbCxvPXQmJkpTT04ucGFyc2UodCkscz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbykse1tuXTpyfSksYT1KU09OLnN0cmluZ2lmeShzKTt5aWVsZCB0aGlzLl9zdG9yZS5zZXREYXRhKGUsYSl9KSl9cmVtb3ZlVmFsdWUoZSxuKXt2YXIgcjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9bnVsbCE9PShyPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEoZSkpJiZ2b2lkIDAhPT1yP3I6bnVsbCxpPXQmJkpTT04ucGFyc2UodCksbz1PYmplY3QuYXNzaWduKHt9LGkpO2RlbGV0ZSBvW25dO2NvbnN0IHM9SlNPTi5zdHJpbmdpZnkobyk7eWllbGQgdGhpcy5fc3RvcmUuc2V0RGF0YShlLHMpfSkpfV9yZXNvbHZlS2V5KGUsdCl7cmV0dXJuIHQ/IiIuY29uY2F0KGUsIi0iKS5jb25jYXQodGhpcy5faWQsIi0iKS5jb25jYXQodCk6IiIuY29uY2F0KGUsIi0iKS5jb25jYXQodGhpcy5faWQpfWlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCl7dHJ5e2NvbnN0IGU9Il9fQVNHQVJERU9fQVVUSF9DT1JFX0xPQ0FMX1NUT1JBR0VfVEVTVF9fIjtyZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oZSxlKSxsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShlKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19c2V0Q29uZmlnRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2V0RGF0YUluQnVsayh0aGlzLl9yZXNvbHZlS2V5KHIuQ29uZmlnRGF0YSksZSl9KSl9c2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLnNldERhdGFJbkJ1bGsodGhpcy5fcmVzb2x2ZUtleShyLk9JRENQcm92aWRlck1ldGFEYXRhKSxlKX0pKX1zZXRUZW1wb3JhcnlEYXRhKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLnNldERhdGFJbkJ1bGsodGhpcy5fcmVzb2x2ZUtleShyLlRlbXBvcmFyeURhdGEsbiksZSl9KSl9c2V0U2Vzc2lvbkRhdGEoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuc2V0RGF0YUluQnVsayh0aGlzLl9yZXNvbHZlS2V5KHIuU2Vzc2lvbkRhdGEsbiksZSl9KSl9c2V0Q3VzdG9tRGF0YShlLG4scil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLnNldERhdGFJbkJ1bGsodGhpcy5fcmVzb2x2ZUtleShlLHIpLG4pfSkpfWdldENvbmZpZ0RhdGEoKXt2YXIgZTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBKU09OLnBhcnNlKG51bGwhPT0oZT15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5Db25maWdEYXRhKSkpJiZ2b2lkIDAhPT1lP2U6bnVsbCl9KSl9Z2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKXt2YXIgZTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBKU09OLnBhcnNlKG51bGwhPT0oZT15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5PSURDUHJvdmlkZXJNZXRhRGF0YSkpKSYmdm9pZCAwIT09ZT9lOm51bGwpfSkpfWdldFRlbXBvcmFyeURhdGEoZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gSlNPTi5wYXJzZShudWxsIT09KG49eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuVGVtcG9yYXJ5RGF0YSxlKSkpJiZ2b2lkIDAhPT1uP246bnVsbCl9KSl9Z2V0U2Vzc2lvbkRhdGEoZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gSlNPTi5wYXJzZShudWxsIT09KG49eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuU2Vzc2lvbkRhdGEsZSkpKSYmdm9pZCAwIT09bj9uOm51bGwpfSkpfWdldEN1c3RvbURhdGEoZSxuKXt2YXIgcjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBKU09OLnBhcnNlKG51bGwhPT0ocj15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoZSxuKSkpJiZ2b2lkIDAhPT1yP3I6bnVsbCl9KSl9c2V0U2Vzc2lvblN0YXR1cyhlKXt0aGlzLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkmJmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhc2dhcmRlby1zZXNzaW9uLWFjdGl2ZSIsZSl9Z2V0U2Vzc2lvblN0YXR1cygpe3ZhciBlO3JldHVybiB0aGlzLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkmJm51bGwhPT0oZT1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXNnYXJkZW8tc2Vzc2lvbi1hY3RpdmUiKSkmJnZvaWQgMCE9PWU/ZToiIn1yZW1vdmVTZXNzaW9uU3RhdHVzKCl7dGhpcy5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpJiZsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiYXNnYXJkZW8tc2Vzc2lvbi1hY3RpdmUiKX1yZW1vdmVDb25maWdEYXRhKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9zdG9yZS5yZW1vdmVEYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5Db25maWdEYXRhKSl9KSl9cmVtb3ZlT0lEQ1Byb3ZpZGVyTWV0YURhdGEoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX3N0b3JlLnJlbW92ZURhdGEodGhpcy5fcmVzb2x2ZUtleShyLk9JRENQcm92aWRlck1ldGFEYXRhKSl9KSl9cmVtb3ZlVGVtcG9yYXJ5RGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX3N0b3JlLnJlbW92ZURhdGEodGhpcy5fcmVzb2x2ZUtleShyLlRlbXBvcmFyeURhdGEsZSkpfSkpfXJlbW92ZVNlc3Npb25EYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fc3RvcmUucmVtb3ZlRGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuU2Vzc2lvbkRhdGEsZSkpfSkpfWdldENvbmZpZ0RhdGFQYXJhbWV0ZXIoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLkNvbmZpZ0RhdGEpKTtyZXR1cm4gdCYmSlNPTi5wYXJzZSh0KVtlXX0pKX1nZXRPSURDUHJvdmlkZXJNZXRhRGF0YVBhcmFtZXRlcihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuT0lEQ1Byb3ZpZGVyTWV0YURhdGEpKTtyZXR1cm4gdCYmSlNPTi5wYXJzZSh0KVtlXX0pKX1nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLlRlbXBvcmFyeURhdGEsbikpO3JldHVybiB0JiZKU09OLnBhcnNlKHQpW2VdfSkpfWdldFNlc3Npb25EYXRhUGFyYW1ldGVyKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLlNlc3Npb25EYXRhLG4pKTtyZXR1cm4gdCYmSlNPTi5wYXJzZSh0KVtlXX0pKX1zZXRDb25maWdEYXRhUGFyYW1ldGVyKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldFZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5Db25maWdEYXRhKSxlLG4pfSkpfXNldE9JRENQcm92aWRlck1ldGFEYXRhUGFyYW1ldGVyKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldFZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5PSURDUHJvdmlkZXJNZXRhRGF0YSksZSxuKX0pKX1zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGUsbixpKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2V0VmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLlRlbXBvcmFyeURhdGEsaSksZSxuKX0pKX1zZXRTZXNzaW9uRGF0YVBhcmFtZXRlcihlLG4saSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldFZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5TZXNzaW9uRGF0YSxpKSxlLG4pfSkpfXJlbW92ZUNvbmZpZ0RhdGFQYXJhbWV0ZXIoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnJlbW92ZVZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5Db25maWdEYXRhKSxlKX0pKX1yZW1vdmVPSURDUHJvdmlkZXJNZXRhRGF0YVBhcmFtZXRlcihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucmVtb3ZlVmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLk9JRENQcm92aWRlck1ldGFEYXRhKSxlKX0pKX1yZW1vdmVUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnJlbW92ZVZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5UZW1wb3JhcnlEYXRhLG4pLGUpfSkpfXJlbW92ZVNlc3Npb25EYXRhUGFyYW1ldGVyKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnJlbW92ZVZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5TZXNzaW9uRGF0YSxuKSxlKX0pKX19Y29uc3QgcD17Y2xvY2tUb2xlcmFuY2U6MzAwLGVuYWJsZVBLQ0U6ITAscmVzcG9uc2VNb2RlOm4ucXVlcnksc2NvcGU6WyJvcGVuaWQiXSxzZW5kQ29va2llc0luUmVxdWVzdHM6ITAsdmFsaWRhdGVJRFRva2VuOiEwLHZhbGlkYXRlSURUb2tlbklzc3VlcjohMH07Y2xhc3MgZ3tjb25zdHJ1Y3Rvcigpe31pbml0aWFsaXplKGUsbixyLGkpe3ZhciBvLHMsYTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZS5jbGllbnRJRDtnLl9pbnN0YW5jZUlEP2cuX2luc3RhbmNlSUQrPTE6Zy5faW5zdGFuY2VJRD0wLGkmJihnLl9pbnN0YW5jZUlEPWkpLHRoaXMuX2RhdGFMYXllcj1uZXcgZih0PyJpbnN0YW5jZV8iLmNvbmNhdChnLl9pbnN0YW5jZUlELCItIikuY29uY2F0KHQpOiJpbnN0YW5jZV8iLmNvbmNhdChnLl9pbnN0YW5jZUlEKSxuKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmU9bmV3IGgodGhpcy5fZGF0YUxheWVyLHIpLGcuX2F1dGhlbnRpY2F0aW9uQ29yZT1uZXcgaCh0aGlzLl9kYXRhTGF5ZXIscikseWllbGQgdGhpcy5fZGF0YUxheWVyLnNldENvbmZpZ0RhdGEoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scCksZSkse3Njb3BlOlsuLi5udWxsIT09KG89cC5zY29wZSkmJnZvaWQgMCE9PW8/bzpbXSwuLi5udWxsIT09KGE9bnVsbD09PShzPWUuc2NvcGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmZpbHRlcigoZT0+e3ZhciB0O3JldHVybiEobnVsbD09PSh0PW51bGw9PXA/dm9pZCAwOnAuc2NvcGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmluY2x1ZGVzKGUpKX0pKSkmJnZvaWQgMCE9PWE/YTpbXV19KSl9KSl9Z2V0RGF0YUxheWVyKCl7cmV0dXJuIHRoaXMuX2RhdGFMYXllcn1nZXRJbnN0YW5jZUlEKCl7cmV0dXJuIGcuX2luc3RhbmNlSUR9Z2V0QXV0aG9yaXphdGlvblVSTFBhcmFtcyhlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1PYmplY3QuYXNzaWduKHt9LGUpO3JldHVybiBudWxsPT10fHxkZWxldGUgdC5mb3JjZUluaXQsKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIikpP3RoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRBdXRob3JpemF0aW9uVVJMUGFyYW1zKHQsbik6dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldE9JRENQcm92aWRlck1ldGFEYXRhKG51bGw9PWU/dm9pZCAwOmUuZm9yY2VJbml0KS50aGVuKCgoKT0+dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldEF1dGhvcml6YXRpb25VUkxQYXJhbXModCxuKSkpfSkpfWdldEF1dGhvcml6YXRpb25VUkwoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7fSxlKTtyZXR1cm4gbnVsbD09dHx8ZGVsZXRlIHQuZm9yY2VJbml0LCh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIpKT90aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0QXV0aG9yaXphdGlvblVSTCh0LG4pOnRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YShudWxsPT1lP3ZvaWQgMDplLmZvcmNlSW5pdCkudGhlbigoKCk9PnRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRBdXRob3JpemF0aW9uVVJMKHQsbikpKX0pKX1yZXF1ZXN0QWNjZXNzVG9rZW4oZSxuLHIsaSxvKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybih5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIpKT90aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUucmVxdWVzdEFjY2Vzc1Rva2VuKGUsbixyLGksbyk6dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldE9JRENQcm92aWRlck1ldGFEYXRhKCExKS50aGVuKCgoKT0+dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLnJlcXVlc3RBY2Nlc3NUb2tlbihlLG4scixpLG8pKSl9KSl9Z2V0U2lnbk91dFVSTChlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0U2lnbk91dFVSTChlKX0pKX1nZXRPSURDU2VydmljZUVuZHBvaW50cygpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRPSURDU2VydmljZUVuZHBvaW50cygpfSkpfWdldERlY29kZWRJRFRva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXREZWNvZGVkSURUb2tlbihlKX0pKX1nZXRJRFRva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRJRFRva2VuKGUpfSkpfWdldEJhc2ljVXNlckluZm8oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldEJhc2ljVXNlckluZm8oZSl9KSl9Z2V0Q3J5cHRvSGVscGVyKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldENyeXB0b0hlbHBlcigpfSkpfXJldm9rZUFjY2Vzc1Rva2VuKGUpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUucmV2b2tlQWNjZXNzVG9rZW4oZSl9cmVmcmVzaEFjY2Vzc1Rva2VuKGUpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUucmVmcmVzaEFjY2Vzc1Rva2VuKGUpfWdldEFjY2Vzc1Rva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRBY2Nlc3NUb2tlbihlKX0pKX1yZXF1ZXN0Q3VzdG9tR3JhbnQoZSx0KXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLnJlcXVlc3RDdXN0b21HcmFudChlLHQpfWlzQXV0aGVudGljYXRlZChlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuaXNBdXRoZW50aWNhdGVkKGUpfSkpfWdldFBLQ0VDb2RlKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldFBLQ0VDb2RlKGUsbil9KSl9c2V0UEtDRUNvZGUoZSxuLHIpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLnNldFBLQ0VDb2RlKGUsbixyKX0pKX1zdGF0aWMgaXNTaWduT3V0U3VjY2Vzc2Z1bChlKXtjb25zdCB0PW5ldyBVUkwoZSksbj10LnNlYXJjaFBhcmFtcy5nZXQoInN0YXRlIikscj1Cb29sZWFuKHQuc2VhcmNoUGFyYW1zLmdldCgiZXJyb3IiKSk7cmV0dXJuISFuJiYic2lnbl9vdXRfc3VjY2VzcyI9PT1uJiYhcn1zdGF0aWMgZGlkU2lnbk91dEZhaWwoZSl7Y29uc3QgdD1uZXcgVVJMKGUpLG49dC5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpLHI9Qm9vbGVhbih0LnNlYXJjaFBhcmFtcy5nZXQoImVycm9yIikpO3JldHVybiEhbiYmInNpZ25fb3V0X3N1Y2Nlc3MiPT09biYmcn11cGRhdGVDb25maWcoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUudXBkYXRlQ29uZmlnKGUpfSkpfXN0YXRpYyBjbGVhclVzZXJTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5jbGVhclVzZXJTZXNzaW9uRGF0YShlKX0pKX19Y29uc3Qgdj0iaW5pdCI7dmFyIHksbTshZnVuY3Rpb24oZSl7ZS5Mb2NhbFN0b3JhZ2U9ImxvY2FsU3RvcmFnZSIsZS5TZXNzaW9uU3RvcmFnZT0ic2Vzc2lvblN0b3JhZ2UiLGUuV2ViV29ya2VyPSJ3ZWJXb3JrZXIiLGUuQnJvd3Nlck1lbW9yeT0iYnJvd3Nlck1lbW9yeSJ9KHl8fCh5PXt9KSksZnVuY3Rpb24oZSl7ZS5TaWduSW49InNpZ24taW4iLGUuU2lnbk91dD0ic2lnbi1vdXQiLGUuSW5pdGlhbGl6ZT0iaW5pdGlhbGl6ZSIsZS5IdHRwUmVxdWVzdFN0YXJ0PSJodHRwLXJlcXVlc3Qtc3RhcnQiLGUuSHR0cFJlcXVlc3RGaW5pc2g9Imh0dHAtcmVxdWVzdC1maW5pc2giLGUuSHR0cFJlcXVlc3RFcnJvcj0iaHR0cC1yZXF1ZXN0LWVycm9yIixlLkh0dHBSZXF1ZXN0U3VjY2Vzcz0iaHR0cC1yZXF1ZXN0LXN1Y2Nlc3MiLGUuUmV2b2tlQWNjZXNzVG9rZW49InJldm9rZS1hY2Nlc3MtdG9rZW4iLGUuQ3VzdG9tR3JhbnQ9ImN1c3RvbS1ncmFudCIsZS5TaWduT3V0RmFpbGVkPSJzaWduLW91dC1mYWlsZWQifShtfHwobT17fSkpO2NvbnN0IHc9InByb21wdE5vbmVSZXF1ZXN0U2VudCIsXz0iZXJyb3IiLFM9ImVycm9yX2Rlc2NyaXB0aW9uIixiPSJjdXN0b21fZ3JhbnRfY29uZmlnIixrPSJBY2Nlc3MgdG9rZW4gaXMgaW52YWxpZCI7Y2xhc3MgRXtjb25zdHJ1Y3Rvcigpe31zdGF0aWMgZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKXtyZXR1cm57YmxvYjoobnVsbD09ZT92b2lkIDA6ZS5kYXRhKWluc3RhbmNlb2YgQmxvYj9udWxsPT1lP3ZvaWQgMDplLmRhdGE6bnVsbCxkYXRhOkpTT04uc3RyaW5naWZ5KG51bGwhPWU/ZToiIiksc3VjY2VzczohMH19c3RhdGljIGdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSl7cmV0dXJuKG51bGw9PWU/dm9pZCAwOmUudG9KU09OKSYmZGVsZXRlIGUudG9KU09OLHtlcnJvcjpKU09OLnN0cmluZ2lmeShudWxsIT1lP2U6IiIpLHN1Y2Nlc3M6ITF9fX1jbGFzcyBUe2NvbnN0cnVjdG9yKCl7fXN0YXRpYyByZW1vdmVBdXRob3JpemF0aW9uQ29kZSgpe2NvbnN0IGU9bG9jYXRpb24uaHJlZjtoaXN0b3J5LnB1c2hTdGF0ZSh7fSxkb2N1bWVudC50aXRsZSxlLnJlcGxhY2UoL1w/Y29kZT0uKiQvLCIiKSl9c3RhdGljIGdldFBLQ0UoZSl7dmFyIHQ7cmV0dXJuIG51bGwhPT0odD1zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGUpKSYmdm9pZCAwIT09dD90OiIifXN0YXRpYyBzZXRQS0NFKGUsdCl7c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShlLHQpfXN0YXRpYyBzZXRTaWduT3V0VVJMKGUsdCxuKXtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCIiLmNvbmNhdChzLCItaW5zdGFuY2VfIikuY29uY2F0KG4sIi0iKS5jb25jYXQodCksZSl9c3RhdGljIGdldFNpZ25PdXRVUkwoZSx0KXt2YXIgbjtyZXR1cm4gbnVsbCE9PShuPXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIiIuY29uY2F0KHMsIi1pbnN0YW5jZV8iKS5jb25jYXQodCwiLSIpLmNvbmNhdChlKSkpJiZ2b2lkIDAhPT1uP246IiJ9c3RhdGljIHJlbW92ZVBLQ0UoZSl7c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShlKX1zdGF0aWMgY2FuQ29udGludWVTaWduSW4oZSx0KXtyZXR1cm4hKGUmJiFULmhhc0Vycm9ySW5VUkwoKSYmIVQuaGFzQXV0aFNlYXJjaFBhcmFtc0luVVJMKCkmJiF0KX1zdGF0aWMgaXNJbml0aWFsaXplZFNpbGVudFNpZ25Jbigpe3JldHVybiBULmlzU2lsZW50U3RhdGVQcmVzZW50SW5VUkwoKX1zdGF0aWMgd2FzU2lnbkluQ2FsbGVkKCl7cmV0dXJuISghVC5oYXNFcnJvckluVVJMKCkmJiFULmhhc0F1dGhTZWFyY2hQYXJhbXNJblVSTCgpfHx0aGlzLmlzU2lsZW50U3RhdGVQcmVzZW50SW5VUkwoKSl9c3RhdGljIHdhc1NpbGVudFNpZ25JbkNhbGxlZCgpe2NvbnN0IGU9c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiaW5pdGlhbGl6ZWQtc2lsZW50LXNpZ24taW4iKSx0PWU/SlNPTi5wYXJzZShlKTpudWxsO3JldHVybiBCb29sZWFuKHQpfXN0YXRpYyBpc1NpZ25PdXRTdWNjZXNzZnVsKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihnLmlzU2lnbk91dFN1Y2Nlc3NmdWwod2luZG93LmxvY2F0aW9uLmhyZWYpKXtjb25zdCBlPXdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCI/IilbMF07cmV0dXJuIGhpc3RvcnkucHVzaFN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLGUpLHlpZWxkIGcuY2xlYXJVc2VyU2Vzc2lvbkRhdGEoKSwhMH1yZXR1cm4hMX0pKX1zdGF0aWMgZGlkU2lnbk91dEZhaWwoKXtpZihnLmRpZFNpZ25PdXRGYWlsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSl7Y29uc3QgZT1uZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSx0PWUuc2VhcmNoUGFyYW1zLmdldChfKSxuPWUuc2VhcmNoUGFyYW1zLmdldChTKSxyPXdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCI/IilbMF07cmV0dXJuIGhpc3RvcnkucHVzaFN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLHIpLHtkZXNjcmlwdGlvbjpudWxsIT1uP246IiIsZXJyb3I6bnVsbCE9dD90OiIifX1yZXR1cm4hMX1zdGF0aWMgaXNTaWxlbnRTdGF0ZVByZXNlbnRJblVSTCgpe3ZhciBlO2NvbnN0IHQ9bmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikuc2VhcmNoUGFyYW1zLmdldCgic3RhdGUiKTtyZXR1cm4gbnVsbCE9PShlPW51bGw9PXQ/dm9pZCAwOnQuaW5jbHVkZXMoInNpZ24taW4tc2lsZW50bHkiKSkmJnZvaWQgMCE9PWUmJmV9c3RhdGljIGhhc0F1dGhTZWFyY2hQYXJhbXNJblVSTCgpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp3aW5kb3cubG9jYXRpb24uc2VhcmNoO3JldHVybi9bPyZdY29kZT1bXiZdKy8udGVzdChlKX1zdGF0aWMgaGFzRXJyb3JJblVSTCgpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp3aW5kb3cubG9jYXRpb24uaHJlZjtjb25zdCB0PW5ldyBVUkwoZSk7cmV0dXJuISF0LnNlYXJjaFBhcmFtcy5nZXQoXykmJiJzaWduX291dF9zdWNjZXNzIiE9PXQuc2VhcmNoUGFyYW1zLmdldCgic3RhdGUiKX1zdGF0aWMgY2FuU2VuZFByb21wdE5vbmVSZXF1ZXN0KCl7Y29uc3QgZT1zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHcpO3JldHVybiEoZT9KU09OLnBhcnNlKGUpOm51bGwpfXN0YXRpYyBzZXRQcm9tcHROb25lUmVxdWVzdFNlbnQoZSl7c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh3LEpTT04uc3RyaW5naWZ5KGUpKX1zdGF0aWMgd2FpdFRpbGxQYWdlUmVkaXJlY3QodCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPW51bGwhPXQ/dDozZTM7eWllbGQgbmV3IFByb21pc2UoKHQ9PnNldFRpbWVvdXQodCwxZTMqZSkpKX0pKX19VC51bnRpbD1mdW5jdGlvbihlKXtsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06NTAwO2NvbnN0IG49cj0+ZSgpP3IoKTpzZXRUaW1lb3V0KCgoKT0+bihyKSksdCk7cmV0dXJuIG5ldyBQcm9taXNlKG4pfTtjbGFzcyBSe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQ9ZSx0aGlzLl9kYXRhTGF5ZXI9dGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0RGF0YUxheWVyKCksdGhpcy5fc3BhSGVscGVyPXQsdGhpcy5faW5zdGFuY2VJRD10aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRJbnN0YW5jZUlEKCksdGhpcy5faXNUb2tlblJlZnJlc2hpbmc9ITF9ZW5hYmxlSHR0cEhhbmRsZXIoZSl7KG51bGw9PWU/dm9pZCAwOmUuZW5hYmxlSGFuZGxlcikmJmUuZW5hYmxlSGFuZGxlcigpfWRpc2FibGVIdHRwSGFuZGxlcihlKXsobnVsbD09ZT92b2lkIDA6ZS5kaXNhYmxlSGFuZGxlcikmJmUuZGlzYWJsZUhhbmRsZXIoKX1pbml0aWFsaXplU2Vzc2lvbk1hbmdlcihlLHQsbixyLGkpe3ZhciBvLHMsYTtpLmluaXRpYWxpemUoZS5jbGllbnRJRCxudWxsIT09KG89dC5jaGVja1Nlc3Npb25JZnJhbWUpJiZ2b2lkIDAhPT1vP286IiIsbixudWxsIT09KHM9ZS5jaGVja1Nlc3Npb25JbnRlcnZhbCkmJnZvaWQgMCE9PXM/czozLG51bGwhPT0oYT1lLnNlc3Npb25SZWZyZXNoSW50ZXJ2YWwpJiZ2b2lkIDAhPT1hP2E6MzAwLGUuc2lnbkluUmVkaXJlY3RVUkwscil9cmVxdWVzdEN1c3RvbUdyYW50KHQsbil7dmFyIHIsaSxvO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7bGV0IHM9ITAsYT0hMTtpZihudWxsPT10P3ZvaWQgMDp0LnRva2VuRW5kcG9pbnQpe3M9ITE7Zm9yKGNvbnN0IGUgb2ZbLi4ubnVsbCE9PShpPW51bGw9PT0ocj15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpKXx8dm9pZCAwPT09cj92b2lkIDA6ci5yZXNvdXJjZVNlcnZlclVSTHMpJiZ2b2lkIDAhPT1pP2k6W10sdC5iYXNlVXJsXSlpZihlJiYobnVsbD09PShvPXQudG9rZW5FbmRwb2ludCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uc3RhcnRzV2l0aChlKSkpe2E9ITA7YnJlYWt9fXJldHVybiB0LnNob3VsZFJlcGxheUFmdGVyUmVmcmVzaCYmdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoYixKU09OLnN0cmluZ2lmeSh0KSksc3x8YT90aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5yZXF1ZXN0Q3VzdG9tR3JhbnQodCkudGhlbigocj0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBuJiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmbih0KSx0LnJldHVybnNTZXNzaW9uPyh0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCkpOnJ9KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTpQcm9taXNlLnJlamVjdChuZXcgYygiU1BBLU1BSU5fVEhSRUFEX0NMSUVOVC1SQ0ctSVYwMSIsIlJlcXVlc3QgdG8gdGhlIHByb3ZpZGVkIGVuZHBvaW50IGlzIHByb2hpYml0ZWQuIiwiUmVxdWVzdHMgY2FuIG9ubHkgYmUgc2VudCB0byByZXNvdXJjZSBzZXJ2ZXJzIHNwZWNpZmllZCBieSB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AgYXR0cmlidXRlIHdoaWxlIGluaXRpYWxpemluZyB0aGUgU0RLLiBUaGUgc3BlY2lmaWVkIHRva2VuIGVuZHBvaW50IGluIHRoaXMgcmVxdWVzdCBjYW5ub3QgYmUgZm91bmQgYW1vbmcgdGhlIGByZXNvdXJjZVNlcnZlclVSTHNgIikpfSkpfWdldEN1c3RvbUdyYW50Q29uZmlnRGF0YSgpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihiKTtyZXR1cm4gZT9KU09OLnBhcnNlKGUpOm51bGx9KSl9cmVmcmVzaEFjY2Vzc1Rva2VuKHQpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dHJ5e3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnJlZnJlc2hBY2Nlc3NUb2tlbigpO2NvbnN0IGU9eWllbGQgdGhpcy5nZXRDdXN0b21HcmFudENvbmZpZ0RhdGEoKTtyZXR1cm4gZSYmKHlpZWxkIHRoaXMucmVxdWVzdEN1c3RvbUdyYW50KGUsdCkpLHRoaXMuX3NwYUhlbHBlci5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHRoaXMpLHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldEJhc2ljVXNlckluZm8oKX1jYXRjaChlKXtjb25zdCB0PXt0eXBlOiJyZWZyZXNoLWFjY2Vzcy10b2tlbi1lcnJvciJ9O3JldHVybiB3aW5kb3cucG9zdE1lc3NhZ2UodCksUHJvbWlzZS5yZWplY3QoZSl9fSkpfXJldHJ5RmFpbGVkUmVxdWVzdHModCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXQuaHR0cENsaWVudCxuPXQucmVxdWVzdENvbmZpZyxyPXQuaXNIdHRwSGFuZGxlckVuYWJsZWQsaT10Lmh0dHBFcnJvckNhbGxiYWNrLG89dC5odHRwRmluaXNoQ2FsbGJhY2s7eWllbGQgVC51bnRpbCgoKCk9PiF0aGlzLl9pc1Rva2VuUmVmcmVzaGluZykpO3RyeXtjb25zdCB0PXlpZWxkIGUucmVxdWVzdChuKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHQpfWNhdGNoKGUpe3JldHVybiByJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKGUpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxQcm9taXNlLnJlamVjdChlKX19KSl9aHR0cFJlcXVlc3QodCxuLHIsaSxvLHMpe3ZhciBhLHU7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtsZXQgbD0hMTtjb25zdCBkPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRDb25maWdEYXRhKCk7Zm9yKGNvbnN0IGUgb2ZbLi4ubnVsbCE9PShhPXlpZWxkIG51bGw9PWQ/dm9pZCAwOmQucmVzb3VyY2VTZXJ2ZXJVUkxzKSYmdm9pZCAwIT09YT9hOltdLGQuYmFzZVVybF0paWYoZSYmKG51bGw9PT0odT1udWxsPT1uP3ZvaWQgMDpuLnVybCl8fHZvaWQgMD09PXU/dm9pZCAwOnUuc3RhcnRzV2l0aChlKSkpe2w9ITA7YnJlYWt9cmV0dXJuIGw/dC5yZXF1ZXN0KG4pLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKChhPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIGUsdSxsO2lmKDQwMT09PShudWxsPT09KGU9bnVsbD09YT92b2lkIDA6YS5yZXNwb25zZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RhdHVzKXx8IShudWxsPT1hP3ZvaWQgMDphLnJlc3BvbnNlKSl7aWYodGhpcy5faXNUb2tlblJlZnJlc2hpbmcpcmV0dXJuIHRoaXMucmV0cnlGYWlsZWRSZXF1ZXN0cyh7ZW5hYmxlUmV0cmlldmluZ1NpZ25PdXRVUkxGcm9tU2Vzc2lvbjpzLGh0dHBDbGllbnQ6dCxodHRwRXJyb3JDYWxsYmFjazppLGh0dHBGaW5pc2hDYWxsYmFjazpvLGlzSHR0cEhhbmRsZXJFbmFibGVkOnIscmVxdWVzdENvbmZpZzpufSk7bGV0IGU7dGhpcy5faXNUb2tlblJlZnJlc2hpbmc9ITA7dHJ5e2U9eWllbGQgdGhpcy5yZWZyZXNoQWNjZXNzVG9rZW4ocyksdGhpcy5faXNUb2tlblJlZnJlc2hpbmc9ITF9Y2F0Y2goZSl7dGhyb3cgdGhpcy5faXNUb2tlblJlZnJlc2hpbmc9ITEsciYmKCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoeWllbGQgaShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYSkse2NvZGU6a30pKSksImZ1bmN0aW9uIj09dHlwZW9mIG8mJm8oKSksbmV3IGMoIlNQQS1BVVRIX0hFTFBFUi1IUi1TRTAxIixudWxsIT09KHU9bnVsbD09ZT92b2lkIDA6ZS5uYW1lKSYmdm9pZCAwIT09dT91OiJSZWZyZXNoIHRva2VuIHJlcXVlc3QgZmFpbGVkLiIsbnVsbCE9PShsPW51bGw9PWU/dm9pZCAwOmUubWVzc2FnZSkmJnZvaWQgMCE9PWw/bDoiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBmb2xsb3dpbmcgYSA0MDEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyLiIpfWlmKGUpdHJ5e2NvbnN0IGU9eWllbGQgdC5yZXF1ZXN0KG4pO3JldHVybiBQcm9taXNlLnJlc29sdmUoZSl9Y2F0Y2goZSl7cmV0dXJuIHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkoZSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLFByb21pc2UucmVqZWN0KGUpfX1yZXR1cm4gciYmKCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoeWllbGQgaShhKSksImZ1bmN0aW9uIj09dHlwZW9mIG8mJm8oKSksUHJvbWlzZS5yZWplY3QoYSl9KSkpKTpQcm9taXNlLnJlamVjdChuZXcgYygiU1BBLUFVVEhfSEVMUEVSLUhSLUlWMDIiLCJSZXF1ZXN0IHRvIHRoZSBwcm92aWRlZCBlbmRwb2ludCBpcyBwcm9oaWJpdGVkLiIsIlJlcXVlc3RzIGNhbiBvbmx5IGJlIHNlbnQgdG8gcmVzb3VyY2Ugc2VydmVycyBzcGVjaWZpZWQgYnkgdGhlIGByZXNvdXJjZVNlcnZlclVSTHNgIGF0dHJpYnV0ZSB3aGlsZSBpbml0aWFsaXppbmcgdGhlIFNESy4gVGhlIHNwZWNpZmllZCBlbmRwb2ludCBpbiB0aGlzIHJlcXVlc3QgY2Fubm90IGJlIGZvdW5kIGFtb25nIHRoZSBgcmVzb3VyY2VTZXJ2ZXJVUkxzYCIpKX0pKX1odHRwUmVxdWVzdEFsbCh0LG4scixpLG8pe3ZhciBzLGEsdTtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2xldCBsPSEwO2NvbnN0IGQ9eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKTtmb3IoY29uc3QgZSBvZiB0KXtsZXQgdD0hMTtmb3IoY29uc3QgbiBvZlsuLi5udWxsIT09KGE9bnVsbD09PShzPXlpZWxkIGQpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnJlc291cmNlU2VydmVyVVJMcykmJnZvaWQgMCE9PWE/YTpbXSxkLmJhc2VVcmxdKWlmKG4mJihudWxsPT09KHU9ZS51cmwpfHx2b2lkIDA9PT11P3ZvaWQgMDp1LnN0YXJ0c1dpdGgobikpKXt0PSEwO2JyZWFrfWlmKCF0KXtsPSExO2JyZWFrfX1jb25zdCBoPVtdO2lmKGwpcmV0dXJuIHQuZm9yRWFjaCgoZT0+e2gucHVzaChuLnJlcXVlc3QoZSkpfSkpLChudWxsPT1uP3ZvaWQgMDpuLmFsbCkmJm4uYWxsKGgpLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKCh0PT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIHMsYSx1O2lmKDQwMT09PShudWxsPT09KHM9bnVsbD09dD92b2lkIDA6dC5yZXNwb25zZSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuc3RhdHVzKXx8IShudWxsPT10P3ZvaWQgMDp0LnJlc3BvbnNlKSl7bGV0IHM7dHJ5e3M9eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQucmVmcmVzaEFjY2Vzc1Rva2VuKCl9Y2F0Y2goZSl7dGhyb3cgciYmKCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoeWllbGQgaShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse2NvZGU6a30pKSksImZ1bmN0aW9uIj09dHlwZW9mIG8mJm8oKSksbmV3IGMoIlNQQS1BVVRIX0hFTFBFUi1IUkEtU0UwMSIsbnVsbCE9PShhPW51bGw9PWU/dm9pZCAwOmUubmFtZSkmJnZvaWQgMCE9PWE/YToiUmVmcmVzaCB0b2tlbiByZXF1ZXN0IGZhaWxlZC4iLG51bGwhPT0odT1udWxsPT1lP3ZvaWQgMDplLm1lc3NhZ2UpJiZ2b2lkIDAhPT11P3U6IkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gZm9sbG93aW5nIGEgNDAxIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4iKX1pZihzKXJldHVybiBuLmFsbCYmbi5hbGwoaCkudGhlbigoZT0+UHJvbWlzZS5yZXNvbHZlKGUpKSkuY2F0Y2goKHQ9PmUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gciYmKCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoeWllbGQgaSh0KSksImZ1bmN0aW9uIj09dHlwZW9mIG8mJm8oKSksUHJvbWlzZS5yZWplY3QodCl9KSkpKX1yZXR1cm4gciYmKCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoeWllbGQgaSh0KSksImZ1bmN0aW9uIj09dHlwZW9mIG8mJm8oKSksUHJvbWlzZS5yZWplY3QodCl9KSkpKTt0aHJvdyBuZXcgYygiU1BBLUFVVEhfSEVMUEVSLUhSQS1JVjAyIiwiUmVxdWVzdCB0byB0aGUgcHJvdmlkZWQgZW5kcG9pbnQgaXMgcHJvaGliaXRlZC4iLCJSZXF1ZXN0cyBjYW4gb25seSBiZSBzZW50IHRvIHJlc291cmNlIHNlcnZlcnMgc3BlY2lmaWVkIGJ5IHRoZSBgcmVzb3VyY2VTZXJ2ZXJVUkxzYCBhdHRyaWJ1dGUgd2hpbGUgaW5pdGlhbGl6aW5nIHRoZSBTREsuIFRoZSBzcGVjaWZpZWQgZW5kcG9pbnQgaW4gdGhpcyByZXF1ZXN0IGNhbm5vdCBiZSBmb3VuZCBhbW9uZyB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AiKX0pKX1yZXF1ZXN0QWNjZXNzVG9rZW4odCxuLHIsaSxvLHMpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgYT15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpO2lmKGEuc3RvcmFnZT09PXkuQnJvd3Nlck1lbW9yeSYmYS5lbmFibGVQS0NFJiZuKXtjb25zdCBlPVQuZ2V0UEtDRSh1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0obikpO3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnNldFBLQ0VDb2RlKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShuKSxlKX1lbHNlIGEuc3RvcmFnZT09PXkuV2ViV29ya2VyJiZpJiYoeWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuc2V0UEtDRUNvZGUoaSxudWxsIT1vP286IiIpKTtyZXR1cm4gdD90aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5yZXF1ZXN0QWNjZXNzVG9rZW4odCxudWxsIT1uP246IiIsbnVsbCE9bz9vOiIiLHZvaWQgMCxzKS50aGVuKCgoKT0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLnN0b3JhZ2UhPT15LldlYldvcmtlcj8oVC5zZXRTaWduT3V0VVJMKHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldFNpZ25PdXRVUkwoKSxhLmNsaWVudElELHRoaXMuX2luc3RhbmNlSUQpLHRoaXMuX3NwYUhlbHBlciYmKHRoaXMuX3NwYUhlbHBlci5jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQoKSx0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSksciYmImZ1bmN0aW9uIj09dHlwZW9mIHImJmEuZW5hYmxlT0lEQ1Nlc3Npb25NYW5hZ2VtZW50JiZyKCkpOnRoaXMuX3NwYUhlbHBlciYmdGhpcy5fc3BhSGVscGVyLnJlZnJlc2hBY2Nlc3NUb2tlbkF1dG9tYXRpY2FsbHkodGhpcyksdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0QmFzaWNVc2VySW5mbygpfSkpKSkuY2F0Y2goKGU9PlByb21pc2UucmVqZWN0KGUpKSk6UHJvbWlzZS5yZWplY3QobmV3IGMoIlNQQS1BVVRIX0hFTFBFUi1SQVQxLU5GMDEiLCJObyBhdXRob3JpemF0aW9uIGNvZGUuIiwiTm8gYXV0aG9yaXphdGlvbiBjb2RlIHdhcyBmb3VuZC4iKSl9KSl9dHJ5U2lnbkluU2lsZW50bHkodCxuLHIsaSl7dmFyIG87cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihULmlzSW5pdGlhbGl6ZWRTaWxlbnRTaWduSW4oKSlyZXR1cm4geWllbGQgci5yZWNlaXZlUHJvbXB0Tm9uZVJlc3BvbnNlKCksUHJvbWlzZS5yZXNvbHZlKHthbGxvd2VkU2NvcGVzOiIiLGRpc3BsYXlOYW1lOiIiLGVtYWlsOiIiLHNlc3Npb25TdGF0ZToiIixzdWI6IiIsdGVuYW50RG9tYWluOiIiLHVzZXJuYW1lOiIifSk7Y29uc3Qgcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicnBJRnJhbWUiKSxhPW51bGw9PT0obz1udWxsPT1zP3ZvaWQgMDpzLmNvbnRlbnREb2N1bWVudCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZ2V0RWxlbWVudEJ5SWQoInByb21wdE5vbmVJRnJhbWUiKTt0cnl7Y29uc3QgZT15aWVsZCB0KGkpO2Euc3JjPWV9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfXJldHVybiBuZXcgUHJvbWlzZSgoKHQscik9Pntjb25zdCBpPXNldFRpbWVvdXQoKCgpPT57dCghMSl9KSwxZTQpLG89cz0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3ZhciBlLGEsYyx1O2NvbnN0IGw9cy5kYXRhOyJjaGVja19zZXNzaW9uX3NpZ25lZF9vdXQiPT0obnVsbD09bD92b2lkIDA6bC50eXBlKSYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixvKSxjbGVhclRpbWVvdXQoaSksdCghMSkpLCJjaGVja19zZXNzaW9uX3NpZ25lZF9pbiI9PShudWxsPT1sP3ZvaWQgMDpsLnR5cGUpJiYobnVsbD09PShlPW51bGw9PWw/dm9pZCAwOmwuZGF0YSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY29kZSkmJm4obnVsbD09PShhPW51bGw9PWw/dm9pZCAwOmwuZGF0YSl8fHZvaWQgMD09PWE/dm9pZCAwOmEuY29kZSxudWxsPT09KGM9bnVsbD09bD92b2lkIDA6bC5kYXRhKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5zZXNzaW9uU3RhdGUsbnVsbD09PSh1PW51bGw9PWw/dm9pZCAwOmwuZGF0YSl8fHZvaWQgMD09PXU/dm9pZCAwOnUuc3RhdGUpLnRoZW4oKGU9Pnt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsbyksdChlKX0pKS5jYXRjaCgoZT0+e3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixvKSxyKGUpfSkpLmZpbmFsbHkoKCgpPT57Y2xlYXJUaW1lb3V0KGkpfSkpfSkpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixvKX0pKX0pKX1oYW5kbGVTaWduSW4odCxuLHIpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpO2lmKHlpZWxkIHQoKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHthbGxvd2VkU2NvcGVzOiIiLGRpc3BsYXlOYW1lOiIiLGVtYWlsOiIiLHNlc3Npb25TdGF0ZToiIixzdWI6IiIsdGVuYW50RG9tYWluOiIiLHVzZXJuYW1lOiIifSk7aWYoZS5zdG9yYWdlIT09eS5XZWJXb3JrZXImJih5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5pc0F1dGhlbnRpY2F0ZWQoKSkpcmV0dXJuIHRoaXMuX3NwYUhlbHBlci5jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQoKSx0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSxlLmVuYWJsZU9JRENTZXNzaW9uTWFuYWdlbWVudCYmbigpLFByb21pc2UucmVzb2x2ZSh5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCkpO2NvbnN0IGk9bmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikuc2VhcmNoUGFyYW1zLmdldChfKSxvPW5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoUyk7aWYoaSl7Y29uc3QgZT1uZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTt0aHJvdyBlLnNlYXJjaFBhcmFtcy5kZWxldGUoXyksZS5zZWFyY2hQYXJhbXMuZGVsZXRlKFMpLGhpc3RvcnkucHVzaFN0YXRlKG51bGwsZG9jdW1lbnQudGl0bGUsZS50b1N0cmluZygpKSxuZXcgYygiU1BBLUFVVEhfSEVMUEVSLVNJLVNFMDEiLGksbnVsbCE9bz9vOiIiKX1pZihlLnN0b3JhZ2U9PT15LldlYldvcmtlciYmcil7Y29uc3QgZT15aWVsZCByKCk7aWYoZSlyZXR1cm4gZX19KSl9YXR0YWNoVG9rZW5Ub1JlcXVlc3RDb25maWcodCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPU9iamVjdC5hc3NpZ24oe2F0dGFjaFRva2VuOiEwfSx0KTtlLmF0dGFjaFRva2VuJiYoZS5zaG91bGRBdHRhY2hJRFBBY2Nlc3NUb2tlbj90LmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQuaGVhZGVycykse0F1dGhvcml6YXRpb246IkJlYXJlciAiLmNvbmNhdCh5aWVsZCB0aGlzLmdldElEUEFjY2Vzc1Rva2VuKCkpfSk6dC5oZWFkZXJzPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0LmhlYWRlcnMpLHtBdXRob3JpemF0aW9uOiJCZWFyZXIgIi5jb25jYXQoeWllbGQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpKX0pKX0pKX1nZXRCYXNpY1VzZXJJbmZvKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0QmFzaWNVc2VySW5mbygpfSkpfWdldERlY29kZWRJRFRva2VuKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0RGVjb2RlZElEVG9rZW4oKX0pKX1nZXREZWNvZGVkSURQSURUb2tlbigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldERlY29kZWRJRFRva2VuKCl9KSl9Z2V0Q3J5cHRvSGVscGVyKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0Q3J5cHRvSGVscGVyKCl9KSl9Z2V0SURUb2tlbigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldElEVG9rZW4oKX0pKX1nZXRPSURDU2VydmljZUVuZHBvaW50cygpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCl9KSl9Z2V0QWNjZXNzVG9rZW4oKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRBY2Nlc3NUb2tlbigpfSkpfWdldElEUEFjY2Vzc1Rva2VuKCl7dmFyIHQ7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gbnVsbD09PSh0PXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YSgpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5hY2Nlc3NfdG9rZW59KSl9Z2V0RGF0YUxheWVyKCl7cmV0dXJuIHRoaXMuX2RhdGFMYXllcn1pc0F1dGhlbnRpY2F0ZWQoKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5pc0F1dGhlbnRpY2F0ZWQoKX0pKX19Y2xhc3MgQXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudD1lLHRoaXMuX2RhdGFMYXllcj10aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXREYXRhTGF5ZXIoKX1yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHQpe3ZhciBuLHI7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKG51bGwhPT0ocj1udWxsPT09KG49eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucGVyaW9kaWNUb2tlblJlZnJlc2gpJiZ2b2lkIDAhPT1yJiZyKSlyZXR1cm47Y29uc3Qgbz15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoKTtpZihvLnJlZnJlc2hfdG9rZW4pe2NvbnN0IG49cGFyc2VJbnQoby5leHBpcmVzX2luKSxyPXNldFRpbWVvdXQoKCgpPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdC5yZWZyZXNoQWNjZXNzVG9rZW4oKX0pKSksMWUzKihuPD0xMD9uOm4tMTApKTt5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihpLEpTT04uc3RyaW5naWZ5KHIpKX19KSl9Z2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGkpKT9KU09OLnBhcnNlKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGkpKTotMX0pKX1jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQodCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0KXJldHVybiB2b2lkIGNsZWFyVGltZW91dCh0KTtjb25zdCBlPXlpZWxkIHRoaXMuZ2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpOy0xIT09ZSYmY2xlYXJUaW1lb3V0KGUpfSkpfX12YXIgQz0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIEQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX1mdW5jdGlvbiBQKGUpe2lmKGUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbixyLmdldD9yOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlW25dfX0pfSkpLHR9dmFyIEk9e2V4cG9ydHM6e319LE89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLHI9MDtyPG4ubGVuZ3RoO3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gZS5hcHBseSh0LG4pfX0sVT1PLEw9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBIKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpfWZ1bmN0aW9uIE0oZSl7cmV0dXJuIHZvaWQgMD09PWV9ZnVuY3Rpb24gaihlKXtyZXR1cm4iW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09TC5jYWxsKGUpfWZ1bmN0aW9uIHEoZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9ZnVuY3Rpb24gTihlKXtpZigiW29iamVjdCBPYmplY3RdIiE9PUwuY2FsbChlKSlyZXR1cm4hMTt2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT10fHx0PT09T2JqZWN0LnByb3RvdHlwZX1mdW5jdGlvbiB4KGUpe3JldHVybiJbb2JqZWN0IEZ1bmN0aW9uXSI9PT1MLmNhbGwoZSl9ZnVuY3Rpb24gSyhlLHQpe2lmKG51bGwhPWUpaWYoIm9iamVjdCIhPXR5cGVvZiBlJiYoZT1bZV0pLEgoZSkpZm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKXQuY2FsbChudWxsLGVbbl0sbixlKTtlbHNlIGZvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmNhbGwobnVsbCxlW2ldLGksZSl9dmFyIEI9e2lzQXJyYXk6SCxpc0FycmF5QnVmZmVyOmosaXNCdWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lJiYhTShlKSYmbnVsbCE9PWUuY29uc3RydWN0b3ImJiFNKGUuY29uc3RydWN0b3IpJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihlKX0saXNGb3JtRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4iW29iamVjdCBGb3JtRGF0YV0iPT09TC5jYWxsKGUpfSxpc0FycmF5QnVmZmVyVmlldzpmdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZBcnJheUJ1ZmZlci5pc1ZpZXc/QXJyYXlCdWZmZXIuaXNWaWV3KGUpOmUmJmUuYnVmZmVyJiZqKGUuYnVmZmVyKX0saXNTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlfSxpc051bWJlcjpmdW5jdGlvbihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGV9LGlzT2JqZWN0OnEsaXNQbGFpbk9iamVjdDpOLGlzVW5kZWZpbmVkOk0saXNEYXRlOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IERhdGVdIj09PUwuY2FsbChlKX0saXNGaWxlOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEZpbGVdIj09PUwuY2FsbChlKX0saXNCbG9iOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEJsb2JdIj09PUwuY2FsbChlKX0saXNGdW5jdGlvbjp4LGlzU3RyZWFtOmZ1bmN0aW9uKGUpe3JldHVybiBxKGUpJiZ4KGUucGlwZSl9LGlzVVJMU2VhcmNoUGFyYW1zOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IFVSTFNlYXJjaFBhcmFtc10iPT09TC5jYWxsKGUpfSxpc1N0YW5kYXJkQnJvd3NlckVudjpmdW5jdGlvbigpe3JldHVybigidW5kZWZpbmVkIj09dHlwZW9mIG5hdmlnYXRvcnx8IlJlYWN0TmF0aXZlIiE9PW5hdmlnYXRvci5wcm9kdWN0JiYiTmF0aXZlU2NyaXB0IiE9PW5hdmlnYXRvci5wcm9kdWN0JiYiTlMiIT09bmF2aWdhdG9yLnByb2R1Y3QpJiYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQpfSxmb3JFYWNoOkssbWVyZ2U6ZnVuY3Rpb24gZSgpe3ZhciB0PXt9O2Z1bmN0aW9uIG4obixyKXtOKHRbcl0pJiZOKG4pP3Rbcl09ZSh0W3JdLG4pOk4obik/dFtyXT1lKHt9LG4pOkgobik/dFtyXT1uLnNsaWNlKCk6dFtyXT1ufWZvcih2YXIgcj0wLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKUsoYXJndW1lbnRzW3JdLG4pO3JldHVybiB0fSxleHRlbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBLKHQsKGZ1bmN0aW9uKHQscil7ZVtyXT1uJiYiZnVuY3Rpb24iPT10eXBlb2YgdD9VKHQsbik6dH0pKSxlfSx0cmltOmZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0/ZS50cmltKCk6ZS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIil9LHN0cmlwQk9NOmZ1bmN0aW9uKGUpe3JldHVybiA2NTI3OT09PWUuY2hhckNvZGVBdCgwKSYmKGU9ZS5zbGljZSgxKSksZX19LEo9QjtmdW5jdGlvbiBGKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSkucmVwbGFjZSgvJTNBL2dpLCI6IikucmVwbGFjZSgvJTI0L2csIiQiKS5yZXBsYWNlKC8lMkMvZ2ksIiwiKS5yZXBsYWNlKC8lMjAvZywiKyIpLnJlcGxhY2UoLyU1Qi9naSwiWyIpLnJlcGxhY2UoLyU1RC9naSwiXSIpfXZhciBXPWZ1bmN0aW9uKGUsdCxuKXtpZighdClyZXR1cm4gZTt2YXIgcjtpZihuKXI9bih0KTtlbHNlIGlmKEouaXNVUkxTZWFyY2hQYXJhbXModCkpcj10LnRvU3RyaW5nKCk7ZWxzZXt2YXIgaT1bXTtKLmZvckVhY2godCwoZnVuY3Rpb24oZSx0KXtudWxsIT1lJiYoSi5pc0FycmF5KGUpP3QrPSJbXSI6ZT1bZV0sSi5mb3JFYWNoKGUsKGZ1bmN0aW9uKGUpe0ouaXNEYXRlKGUpP2U9ZS50b0lTT1N0cmluZygpOkouaXNPYmplY3QoZSkmJihlPUpTT04uc3RyaW5naWZ5KGUpKSxpLnB1c2goRih0KSsiPSIrRihlKSl9KSkpfSkpLHI9aS5qb2luKCImIil9aWYocil7dmFyIG89ZS5pbmRleE9mKCIjIik7LTEhPT1vJiYoZT1lLnNsaWNlKDAsbykpLGUrPSgtMT09PWUuaW5kZXhPZigiPyIpPyI/IjoiJiIpK3J9cmV0dXJuIGV9LHo9QjtmdW5jdGlvbiBZKCl7dGhpcy5oYW5kbGVycz1bXX1ZLnByb3RvdHlwZS51c2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmhhbmRsZXJzLnB1c2goe2Z1bGZpbGxlZDplLHJlamVjdGVkOnQsc3luY2hyb25vdXM6ISFuJiZuLnN5bmNocm9ub3VzLHJ1bldoZW46bj9uLnJ1bldoZW46bnVsbH0pLHRoaXMuaGFuZGxlcnMubGVuZ3RoLTF9LFkucHJvdG90eXBlLmVqZWN0PWZ1bmN0aW9uKGUpe3RoaXMuaGFuZGxlcnNbZV0mJih0aGlzLmhhbmRsZXJzW2VdPW51bGwpfSxZLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUpe3ouZm9yRWFjaCh0aGlzLmhhbmRsZXJzLChmdW5jdGlvbih0KXtudWxsIT09dCYmZSh0KX0pKX07dmFyIFY9WSxHPSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e307ZnVuY3Rpb24gWCgpe3Rocm93IG5ldyBFcnJvcigic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uICQoKXt0aHJvdyBuZXcgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfXZhciBaPVgsUT0kO2Z1bmN0aW9uIGVlKGUpe2lmKFo9PT1zZXRUaW1lb3V0KXJldHVybiBzZXRUaW1lb3V0KGUsMCk7aWYoKFo9PT1YfHwhWikmJnNldFRpbWVvdXQpcmV0dXJuIFo9c2V0VGltZW91dCxzZXRUaW1lb3V0KGUsMCk7dHJ5e3JldHVybiBaKGUsMCl9Y2F0Y2godCl7dHJ5e3JldHVybiBaLmNhbGwobnVsbCxlLDApfWNhdGNoKHQpe3JldHVybiBaLmNhbGwodGhpcyxlLDApfX19ImZ1bmN0aW9uIj09dHlwZW9mIEcuc2V0VGltZW91dCYmKFo9c2V0VGltZW91dCksImZ1bmN0aW9uIj09dHlwZW9mIEcuY2xlYXJUaW1lb3V0JiYoUT1jbGVhclRpbWVvdXQpO3ZhciB0ZSxuZT1bXSxyZT0hMSxpZT0tMTtmdW5jdGlvbiBvZSgpe3JlJiZ0ZSYmKHJlPSExLHRlLmxlbmd0aD9uZT10ZS5jb25jYXQobmUpOmllPS0xLG5lLmxlbmd0aCYmc2UoKSl9ZnVuY3Rpb24gc2UoKXtpZighcmUpe3ZhciBlPWVlKG9lKTtyZT0hMDtmb3IodmFyIHQ9bmUubGVuZ3RoO3Q7KXtmb3IodGU9bmUsbmU9W107KytpZTx0Oyl0ZSYmdGVbaWVdLnJ1bigpO2llPS0xLHQ9bmUubGVuZ3RofXRlPW51bGwscmU9ITEsZnVuY3Rpb24oZSl7aWYoUT09PWNsZWFyVGltZW91dClyZXR1cm4gY2xlYXJUaW1lb3V0KGUpO2lmKChRPT09JHx8IVEpJiZjbGVhclRpbWVvdXQpcmV0dXJuIFE9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChlKTt0cnl7UShlKX1jYXRjaCh0KXt0cnl7cmV0dXJuIFEuY2FsbChudWxsLGUpfWNhdGNoKHQpe3JldHVybiBRLmNhbGwodGhpcyxlKX19fShlKX19ZnVuY3Rpb24gYWUoZSx0KXt0aGlzLmZ1bj1lLHRoaXMuYXJyYXk9dH1hZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX07ZnVuY3Rpb24gY2UoKXt9dmFyIHVlPWNlLGxlPWNlLGRlPWNlLGhlPWNlLGZlPWNlLHBlPWNlLGdlPWNlO3ZhciB2ZT1HLnBlcmZvcm1hbmNlfHx7fSx5ZT12ZS5ub3d8fHZlLm1vek5vd3x8dmUubXNOb3d8fHZlLm9Ob3d8fHZlLndlYmtpdE5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIG1lPW5ldyBEYXRlO3ZhciB3ZT17bmV4dFRpY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTtuZS5wdXNoKG5ldyBhZShlLHQpKSwxIT09bmUubGVuZ3RofHxyZXx8ZWUoc2UpfSx0aXRsZToiYnJvd3NlciIsYnJvd3NlcjohMCxlbnY6e30sYXJndjpbXSx2ZXJzaW9uOiIiLHZlcnNpb25zOnt9LG9uOnVlLGFkZExpc3RlbmVyOmxlLG9uY2U6ZGUsb2ZmOmhlLHJlbW92ZUxpc3RlbmVyOmZlLHJlbW92ZUFsbExpc3RlbmVyczpwZSxlbWl0OmdlLGJpbmRpbmc6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpfSxjd2Q6ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LGNoZGlyOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIil9LHVtYXNrOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGhydGltZTpmdW5jdGlvbihlKXt2YXIgdD0uMDAxKnllLmNhbGwodmUpLG49TWF0aC5mbG9vcih0KSxyPU1hdGguZmxvb3IodCUxKjFlOSk7cmV0dXJuIGUmJihuLT1lWzBdLChyLT1lWzFdKTwwJiYobi0tLHIrPTFlOSkpLFtuLHJdfSxwbGF0Zm9ybToiYnJvd3NlciIscmVsZWFzZTp7fSxjb25maWc6e30sdXB0aW1lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlLW1lKS8xZTN9fSxfZT13ZSxTZT1CLGJlPWZ1bmN0aW9uKGUsdCxuLHIsaSl7cmV0dXJuIGUuY29uZmlnPXQsbiYmKGUuY29kZT1uKSxlLnJlcXVlc3Q9cixlLnJlc3BvbnNlPWksZS5pc0F4aW9zRXJyb3I9ITAsZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGUsc3RhdHVzOnRoaXMucmVzcG9uc2UmJnRoaXMucmVzcG9uc2Uuc3RhdHVzP3RoaXMucmVzcG9uc2Uuc3RhdHVzOm51bGx9fSxlfSxrZT17c2lsZW50SlNPTlBhcnNpbmc6ITAsZm9yY2VkSlNPTlBhcnNpbmc6ITAsY2xhcmlmeVRpbWVvdXRFcnJvcjohMX0sRWU9YmUsVGU9ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz1uZXcgRXJyb3IoZSk7cmV0dXJuIEVlKG8sdCxuLHIsaSl9LFJlPVRlLEFlPUIsQ2U9QWUuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKT97d3JpdGU6ZnVuY3Rpb24oZSx0LG4scixpLG8pe3ZhciBzPVtdO3MucHVzaChlKyI9IitlbmNvZGVVUklDb21wb25lbnQodCkpLEFlLmlzTnVtYmVyKG4pJiZzLnB1c2goImV4cGlyZXM9IituZXcgRGF0ZShuKS50b0dNVFN0cmluZygpKSxBZS5pc1N0cmluZyhyKSYmcy5wdXNoKCJwYXRoPSIrciksQWUuaXNTdHJpbmcoaSkmJnMucHVzaCgiZG9tYWluPSIraSksITA9PT1vJiZzLnB1c2goInNlY3VyZSIpLGRvY3VtZW50LmNvb2tpZT1zLmpvaW4oIjsgIil9LHJlYWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoIihefDtcXHMqKSgiK2UrIik9KFteO10qKSIpKTtyZXR1cm4gdD9kZWNvZGVVUklDb21wb25lbnQodFszXSk6bnVsbH0scmVtb3ZlOmZ1bmN0aW9uKGUpe3RoaXMud3JpdGUoZSwiIixEYXRlLm5vdygpLTg2NGU1KX19Ont3cml0ZTpmdW5jdGlvbigpe30scmVhZDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxyZW1vdmU6ZnVuY3Rpb24oKXt9fSxEZT1mdW5jdGlvbihlKXtyZXR1cm4vXihbYS16XVthLXpcZCtcLS5dKjopP1wvXC8vaS50ZXN0KGUpfSxQZT1mdW5jdGlvbihlLHQpe3JldHVybiB0P2UucmVwbGFjZSgvXC8rJC8sIiIpKyIvIit0LnJlcGxhY2UoL15cLysvLCIiKTplfSxJZT1CLE9lPVsiYWdlIiwiYXV0aG9yaXphdGlvbiIsImNvbnRlbnQtbGVuZ3RoIiwiY29udGVudC10eXBlIiwiZXRhZyIsImV4cGlyZXMiLCJmcm9tIiwiaG9zdCIsImlmLW1vZGlmaWVkLXNpbmNlIiwiaWYtdW5tb2RpZmllZC1zaW5jZSIsImxhc3QtbW9kaWZpZWQiLCJsb2NhdGlvbiIsIm1heC1mb3J3YXJkcyIsInByb3h5LWF1dGhvcml6YXRpb24iLCJyZWZlcmVyIiwicmV0cnktYWZ0ZXIiLCJ1c2VyLWFnZW50Il0sVWU9QixMZT1VZS5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uKCl7dmFyIGUsdD0vKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO2Z1bmN0aW9uIHIoZSl7dmFyIHI9ZTtyZXR1cm4gdCYmKG4uc2V0QXR0cmlidXRlKCJocmVmIixyKSxyPW4uaHJlZiksbi5zZXRBdHRyaWJ1dGUoImhyZWYiLHIpLHtocmVmOm4uaHJlZixwcm90b2NvbDpuLnByb3RvY29sP24ucHJvdG9jb2wucmVwbGFjZSgvOiQvLCIiKToiIixob3N0Om4uaG9zdCxzZWFyY2g6bi5zZWFyY2g/bi5zZWFyY2gucmVwbGFjZSgvXlw/LywiIik6IiIsaGFzaDpuLmhhc2g/bi5oYXNoLnJlcGxhY2UoL14jLywiIik6IiIsaG9zdG5hbWU6bi5ob3N0bmFtZSxwb3J0Om4ucG9ydCxwYXRobmFtZToiLyI9PT1uLnBhdGhuYW1lLmNoYXJBdCgwKT9uLnBhdGhuYW1lOiIvIituLnBhdGhuYW1lfX1yZXR1cm4gZT1yKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSxmdW5jdGlvbih0KXt2YXIgbj1VZS5pc1N0cmluZyh0KT9yKHQpOnQ7cmV0dXJuIG4ucHJvdG9jb2w9PT1lLnByb3RvY29sJiZuLmhvc3Q9PT1lLmhvc3R9fSgpOmZ1bmN0aW9uKCl7cmV0dXJuITB9O2Z1bmN0aW9uIEhlKGUpe3RoaXMubWVzc2FnZT1lfUhlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJDYW5jZWwiKyh0aGlzLm1lc3NhZ2U/IjogIit0aGlzLm1lc3NhZ2U6IiIpfSxIZS5wcm90b3R5cGUuX19DQU5DRUxfXz0hMDt2YXIgTWU9SGUsamU9QixxZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9bi5jb25maWcudmFsaWRhdGVTdGF0dXM7bi5zdGF0dXMmJnImJiFyKG4uc3RhdHVzKT90KFJlKCJSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICIrbi5zdGF0dXMsbi5jb25maWcsbnVsbCxuLnJlcXVlc3QsbikpOmUobil9LE5lPUNlLHhlPVcsS2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmIURlKHQpP1BlKGUsdCk6dH0sQmU9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9e307cmV0dXJuIGU/KEllLmZvckVhY2goZS5zcGxpdCgiXG4iKSwoZnVuY3Rpb24oZSl7aWYocj1lLmluZGV4T2YoIjoiKSx0PUllLnRyaW0oZS5zdWJzdHIoMCxyKSkudG9Mb3dlckNhc2UoKSxuPUllLnRyaW0oZS5zdWJzdHIocisxKSksdCl7aWYoaVt0XSYmT2UuaW5kZXhPZih0KT49MClyZXR1cm47aVt0XT0ic2V0LWNvb2tpZSI9PT10PyhpW3RdP2lbdF06W10pLmNvbmNhdChbbl0pOmlbdF0/aVt0XSsiLCAiK246bn19KSksaSk6aX0sSmU9TGUsRmU9VGUsV2U9a2UsemU9TWUsWWU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3ZhciByLGk9ZS5kYXRhLG89ZS5oZWFkZXJzLHM9ZS5yZXNwb25zZVR5cGU7ZnVuY3Rpb24gYSgpe2UuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUociksZS5zaWduYWwmJmUuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0IixyKX1qZS5pc0Zvcm1EYXRhKGkpJiZkZWxldGUgb1siQ29udGVudC1UeXBlIl07dmFyIGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKGUuYXV0aCl7dmFyIHU9ZS5hdXRoLnVzZXJuYW1lfHwiIixsPWUuYXV0aC5wYXNzd29yZD91bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZS5hdXRoLnBhc3N3b3JkKSk6IiI7by5BdXRob3JpemF0aW9uPSJCYXNpYyAiK2J0b2EodSsiOiIrbCl9dmFyIGQ9S2UoZS5iYXNlVVJMLGUudXJsKTtmdW5jdGlvbiBoKCl7aWYoYyl7dmFyIHI9ImdldEFsbFJlc3BvbnNlSGVhZGVycyJpbiBjP0JlKGMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpOm51bGwsaT17ZGF0YTpzJiYidGV4dCIhPT1zJiYianNvbiIhPT1zP2MucmVzcG9uc2U6Yy5yZXNwb25zZVRleHQsc3RhdHVzOmMuc3RhdHVzLHN0YXR1c1RleHQ6Yy5zdGF0dXNUZXh0LGhlYWRlcnM6cixjb25maWc6ZSxyZXF1ZXN0OmN9O3FlKChmdW5jdGlvbihlKXt0KGUpLGEoKX0pLChmdW5jdGlvbihlKXtuKGUpLGEoKX0pLGkpLGM9bnVsbH19aWYoYy5vcGVuKGUubWV0aG9kLnRvVXBwZXJDYXNlKCkseGUoZCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLCEwKSxjLnRpbWVvdXQ9ZS50aW1lb3V0LCJvbmxvYWRlbmQiaW4gYz9jLm9ubG9hZGVuZD1oOmMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7YyYmND09PWMucmVhZHlTdGF0ZSYmKDAhPT1jLnN0YXR1c3x8Yy5yZXNwb25zZVVSTCYmMD09PWMucmVzcG9uc2VVUkwuaW5kZXhPZigiZmlsZToiKSkmJnNldFRpbWVvdXQoaCl9LGMub25hYm9ydD1mdW5jdGlvbigpe2MmJihuKEZlKCJSZXF1ZXN0IGFib3J0ZWQiLGUsIkVDT05OQUJPUlRFRCIsYykpLGM9bnVsbCl9LGMub25lcnJvcj1mdW5jdGlvbigpe24oRmUoIk5ldHdvcmsgRXJyb3IiLGUsbnVsbCxjKSksYz1udWxsfSxjLm9udGltZW91dD1mdW5jdGlvbigpe3ZhciB0PWUudGltZW91dD8idGltZW91dCBvZiAiK2UudGltZW91dCsibXMgZXhjZWVkZWQiOiJ0aW1lb3V0IGV4Y2VlZGVkIixyPWUudHJhbnNpdGlvbmFsfHxXZTtlLnRpbWVvdXRFcnJvck1lc3NhZ2UmJih0PWUudGltZW91dEVycm9yTWVzc2FnZSksbihGZSh0LGUsci5jbGFyaWZ5VGltZW91dEVycm9yPyJFVElNRURPVVQiOiJFQ09OTkFCT1JURUQiLGMpKSxjPW51bGx9LGplLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpe3ZhciBmPShlLndpdGhDcmVkZW50aWFsc3x8SmUoZCkpJiZlLnhzcmZDb29raWVOYW1lP05lLnJlYWQoZS54c3JmQ29va2llTmFtZSk6dm9pZCAwO2YmJihvW2UueHNyZkhlYWRlck5hbWVdPWYpfSJzZXRSZXF1ZXN0SGVhZGVyImluIGMmJmplLmZvckVhY2gobywoZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1pJiYiY29udGVudC10eXBlIj09PXQudG9Mb3dlckNhc2UoKT9kZWxldGUgb1t0XTpjLnNldFJlcXVlc3RIZWFkZXIodCxlKX0pKSxqZS5pc1VuZGVmaW5lZChlLndpdGhDcmVkZW50aWFscyl8fChjLndpdGhDcmVkZW50aWFscz0hIWUud2l0aENyZWRlbnRpYWxzKSxzJiYianNvbiIhPT1zJiYoYy5yZXNwb25zZVR5cGU9ZS5yZXNwb25zZVR5cGUpLCJmdW5jdGlvbiI9PXR5cGVvZiBlLm9uRG93bmxvYWRQcm9ncmVzcyYmYy5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZS5vbkRvd25sb2FkUHJvZ3Jlc3MpLCJmdW5jdGlvbiI9PXR5cGVvZiBlLm9uVXBsb2FkUHJvZ3Jlc3MmJmMudXBsb2FkJiZjLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZS5vblVwbG9hZFByb2dyZXNzKSwoZS5jYW5jZWxUb2tlbnx8ZS5zaWduYWwpJiYocj1mdW5jdGlvbihlKXtjJiYobighZXx8ZSYmZS50eXBlP25ldyB6ZSgiY2FuY2VsZWQiKTplKSxjLmFib3J0KCksYz1udWxsKX0sZS5jYW5jZWxUb2tlbiYmZS5jYW5jZWxUb2tlbi5zdWJzY3JpYmUociksZS5zaWduYWwmJihlLnNpZ25hbC5hYm9ydGVkP3IoKTplLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIscikpKSxpfHwoaT1udWxsKSxjLnNlbmQoaSl9KSl9LFZlPUIsR2U9ZnVuY3Rpb24oZSx0KXtTZS5mb3JFYWNoKGUsKGZ1bmN0aW9uKG4scil7ciE9PXQmJnIudG9VcHBlckNhc2UoKT09PXQudG9VcHBlckNhc2UoKSYmKGVbdF09bixkZWxldGUgZVtyXSl9KSl9LFhlPWJlLCRlPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn07ZnVuY3Rpb24gWmUoZSx0KXshVmUuaXNVbmRlZmluZWQoZSkmJlZlLmlzVW5kZWZpbmVkKGVbIkNvbnRlbnQtVHlwZSJdKSYmKGVbIkNvbnRlbnQtVHlwZSJdPXQpfXZhciBRZSxldD17dHJhbnNpdGlvbmFsOmtlLGFkYXB0ZXI6KCgidW5kZWZpbmVkIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0fHx2b2lkIDAhPT1fZSYmIltvYmplY3QgcHJvY2Vzc10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKF9lKSkmJihRZT1ZZSksUWUpLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGUsdCl7cmV0dXJuIEdlKHQsIkFjY2VwdCIpLEdlKHQsIkNvbnRlbnQtVHlwZSIpLFZlLmlzRm9ybURhdGEoZSl8fFZlLmlzQXJyYXlCdWZmZXIoZSl8fFZlLmlzQnVmZmVyKGUpfHxWZS5pc1N0cmVhbShlKXx8VmUuaXNGaWxlKGUpfHxWZS5pc0Jsb2IoZSk/ZTpWZS5pc0FycmF5QnVmZmVyVmlldyhlKT9lLmJ1ZmZlcjpWZS5pc1VSTFNlYXJjaFBhcmFtcyhlKT8oWmUodCwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgiKSxlLnRvU3RyaW5nKCkpOlZlLmlzT2JqZWN0KGUpfHx0JiYiYXBwbGljYXRpb24vanNvbiI9PT10WyJDb250ZW50LVR5cGUiXT8oWmUodCwiYXBwbGljYXRpb24vanNvbiIpLGZ1bmN0aW9uKGUsdCxuKXtpZihWZS5pc1N0cmluZyhlKSl0cnl7cmV0dXJuKHR8fEpTT04ucGFyc2UpKGUpLFZlLnRyaW0oZSl9Y2F0Y2goZSl7aWYoIlN5bnRheEVycm9yIiE9PWUubmFtZSl0aHJvdyBlfXJldHVybihufHxKU09OLnN0cmluZ2lmeSkoZSl9KGUpKTplfV0sdHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNpdGlvbmFsfHxldC50cmFuc2l0aW9uYWwsbj10JiZ0LnNpbGVudEpTT05QYXJzaW5nLHI9dCYmdC5mb3JjZWRKU09OUGFyc2luZyxpPSFuJiYianNvbiI9PT10aGlzLnJlc3BvbnNlVHlwZTtpZihpfHxyJiZWZS5pc1N0cmluZyhlKSYmZS5sZW5ndGgpdHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKGUpe2lmKGkpe2lmKCJTeW50YXhFcnJvciI9PT1lLm5hbWUpdGhyb3cgWGUoZSx0aGlzLCJFX0pTT05fUEFSU0UiKTt0aHJvdyBlfX1yZXR1cm4gZX1dLHRpbWVvdXQ6MCx4c3JmQ29va2llTmFtZToiWFNSRi1UT0tFTiIseHNyZkhlYWRlck5hbWU6IlgtWFNSRi1UT0tFTiIsbWF4Q29udGVudExlbmd0aDotMSxtYXhCb2R5TGVuZ3RoOi0xLHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uKGUpe3JldHVybiBlPj0yMDAmJmU8MzAwfSxoZWFkZXJzOntjb21tb246e0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIn19fTtWZS5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLChmdW5jdGlvbihlKXtldC5oZWFkZXJzW2VdPXt9fSkpLFZlLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSwoZnVuY3Rpb24oZSl7ZXQuaGVhZGVyc1tlXT1WZS5tZXJnZSgkZSl9KSk7dmFyIHR0PWV0LG50PUIscnQ9dHQsaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuISghZXx8IWUuX19DQU5DRUxfXyl9LG90PUIsc3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXN8fHJ0O3JldHVybiBudC5mb3JFYWNoKG4sKGZ1bmN0aW9uKG4pe2U9bi5jYWxsKHIsZSx0KX0pKSxlfSxhdD1pdCxjdD10dCx1dD1NZTtmdW5jdGlvbiBsdChlKXtpZihlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKSxlLnNpZ25hbCYmZS5zaWduYWwuYWJvcnRlZCl0aHJvdyBuZXcgdXQoImNhbmNlbGVkIil9dmFyIGR0PUIsaHQ9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPXt9O2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gZHQuaXNQbGFpbk9iamVjdChlKSYmZHQuaXNQbGFpbk9iamVjdCh0KT9kdC5tZXJnZShlLHQpOmR0LmlzUGxhaW5PYmplY3QodCk/ZHQubWVyZ2Uoe30sdCk6ZHQuaXNBcnJheSh0KT90LnNsaWNlKCk6dH1mdW5jdGlvbiBpKG4pe3JldHVybiBkdC5pc1VuZGVmaW5lZCh0W25dKT9kdC5pc1VuZGVmaW5lZChlW25dKT92b2lkIDA6cih2b2lkIDAsZVtuXSk6cihlW25dLHRbbl0pfWZ1bmN0aW9uIG8oZSl7aWYoIWR0LmlzVW5kZWZpbmVkKHRbZV0pKXJldHVybiByKHZvaWQgMCx0W2VdKX1mdW5jdGlvbiBzKG4pe3JldHVybiBkdC5pc1VuZGVmaW5lZCh0W25dKT9kdC5pc1VuZGVmaW5lZChlW25dKT92b2lkIDA6cih2b2lkIDAsZVtuXSk6cih2b2lkIDAsdFtuXSl9ZnVuY3Rpb24gYShuKXtyZXR1cm4gbiBpbiB0P3IoZVtuXSx0W25dKTpuIGluIGU/cih2b2lkIDAsZVtuXSk6dm9pZCAwfXZhciBjPXt1cmw6byxtZXRob2Q6byxkYXRhOm8sYmFzZVVSTDpzLHRyYW5zZm9ybVJlcXVlc3Q6cyx0cmFuc2Zvcm1SZXNwb25zZTpzLHBhcmFtc1NlcmlhbGl6ZXI6cyx0aW1lb3V0OnMsdGltZW91dE1lc3NhZ2U6cyx3aXRoQ3JlZGVudGlhbHM6cyxhZGFwdGVyOnMscmVzcG9uc2VUeXBlOnMseHNyZkNvb2tpZU5hbWU6cyx4c3JmSGVhZGVyTmFtZTpzLG9uVXBsb2FkUHJvZ3Jlc3M6cyxvbkRvd25sb2FkUHJvZ3Jlc3M6cyxkZWNvbXByZXNzOnMsbWF4Q29udGVudExlbmd0aDpzLG1heEJvZHlMZW5ndGg6cyx0cmFuc3BvcnQ6cyxodHRwQWdlbnQ6cyxodHRwc0FnZW50OnMsY2FuY2VsVG9rZW46cyxzb2NrZXRQYXRoOnMscmVzcG9uc2VFbmNvZGluZzpzLHZhbGlkYXRlU3RhdHVzOmF9O3JldHVybiBkdC5mb3JFYWNoKE9iamVjdC5rZXlzKGUpLmNvbmNhdChPYmplY3Qua2V5cyh0KSksKGZ1bmN0aW9uKGUpe3ZhciB0PWNbZV18fGkscj10KGUpO2R0LmlzVW5kZWZpbmVkKHIpJiZ0IT09YXx8KG5bZV09cil9KSksbn0sZnQ9IjAuMjYuMSIscHQ9ZnQsZ3Q9e307WyJvYmplY3QiLCJib29sZWFuIiwibnVtYmVyIiwiZnVuY3Rpb24iLCJzdHJpbmciLCJzeW1ib2wiXS5mb3JFYWNoKChmdW5jdGlvbihlLHQpe2d0W2VdPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2Ygbj09PWV8fCJhIisodDwxPyJuICI6IiAiKStlfX0pKTt2YXIgdnQ9e307Z3QudHJhbnNpdGlvbmFsPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIltBeGlvcyB2IitwdCsiXSBUcmFuc2l0aW9uYWwgb3B0aW9uICciK2UrIiciK3QrKG4/Ii4gIituOiIiKX1yZXR1cm4gZnVuY3Rpb24obixpLG8pe2lmKCExPT09ZSl0aHJvdyBuZXcgRXJyb3IocihpLCIgaGFzIGJlZW4gcmVtb3ZlZCIrKHQ/IiBpbiAiK3Q6IiIpKSk7cmV0dXJuIHQmJiF2dFtpXSYmKHZ0W2ldPSEwLGNvbnNvbGUud2FybihyKGksIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYiK3QrIiBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSIpKSksIWV8fGUobixpLG8pfX07dmFyIHl0PXthc3NlcnRPcHRpb25zOmZ1bmN0aW9uKGUsdCxuKXtpZigib2JqZWN0IiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCIpO2Zvcih2YXIgcj1PYmplY3Qua2V5cyhlKSxpPXIubGVuZ3RoO2ktLSA+MDspe3ZhciBvPXJbaV0scz10W29dO2lmKHMpe3ZhciBhPWVbb10sYz12b2lkIDA9PT1hfHxzKGEsbyxlKTtpZighMCE9PWMpdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9uICIrbysiIG11c3QgYmUgIitjKX1lbHNlIGlmKCEwIT09bil0aHJvdyBFcnJvcigiVW5rbm93biBvcHRpb24gIitvKX19LHZhbGlkYXRvcnM6Z3R9LG10PUIsd3Q9VyxfdD1WLFN0PWZ1bmN0aW9uKGUpe3JldHVybiBsdChlKSxlLmhlYWRlcnM9ZS5oZWFkZXJzfHx7fSxlLmRhdGE9c3QuY2FsbChlLGUuZGF0YSxlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXF1ZXN0KSxlLmhlYWRlcnM9b3QubWVyZ2UoZS5oZWFkZXJzLmNvbW1vbnx8e30sZS5oZWFkZXJzW2UubWV0aG9kXXx8e30sZS5oZWFkZXJzKSxvdC5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsInBvc3QiLCJwdXQiLCJwYXRjaCIsImNvbW1vbiJdLChmdW5jdGlvbih0KXtkZWxldGUgZS5oZWFkZXJzW3RdfSkpLChlLmFkYXB0ZXJ8fGN0LmFkYXB0ZXIpKGUpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiBsdChlKSx0LmRhdGE9c3QuY2FsbChlLHQuZGF0YSx0LmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSksdH0pLChmdW5jdGlvbih0KXtyZXR1cm4gYXQodCl8fChsdChlKSx0JiZ0LnJlc3BvbnNlJiYodC5yZXNwb25zZS5kYXRhPXN0LmNhbGwoZSx0LnJlc3BvbnNlLmRhdGEsdC5yZXNwb25zZS5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpKSksUHJvbWlzZS5yZWplY3QodCl9KSl9LGJ0PWh0LGt0PXl0LEV0PWt0LnZhbGlkYXRvcnM7ZnVuY3Rpb24gVHQoZSl7dGhpcy5kZWZhdWx0cz1lLHRoaXMuaW50ZXJjZXB0b3JzPXtyZXF1ZXN0Om5ldyBfdCxyZXNwb25zZTpuZXcgX3R9fVR0LnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUsdCl7InN0cmluZyI9PXR5cGVvZiBlPyh0PXR8fHt9KS51cmw9ZTp0PWV8fHt9LCh0PWJ0KHRoaXMuZGVmYXVsdHMsdCkpLm1ldGhvZD90Lm1ldGhvZD10Lm1ldGhvZC50b0xvd2VyQ2FzZSgpOnRoaXMuZGVmYXVsdHMubWV0aG9kP3QubWV0aG9kPXRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk6dC5tZXRob2Q9ImdldCI7dmFyIG49dC50cmFuc2l0aW9uYWw7dm9pZCAwIT09biYma3QuYXNzZXJ0T3B0aW9ucyhuLHtzaWxlbnRKU09OUGFyc2luZzpFdC50cmFuc2l0aW9uYWwoRXQuYm9vbGVhbiksZm9yY2VkSlNPTlBhcnNpbmc6RXQudHJhbnNpdGlvbmFsKEV0LmJvb2xlYW4pLGNsYXJpZnlUaW1lb3V0RXJyb3I6RXQudHJhbnNpdGlvbmFsKEV0LmJvb2xlYW4pfSwhMSk7dmFyIHI9W10saT0hMDt0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goKGZ1bmN0aW9uKGUpeyJmdW5jdGlvbiI9PXR5cGVvZiBlLnJ1bldoZW4mJiExPT09ZS5ydW5XaGVuKHQpfHwoaT1pJiZlLnN5bmNocm9ub3VzLHIudW5zaGlmdChlLmZ1bGZpbGxlZCxlLnJlamVjdGVkKSl9KSk7dmFyIG8scz1bXTtpZih0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKChmdW5jdGlvbihlKXtzLnB1c2goZS5mdWxmaWxsZWQsZS5yZWplY3RlZCl9KSksIWkpe3ZhciBhPVtTdCx2b2lkIDBdO2ZvcihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShhLHIpLGE9YS5jb25jYXQocyksbz1Qcm9taXNlLnJlc29sdmUodCk7YS5sZW5ndGg7KW89by50aGVuKGEuc2hpZnQoKSxhLnNoaWZ0KCkpO3JldHVybiBvfWZvcih2YXIgYz10O3IubGVuZ3RoOyl7dmFyIHU9ci5zaGlmdCgpLGw9ci5zaGlmdCgpO3RyeXtjPXUoYyl9Y2F0Y2goZSl7bChlKTticmVha319dHJ5e289U3QoYyl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfWZvcig7cy5sZW5ndGg7KW89by50aGVuKHMuc2hpZnQoKSxzLnNoaWZ0KCkpO3JldHVybiBvfSxUdC5wcm90b3R5cGUuZ2V0VXJpPWZ1bmN0aW9uKGUpe3JldHVybiBlPWJ0KHRoaXMuZGVmYXVsdHMsZSksd3QoZS51cmwsZS5wYXJhbXMsZS5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXD8vLCIiKX0sbXQuZm9yRWFjaChbImRlbGV0ZSIsImdldCIsImhlYWQiLCJvcHRpb25zIl0sKGZ1bmN0aW9uKGUpe1R0LnByb3RvdHlwZVtlXT1mdW5jdGlvbih0LG4pe3JldHVybiB0aGlzLnJlcXVlc3QoYnQobnx8e30se21ldGhvZDplLHVybDp0LGRhdGE6KG58fHt9KS5kYXRhfSkpfX0pKSxtdC5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sKGZ1bmN0aW9uKGUpe1R0LnByb3RvdHlwZVtlXT1mdW5jdGlvbih0LG4scil7cmV0dXJuIHRoaXMucmVxdWVzdChidChyfHx7fSx7bWV0aG9kOmUsdXJsOnQsZGF0YTpufSkpfX0pKTt2YXIgUnQ9VHQsQXQ9TWU7ZnVuY3Rpb24gQ3QoZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO3ZhciB0O3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dD1lfSkpO3ZhciBuPXRoaXM7dGhpcy5wcm9taXNlLnRoZW4oKGZ1bmN0aW9uKGUpe2lmKG4uX2xpc3RlbmVycyl7dmFyIHQscj1uLl9saXN0ZW5lcnMubGVuZ3RoO2Zvcih0PTA7dDxyO3QrKyluLl9saXN0ZW5lcnNbdF0oZSk7bi5fbGlzdGVuZXJzPW51bGx9fSkpLHRoaXMucHJvbWlzZS50aGVuPWZ1bmN0aW9uKGUpe3ZhciB0LHI9bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe24uc3Vic2NyaWJlKGUpLHQ9ZX0pKS50aGVuKGUpO3JldHVybiByLmNhbmNlbD1mdW5jdGlvbigpe24udW5zdWJzY3JpYmUodCl9LHJ9LGUoKGZ1bmN0aW9uKGUpe24ucmVhc29ufHwobi5yZWFzb249bmV3IEF0KGUpLHQobi5yZWFzb24pKX0pKX1DdC5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZD1mdW5jdGlvbigpe2lmKHRoaXMucmVhc29uKXRocm93IHRoaXMucmVhc29ufSxDdC5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3RoaXMucmVhc29uP2UodGhpcy5yZWFzb24pOnRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSxDdC5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fbGlzdGVuZXJzKXt2YXIgdD10aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuX2xpc3RlbmVycy5zcGxpY2UodCwxKX19LEN0LnNvdXJjZT1mdW5jdGlvbigpe3ZhciBlLHQ9bmV3IEN0KChmdW5jdGlvbih0KXtlPXR9KSk7cmV0dXJue3Rva2VuOnQsY2FuY2VsOmV9fTt2YXIgRHQ9Q3QsUHQ9QixJdD1CLE90PU8sVXQ9UnQsTHQ9aHQ7dmFyIEh0PWZ1bmN0aW9uIGUodCl7dmFyIG49bmV3IFV0KHQpLHI9T3QoVXQucHJvdG90eXBlLnJlcXVlc3Qsbik7cmV0dXJuIEl0LmV4dGVuZChyLFV0LnByb3RvdHlwZSxuKSxJdC5leHRlbmQocixuKSxyLmNyZWF0ZT1mdW5jdGlvbihuKXtyZXR1cm4gZShMdCh0LG4pKX0scn0odHQpO0h0LkF4aW9zPVV0LEh0LkNhbmNlbD1NZSxIdC5DYW5jZWxUb2tlbj1EdCxIdC5pc0NhbmNlbD1pdCxIdC5WRVJTSU9OPWZ0LEh0LmFsbD1mdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5hbGwoZSl9LEh0LnNwcmVhZD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkobnVsbCx0KX19LEh0LmlzQXhpb3NFcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gUHQuaXNPYmplY3QoZSkmJiEwPT09ZS5pc0F4aW9zRXJyb3J9LEkuZXhwb3J0cz1IdCxJLmV4cG9ydHMuZGVmYXVsdD1IdDt2YXIgTXQsanQ9SS5leHBvcnRzO2xldCBxdD1NdD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuYXR0YWNoVG9rZW49KCk9PlByb21pc2UucmVzb2x2ZSgpLHRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPSgpPT5udWxsLHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5pbml0PXRoaXMuaW5pdC5iaW5kKHRoaXMpLHRoaXMuc2V0SHR0cFJlcXVlc3RFcnJvckNhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RFcnJvckNhbGxiYWNrLmJpbmQodGhpcyksdGhpcy5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RGaW5pc2hDYWxsYmFjay5iaW5kKHRoaXMpLHRoaXMuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrLmJpbmQodGhpcyksdGhpcy5zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaz10aGlzLnNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrLmJpbmQodGhpcyl9c3RhdGljIGdldEluc3RhbmNlKCl7cmV0dXJuIHRoaXMuYXhpb3NJbnN0YW5jZXx8KHRoaXMuYXhpb3NJbnN0YW5jZT1qdC5jcmVhdGUoe3dpdGhDcmVkZW50aWFsczohMH0pLHRoaXMuY2xpZW50SW5zdGFuY2V8fCh0aGlzLmNsaWVudEluc3RhbmNlPW5ldyBNdCksdGhpcy5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZSgodD0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLmNsaWVudEluc3RhbmNlLnJlcXVlc3RIYW5kbGVyKHQpfSkpKSksdGhpcy5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoKGU9PnRoaXMuY2xpZW50SW5zdGFuY2Uuc3VjY2Vzc0hhbmRsZXIoZSkpLChlPT50aGlzLmNsaWVudEluc3RhbmNlLmVycm9ySGFuZGxlcihlKSkpLHRoaXMuYXhpb3NJbnN0YW5jZS5hbGw9anQuYWxsLHRoaXMuYXhpb3NJbnN0YW5jZS5zcHJlYWQ9anQuc3ByZWFkLHRoaXMuYXhpb3NJbnN0YW5jZS5pbml0PXRoaXMuY2xpZW50SW5zdGFuY2UuaW5pdCx0aGlzLmF4aW9zSW5zdGFuY2UuZW5hYmxlSGFuZGxlcj10aGlzLmNsaWVudEluc3RhbmNlLmVuYWJsZUhhbmRsZXIsdGhpcy5heGlvc0luc3RhbmNlLmRpc2FibGVIYW5kbGVyPXRoaXMuY2xpZW50SW5zdGFuY2UuZGlzYWJsZUhhbmRsZXIsdGhpcy5heGlvc0luc3RhbmNlLmRpc2FibGVIYW5kbGVyV2l0aFRpbWVvdXQ9dGhpcy5jbGllbnRJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0LHRoaXMuYXhpb3NJbnN0YW5jZS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2s9dGhpcy5jbGllbnRJbnN0YW5jZS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2ssdGhpcy5heGlvc0luc3RhbmNlLnNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPXRoaXMuY2xpZW50SW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2ssdGhpcy5heGlvc0luc3RhbmNlLnNldEh0dHBSZXF1ZXN0RXJyb3JDYWxsYmFjaz10aGlzLmNsaWVudEluc3RhbmNlLnNldEh0dHBSZXF1ZXN0RXJyb3JDYWxsYmFjayx0aGlzLmF4aW9zSW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RGaW5pc2hDYWxsYmFjaz10aGlzLmNsaWVudEluc3RhbmNlLnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2spLHRoaXMuYXhpb3NJbnN0YW5jZX1yZXF1ZXN0SGFuZGxlcih0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHlpZWxkIHRoaXMuYXR0YWNoVG9rZW4odCksbnVsbD09dD92b2lkIDA6dC5zaG91bGRFbmNvZGVUb0Zvcm1EYXRhKXtjb25zdCBlPW51bGw9PXQ/dm9pZCAwOnQuZGF0YSxuPW5ldyBGb3JtRGF0YTtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKCh0PT57bi5hcHBlbmQodCxlW3RdKX0pKSx0LmRhdGE9bn1yZXR1cm4gdC5zdGFydFRpbWVJbk1zPShuZXcgRGF0ZSkuZ2V0VGltZSgpLE10LmlzSGFuZGxlckVuYWJsZWQmJnRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrKHQpLHR9KSl9ZXJyb3JIYW5kbGVyKGUpe3Rocm93IE10LmlzSGFuZGxlckVuYWJsZWQmJih0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjayYmdGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjayhlKSx0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjaygpKSxlfXN1Y2Nlc3NIYW5kbGVyKGUpe3JldHVybiBNdC5pc0hhbmRsZXJFbmFibGVkJiYodGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrJiZ0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2soZSksdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2soKSksZX1pbml0KCl7bGV0IHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSxuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7TXQuaXNIYW5kbGVyRW5hYmxlZD10LHRoaXMuYXR0YWNoVG9rZW49bn0pKX1lbmFibGVIYW5kbGVyKCl7TXQuaXNIYW5kbGVyRW5hYmxlZD0hMH1kaXNhYmxlSGFuZGxlcigpe010LmlzSGFuZGxlckVuYWJsZWQ9ITF9ZGlzYWJsZUhhbmRsZXJXaXRoVGltZW91dCgpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpNdC5ERUZBVUxUX0hBTkRMRVJfRElTQUJMRV9USU1FT1VUO010LmlzSGFuZGxlckVuYWJsZWQ9ITEsc2V0VGltZW91dCgoKCk9PntNdC5pc0hhbmRsZXJFbmFibGVkPSEwfSksZSl9c2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKGUpe3RoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2s9ZX1zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayhlKXt0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2s9ZX1zZXRIdHRwUmVxdWVzdEVycm9yQ2FsbGJhY2soZSl7dGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjaz1lfXNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2soZSl7dGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2s9ZX19O3F0LkRFRkFVTFRfSEFORExFUl9ESVNBQkxFX1RJTUVPVVQ9MWUzLHF0PU10PWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1yP3I9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOnI7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4scik7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkoaT1lW2FdKSYmKHM9KG88Mz9pKHMpOm8+Mz9pKHQsbixzKTppKHQsbikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHMpLHN9KFtlPT57fV0scXQpO2NsYXNzIE50e2NvbnN0cnVjdG9yKCl7dGhpcy5fZGF0YT1uZXcgTWFwfXNldERhdGEodCxuKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2RhdGEuc2V0KHQsbil9KSl9Z2V0RGF0YSh0KXt2YXIgbixyO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIG51bGwhPT0ocj1udWxsPT09KG49dGhpcy5fZGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2V0KHQpKSYmdm9pZCAwIT09cj9yOiJ7fSJ9KSl9cmVtb3ZlRGF0YSh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2RhdGEuZGVsZXRlKHQpfSkpfX12YXIgeHQ9W10sS3Q9W10sQnQ9InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXksSnQ9ITE7ZnVuY3Rpb24gRnQoKXtKdD0hMDtmb3IodmFyIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLHQ9MCxuPWUubGVuZ3RoO3Q8bjsrK3QpeHRbdF09ZVt0XSxLdFtlLmNoYXJDb2RlQXQodCldPXQ7S3RbIi0iLmNoYXJDb2RlQXQoMCldPTYyLEt0WyJfIi5jaGFyQ29kZUF0KDApXT02M31mdW5jdGlvbiBXdChlLHQsbil7Zm9yKHZhciByLGksbz1bXSxzPXQ7czxuO3MrPTMpcj0oZVtzXTw8MTYpKyhlW3MrMV08PDgpK2VbcysyXSxvLnB1c2goeHRbKGk9cik+PjE4JjYzXSt4dFtpPj4xMiY2M10reHRbaT4+NiY2M10reHRbNjMmaV0pO3JldHVybiBvLmpvaW4oIiIpfWZ1bmN0aW9uIHp0KGUpe3ZhciB0O0p0fHxGdCgpO2Zvcih2YXIgbj1lLmxlbmd0aCxyPW4lMyxpPSIiLG89W10scz0xNjM4MyxhPTAsYz1uLXI7YTxjO2ErPXMpby5wdXNoKFd0KGUsYSxhK3M+Yz9jOmErcykpO3JldHVybiAxPT09cj8odD1lW24tMV0saSs9eHRbdD4+Ml0saSs9eHRbdDw8NCY2M10saSs9Ij09Iik6Mj09PXImJih0PShlW24tMl08PDgpK2Vbbi0xXSxpKz14dFt0Pj4xMF0saSs9eHRbdD4+NCY2M10saSs9eHRbdDw8MiY2M10saSs9Ij0iKSxvLnB1c2goaSksby5qb2luKCIiKX1mdW5jdGlvbiBZdChlLHQsbixyLGkpe3ZhciBvLHMsYT04Kmktci0xLGM9KDE8PGEpLTEsdT1jPj4xLGw9LTcsZD1uP2ktMTowLGg9bj8tMToxLGY9ZVt0K2RdO2ZvcihkKz1oLG89ZiYoMTw8LWwpLTEsZj4+PS1sLGwrPWE7bD4wO289MjU2Km8rZVt0K2RdLGQrPWgsbC09OCk7Zm9yKHM9byYoMTw8LWwpLTEsbz4+PS1sLGwrPXI7bD4wO3M9MjU2KnMrZVt0K2RdLGQrPWgsbC09OCk7aWYoMD09PW8pbz0xLXU7ZWxzZXtpZihvPT09YylyZXR1cm4gcz9OYU46MS8wKihmPy0xOjEpO3MrPU1hdGgucG93KDIsciksby09dX1yZXR1cm4oZj8tMToxKSpzKk1hdGgucG93KDIsby1yKX1mdW5jdGlvbiBWdChlLHQsbixyLGksbyl7dmFyIHMsYSxjLHU9OCpvLWktMSxsPSgxPDx1KS0xLGQ9bD4+MSxoPTIzPT09aT9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAsZj1yPzA6by0xLHA9cj8xOi0xLGc9dDwwfHwwPT09dCYmMS90PDA/MTowO2Zvcih0PU1hdGguYWJzKHQpLGlzTmFOKHQpfHx0PT09MS8wPyhhPWlzTmFOKHQpPzE6MCxzPWwpOihzPU1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjIpLHQqKGM9TWF0aC5wb3coMiwtcykpPDEmJihzLS0sYyo9MiksKHQrPXMrZD49MT9oL2M6aCpNYXRoLnBvdygyLDEtZCkpKmM+PTImJihzKyssYy89MikscytkPj1sPyhhPTAscz1sKTpzK2Q+PTE/KGE9KHQqYy0xKSpNYXRoLnBvdygyLGkpLHMrPWQpOihhPXQqTWF0aC5wb3coMixkLTEpKk1hdGgucG93KDIsaSkscz0wKSk7aT49ODtlW24rZl09MjU1JmEsZis9cCxhLz0yNTYsaS09OCk7Zm9yKHM9czw8aXxhLHUrPWk7dT4wO2VbbitmXT0yNTUmcyxmKz1wLHMvPTI1Nix1LT04KTtlW24rZi1wXXw9MTI4Kmd9dmFyIEd0PXt9LnRvU3RyaW5nLFh0PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PUd0LmNhbGwoZSl9O2VuLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwPT09Ry5UWVBFRF9BUlJBWV9TVVBQT1JUfHxHLlRZUEVEX0FSUkFZX1NVUFBPUlQ7dmFyICR0PVp0KCk7ZnVuY3Rpb24gWnQoKXtyZXR1cm4gZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjN9ZnVuY3Rpb24gUXQoZSx0KXtpZihadCgpPHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoIik7cmV0dXJuIGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KGU9bmV3IFVpbnQ4QXJyYXkodCkpLl9fcHJvdG9fXz1lbi5wcm90b3R5cGU6KG51bGw9PT1lJiYoZT1uZXcgZW4odCkpLGUubGVuZ3RoPXQpLGV9ZnVuY3Rpb24gZW4oZSx0LG4pe2lmKCEoZW4uVFlQRURfQVJSQVlfU1VQUE9SVHx8dGhpcyBpbnN0YW5jZW9mIGVuKSlyZXR1cm4gbmV3IGVuKGUsdCxuKTtpZigibnVtYmVyIj09dHlwZW9mIGUpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoIklmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nIik7cmV0dXJuIHJuKHRoaXMsZSl9cmV0dXJuIHRuKHRoaXMsZSx0LG4pfWZ1bmN0aW9uIHRuKGUsdCxuLHIpe2lmKCJudW1iZXIiPT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJyk7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP2Z1bmN0aW9uKGUsdCxuLHIpe2lmKHQuYnl0ZUxlbmd0aCxuPDB8fHQuYnl0ZUxlbmd0aDxuKXRocm93IG5ldyBSYW5nZUVycm9yKCInb2Zmc2V0JyBpcyBvdXQgb2YgYm91bmRzIik7aWYodC5ieXRlTGVuZ3RoPG4rKHJ8fDApKXRocm93IG5ldyBSYW5nZUVycm9yKCInbGVuZ3RoJyBpcyBvdXQgb2YgYm91bmRzIik7dD12b2lkIDA9PT1uJiZ2b2lkIDA9PT1yP25ldyBVaW50OEFycmF5KHQpOnZvaWQgMD09PXI/bmV3IFVpbnQ4QXJyYXkodCxuKTpuZXcgVWludDhBcnJheSh0LG4scik7ZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8oZT10KS5fX3Byb3RvX189ZW4ucHJvdG90eXBlOmU9b24oZSx0KTtyZXR1cm4gZX0oZSx0LG4scik6InN0cmluZyI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCxuKXsic3RyaW5nIj09dHlwZW9mIG4mJiIiIT09bnx8KG49InV0ZjgiKTtpZighZW4uaXNFbmNvZGluZyhuKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciZW5jb2RpbmciIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKTt2YXIgcj0wfGNuKHQsbiksaT0oZT1RdChlLHIpKS53cml0ZSh0LG4pO2khPT1yJiYoZT1lLnNsaWNlKDAsaSkpO3JldHVybiBlfShlLHQsbik6ZnVuY3Rpb24oZSx0KXtpZihhbih0KSl7dmFyIG49MHxzbih0Lmxlbmd0aCk7cmV0dXJuIDA9PT0oZT1RdChlLG4pKS5sZW5ndGh8fHQuY29weShlLDAsMCxuKSxlfWlmKHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgQXJyYXlCdWZmZXImJnQuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fCJsZW5ndGgiaW4gdClyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIHQubGVuZ3RofHwocj10Lmxlbmd0aCkhPXI/UXQoZSwwKTpvbihlLHQpO2lmKCJCdWZmZXIiPT09dC50eXBlJiZYdCh0LmRhdGEpKXJldHVybiBvbihlLHQuZGF0YSl9dmFyIHI7dGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LiIpfShlLHQpfWZ1bmN0aW9uIG5uKGUpe2lmKCJudW1iZXIiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpO2lmKGU8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyl9ZnVuY3Rpb24gcm4oZSx0KXtpZihubih0KSxlPVF0KGUsdDwwPzA6MHxzbih0KSksIWVuLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKHZhciBuPTA7bjx0OysrbillW25dPTA7cmV0dXJuIGV9ZnVuY3Rpb24gb24oZSx0KXt2YXIgbj10Lmxlbmd0aDwwPzA6MHxzbih0Lmxlbmd0aCk7ZT1RdChlLG4pO2Zvcih2YXIgcj0wO3I8bjtyKz0xKWVbcl09MjU1JnRbcl07cmV0dXJuIGV9ZnVuY3Rpb24gc24oZSl7aWYoZT49WnQoKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSBzaXplOiAweCIrWnQoKS50b1N0cmluZygxNikrIiBieXRlcyIpO3JldHVybiAwfGV9ZnVuY3Rpb24gYW4oZSl7cmV0dXJuIShudWxsPT1lfHwhZS5faXNCdWZmZXIpfWZ1bmN0aW9uIGNuKGUsdCl7aWYoYW4oZSkpcmV0dXJuIGUubGVuZ3RoO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgQXJyYXlCdWZmZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcmJihBcnJheUJ1ZmZlci5pc1ZpZXcoZSl8fGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpcmV0dXJuIGUuYnl0ZUxlbmd0aDsic3RyaW5nIiE9dHlwZW9mIGUmJihlPSIiK2UpO3ZhciBuPWUubGVuZ3RoO2lmKDA9PT1uKXJldHVybiAwO2Zvcih2YXIgcj0hMTs7KXN3aXRjaCh0KXtjYXNlImFzY2lpIjpjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiBuO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6Y2FzZSB2b2lkIDA6cmV0dXJuIEhuKGUpLmxlbmd0aDtjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuIDIqbjtjYXNlImhleCI6cmV0dXJuIG4+Pj4xO2Nhc2UiYmFzZTY0IjpyZXR1cm4gTW4oZSkubGVuZ3RoO2RlZmF1bHQ6aWYocilyZXR1cm4gSG4oZSkubGVuZ3RoO3Q9KCIiK3QpLnRvTG93ZXJDYXNlKCkscj0hMH19ZnVuY3Rpb24gdW4oZSx0LG4pe3ZhciByPSExO2lmKCh2b2lkIDA9PT10fHx0PDApJiYodD0wKSx0PnRoaXMubGVuZ3RoKXJldHVybiIiO2lmKCh2b2lkIDA9PT1ufHxuPnRoaXMubGVuZ3RoKSYmKG49dGhpcy5sZW5ndGgpLG48PTApcmV0dXJuIiI7aWYoKG4+Pj49MCk8PSh0Pj4+PTApKXJldHVybiIiO2ZvcihlfHwoZT0idXRmOCIpOzspc3dpdGNoKGUpe2Nhc2UiaGV4IjpyZXR1cm4gRW4odGhpcyx0LG4pO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6cmV0dXJuIF9uKHRoaXMsdCxuKTtjYXNlImFzY2lpIjpyZXR1cm4gYm4odGhpcyx0LG4pO2Nhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIGtuKHRoaXMsdCxuKTtjYXNlImJhc2U2NCI6cmV0dXJuIHduKHRoaXMsdCxuKTtjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuIFRuKHRoaXMsdCxuKTtkZWZhdWx0OmlmKHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitlKTtlPShlKyIiKS50b0xvd2VyQ2FzZSgpLHI9ITB9fWZ1bmN0aW9uIGxuKGUsdCxuKXt2YXIgcj1lW3RdO2VbdF09ZVtuXSxlW25dPXJ9ZnVuY3Rpb24gZG4oZSx0LG4scixpKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuLTE7aWYoInN0cmluZyI9PXR5cGVvZiBuPyhyPW4sbj0wKTpuPjIxNDc0ODM2NDc/bj0yMTQ3NDgzNjQ3Om48LTIxNDc0ODM2NDgmJihuPS0yMTQ3NDgzNjQ4KSxuPStuLGlzTmFOKG4pJiYobj1pPzA6ZS5sZW5ndGgtMSksbjwwJiYobj1lLmxlbmd0aCtuKSxuPj1lLmxlbmd0aCl7aWYoaSlyZXR1cm4tMTtuPWUubGVuZ3RoLTF9ZWxzZSBpZihuPDApe2lmKCFpKXJldHVybi0xO249MH1pZigic3RyaW5nIj09dHlwZW9mIHQmJih0PWVuLmZyb20odCxyKSksYW4odCkpcmV0dXJuIDA9PT10Lmxlbmd0aD8tMTpobihlLHQsbixyLGkpO2lmKCJudW1iZXIiPT10eXBlb2YgdClyZXR1cm4gdCY9MjU1LGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQmJiJmdW5jdGlvbiI9PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP2k/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsdCxuKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGUsdCxuKTpobihlLFt0XSxuLHIsaSk7dGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIil9ZnVuY3Rpb24gaG4oZSx0LG4scixpKXt2YXIgbyxzPTEsYT1lLmxlbmd0aCxjPXQubGVuZ3RoO2lmKHZvaWQgMCE9PXImJigidWNzMiI9PT0ocj1TdHJpbmcocikudG9Mb3dlckNhc2UoKSl8fCJ1Y3MtMiI9PT1yfHwidXRmMTZsZSI9PT1yfHwidXRmLTE2bGUiPT09cikpe2lmKGUubGVuZ3RoPDJ8fHQubGVuZ3RoPDIpcmV0dXJuLTE7cz0yLGEvPTIsYy89MixuLz0yfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gMT09PXM/ZVt0XTplLnJlYWRVSW50MTZCRSh0KnMpfWlmKGkpe3ZhciBsPS0xO2ZvcihvPW47bzxhO28rKylpZih1KGUsbyk9PT11KHQsLTE9PT1sPzA6by1sKSl7aWYoLTE9PT1sJiYobD1vKSxvLWwrMT09PWMpcmV0dXJuIGwqc31lbHNlLTEhPT1sJiYoby09by1sKSxsPS0xfWVsc2UgZm9yKG4rYz5hJiYobj1hLWMpLG89bjtvPj0wO28tLSl7Zm9yKHZhciBkPSEwLGg9MDtoPGM7aCsrKWlmKHUoZSxvK2gpIT09dSh0LGgpKXtkPSExO2JyZWFrfWlmKGQpcmV0dXJuIG99cmV0dXJuLTF9ZnVuY3Rpb24gZm4oZSx0LG4scil7bj1OdW1iZXIobil8fDA7dmFyIGk9ZS5sZW5ndGgtbjtyPyhyPU51bWJlcihyKSk+aSYmKHI9aSk6cj1pO3ZhciBvPXQubGVuZ3RoO2lmKG8lMiE9MCl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGhleCBzdHJpbmciKTtyPm8vMiYmKHI9by8yKTtmb3IodmFyIHM9MDtzPHI7KytzKXt2YXIgYT1wYXJzZUludCh0LnN1YnN0cigyKnMsMiksMTYpO2lmKGlzTmFOKGEpKXJldHVybiBzO2VbbitzXT1hfXJldHVybiBzfWZ1bmN0aW9uIHBuKGUsdCxuLHIpe3JldHVybiBqbihIbih0LGUubGVuZ3RoLW4pLGUsbixyKX1mdW5jdGlvbiBnbihlLHQsbixyKXtyZXR1cm4gam4oZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoOysrbil0LnB1c2goMjU1JmUuY2hhckNvZGVBdChuKSk7cmV0dXJuIHR9KHQpLGUsbixyKX1mdW5jdGlvbiB2bihlLHQsbixyKXtyZXR1cm4gZ24oZSx0LG4scil9ZnVuY3Rpb24geW4oZSx0LG4scil7cmV0dXJuIGpuKE1uKHQpLGUsbixyKX1mdW5jdGlvbiBtbihlLHQsbixyKXtyZXR1cm4gam4oZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4scixpLG89W10scz0wO3M8ZS5sZW5ndGgmJiEoKHQtPTIpPDApOysrcylyPShuPWUuY2hhckNvZGVBdChzKSk+PjgsaT1uJTI1NixvLnB1c2goaSksby5wdXNoKHIpO3JldHVybiBvfSh0LGUubGVuZ3RoLW4pLGUsbixyKX1mdW5jdGlvbiB3bihlLHQsbil7cmV0dXJuIDA9PT10JiZuPT09ZS5sZW5ndGg/enQoZSk6enQoZS5zbGljZSh0LG4pKX1mdW5jdGlvbiBfbihlLHQsbil7bj1NYXRoLm1pbihlLmxlbmd0aCxuKTtmb3IodmFyIHI9W10saT10O2k8bjspe3ZhciBvLHMsYSxjLHU9ZVtpXSxsPW51bGwsZD11PjIzOT80OnU+MjIzPzM6dT4xOTE/MjoxO2lmKGkrZDw9bilzd2l0Y2goZCl7Y2FzZSAxOnU8MTI4JiYobD11KTticmVhaztjYXNlIDI6MTI4PT0oMTkyJihvPWVbaSsxXSkpJiYoYz0oMzEmdSk8PDZ8NjMmbyk+MTI3JiYobD1jKTticmVhaztjYXNlIDM6bz1lW2krMV0scz1lW2krMl0sMTI4PT0oMTkyJm8pJiYxMjg9PSgxOTImcykmJihjPSgxNSZ1KTw8MTJ8KDYzJm8pPDw2fDYzJnMpPjIwNDcmJihjPDU1Mjk2fHxjPjU3MzQzKSYmKGw9Yyk7YnJlYWs7Y2FzZSA0Om89ZVtpKzFdLHM9ZVtpKzJdLGE9ZVtpKzNdLDEyOD09KDE5MiZvKSYmMTI4PT0oMTkyJnMpJiYxMjg9PSgxOTImYSkmJihjPSgxNSZ1KTw8MTh8KDYzJm8pPDwxMnwoNjMmcyk8PDZ8NjMmYSk+NjU1MzUmJmM8MTExNDExMiYmKGw9Yyl9bnVsbD09PWw/KGw9NjU1MzMsZD0xKTpsPjY1NTM1JiYobC09NjU1MzYsci5wdXNoKGw+Pj4xMCYxMDIzfDU1Mjk2KSxsPTU2MzIwfDEwMjMmbCksci5wdXNoKGwpLGkrPWR9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoO2lmKHQ8PVNuKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxlKTt2YXIgbj0iIixyPTA7Zm9yKDtyPHQ7KW4rPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGUuc2xpY2UocixyKz1TbikpO3JldHVybiBufShyKX1lbi5wb29sU2l6ZT04MTkyLGVuLl9hdWdtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBlLl9fcHJvdG9fXz1lbi5wcm90b3R5cGUsZX0sZW4uZnJvbT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRuKG51bGwsZSx0LG4pfSxlbi5UWVBFRF9BUlJBWV9TVVBQT1JUJiYoZW4ucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSxlbi5fX3Byb3RvX189VWludDhBcnJheSksZW4uYWxsb2M9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gbm4odCksdDw9MD9RdChlLHQpOnZvaWQgMCE9PW4/InN0cmluZyI9PXR5cGVvZiByP1F0KGUsdCkuZmlsbChuLHIpOlF0KGUsdCkuZmlsbChuKTpRdChlLHQpfShudWxsLGUsdCxuKX0sZW4uYWxsb2NVbnNhZmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHJuKG51bGwsZSl9LGVuLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihlKXtyZXR1cm4gcm4obnVsbCxlKX0sZW4uaXNCdWZmZXI9cW4sZW4uY29tcGFyZT1mdW5jdGlvbihlLHQpe2lmKCFhbihlKXx8IWFuKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMiKTtpZihlPT09dClyZXR1cm4gMDtmb3IodmFyIG49ZS5sZW5ndGgscj10Lmxlbmd0aCxpPTAsbz1NYXRoLm1pbihuLHIpO2k8bzsrK2kpaWYoZVtpXSE9PXRbaV0pe249ZVtpXSxyPXRbaV07YnJlYWt9cmV0dXJuIG48cj8tMTpyPG4/MTowfSxlbi5pc0VuY29kaW5nPWZ1bmN0aW9uKGUpe3N3aXRjaChTdHJpbmcoZSkudG9Mb3dlckNhc2UoKSl7Y2FzZSJoZXgiOmNhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6Y2FzZSJhc2NpaSI6Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpjYXNlImJhc2U2NCI6Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxlbi5jb25jYXQ9ZnVuY3Rpb24oZSx0KXtpZighWHQoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gZW4uYWxsb2MoMCk7dmFyIG47aWYodm9pZCAwPT09dClmb3IodD0wLG49MDtuPGUubGVuZ3RoOysrbil0Kz1lW25dLmxlbmd0aDt2YXIgcj1lbi5hbGxvY1Vuc2FmZSh0KSxpPTA7Zm9yKG49MDtuPGUubGVuZ3RoOysrbil7dmFyIG89ZVtuXTtpZighYW4obykpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO28uY29weShyLGkpLGkrPW8ubGVuZ3RofXJldHVybiByfSxlbi5ieXRlTGVuZ3RoPWNuLGVuLnByb3RvdHlwZS5faXNCdWZmZXI9ITAsZW4ucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKGUlMiE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMiKTtmb3IodmFyIHQ9MDt0PGU7dCs9Milsbih0aGlzLHQsdCsxKTtyZXR1cm4gdGhpc30sZW4ucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKGUlNCE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMiKTtmb3IodmFyIHQ9MDt0PGU7dCs9NClsbih0aGlzLHQsdCszKSxsbih0aGlzLHQrMSx0KzIpO3JldHVybiB0aGlzfSxlbi5wcm90b3R5cGUuc3dhcDY0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSU4IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cyIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz04KWxuKHRoaXMsdCx0KzcpLGxuKHRoaXMsdCsxLHQrNiksbG4odGhpcyx0KzIsdCs1KSxsbih0aGlzLHQrMyx0KzQpO3JldHVybiB0aGlzfSxlbi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT0wfHRoaXMubGVuZ3RoO3JldHVybiAwPT09ZT8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9fbih0aGlzLDAsZSk6dW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlbi5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGUpe2lmKCFhbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIik7cmV0dXJuIHRoaXM9PT1lfHwwPT09ZW4uY29tcGFyZSh0aGlzLGUpfSxlbi5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLmxlbmd0aD4wJiYoZT10aGlzLnRvU3RyaW5nKCJoZXgiLDAsNTApLm1hdGNoKC8uezJ9L2cpLmpvaW4oIiAiKSx0aGlzLmxlbmd0aD41MCYmKGUrPSIgLi4uICIpKSwiPEJ1ZmZlciAiK2UrIj4ifSxlbi5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihlLHQsbixyLGkpe2lmKCFhbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIik7aWYodm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09biYmKG49ZT9lLmxlbmd0aDowKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1pJiYoaT10aGlzLmxlbmd0aCksdDwwfHxuPmUubGVuZ3RofHxyPDB8fGk+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm91dCBvZiByYW5nZSBpbmRleCIpO2lmKHI+PWkmJnQ+PW4pcmV0dXJuIDA7aWYocj49aSlyZXR1cm4tMTtpZih0Pj1uKXJldHVybiAxO2lmKHRoaXM9PT1lKXJldHVybiAwO2Zvcih2YXIgbz0oaT4+Pj0wKS0ocj4+Pj0wKSxzPShuPj4+PTApLSh0Pj4+PTApLGE9TWF0aC5taW4obyxzKSxjPXRoaXMuc2xpY2UocixpKSx1PWUuc2xpY2UodCxuKSxsPTA7bDxhOysrbClpZihjW2xdIT09dVtsXSl7bz1jW2xdLHM9dVtsXTticmVha31yZXR1cm4gbzxzPy0xOnM8bz8xOjB9LGVuLnByb3RvdHlwZS5pbmNsdWRlcz1mdW5jdGlvbihlLHQsbil7cmV0dXJuLTEhPT10aGlzLmluZGV4T2YoZSx0LG4pfSxlbi5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGRuKHRoaXMsZSx0LG4sITApfSxlbi5wcm90b3R5cGUubGFzdEluZGV4T2Y9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBkbih0aGlzLGUsdCxuLCExKX0sZW4ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKHZvaWQgMD09PXQpcj0idXRmOCIsbj10aGlzLmxlbmd0aCx0PTA7ZWxzZSBpZih2b2lkIDA9PT1uJiYic3RyaW5nIj09dHlwZW9mIHQpcj10LG49dGhpcy5sZW5ndGgsdD0wO2Vsc2V7aWYoIWlzRmluaXRlKHQpKXRocm93IG5ldyBFcnJvcigiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTt0fD0wLGlzRmluaXRlKG4pPyhufD0wLHZvaWQgMD09PXImJihyPSJ1dGY4IikpOihyPW4sbj12b2lkIDApfXZhciBpPXRoaXMubGVuZ3RoLXQ7aWYoKHZvaWQgMD09PW58fG4+aSkmJihuPWkpLGUubGVuZ3RoPjAmJihuPDB8fHQ8MCl8fHQ+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkF0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzIik7cnx8KHI9InV0ZjgiKTtmb3IodmFyIG89ITE7Oylzd2l0Y2gocil7Y2FzZSJoZXgiOnJldHVybiBmbih0aGlzLGUsdCxuKTtjYXNlInV0ZjgiOmNhc2UidXRmLTgiOnJldHVybiBwbih0aGlzLGUsdCxuKTtjYXNlImFzY2lpIjpyZXR1cm4gZ24odGhpcyxlLHQsbik7Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpyZXR1cm4gdm4odGhpcyxlLHQsbik7Y2FzZSJiYXNlNjQiOnJldHVybiB5bih0aGlzLGUsdCxuKTtjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuIG1uKHRoaXMsZSx0LG4pO2RlZmF1bHQ6aWYobyl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK3IpO3I9KCIiK3IpLnRvTG93ZXJDYXNlKCksbz0hMH19LGVuLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiQnVmZmVyIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBTbj00MDk2O2Z1bmN0aW9uIGJuKGUsdCxuKXt2YXIgcj0iIjtuPU1hdGgubWluKGUubGVuZ3RoLG4pO2Zvcih2YXIgaT10O2k8bjsrK2kpcis9U3RyaW5nLmZyb21DaGFyQ29kZSgxMjcmZVtpXSk7cmV0dXJuIHJ9ZnVuY3Rpb24ga24oZSx0LG4pe3ZhciByPSIiO249TWF0aC5taW4oZS5sZW5ndGgsbik7Zm9yKHZhciBpPXQ7aTxuOysraSlyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbaV0pO3JldHVybiByfWZ1bmN0aW9uIEVuKGUsdCxuKXt2YXIgcj1lLmxlbmd0aDsoIXR8fHQ8MCkmJih0PTApLCghbnx8bjwwfHxuPnIpJiYobj1yKTtmb3IodmFyIGk9IiIsbz10O288bjsrK28paSs9TG4oZVtvXSk7cmV0dXJuIGl9ZnVuY3Rpb24gVG4oZSx0LG4pe2Zvcih2YXIgcj1lLnNsaWNlKHQsbiksaT0iIixvPTA7bzxyLmxlbmd0aDtvKz0yKWkrPVN0cmluZy5mcm9tQ2hhckNvZGUocltvXSsyNTYqcltvKzFdKTtyZXR1cm4gaX1mdW5jdGlvbiBSbihlLHQsbil7aWYoZSUxIT0wfHxlPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm9mZnNldCBpcyBub3QgdWludCIpO2lmKGUrdD5uKXRocm93IG5ldyBSYW5nZUVycm9yKCJUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoIil9ZnVuY3Rpb24gQW4oZSx0LG4scixpLG8pe2lmKCFhbihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYodD5pfHx0PG8pdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKG4rcj5lLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIil9ZnVuY3Rpb24gQ24oZSx0LG4scil7dDwwJiYodD02NTUzNSt0KzEpO2Zvcih2YXIgaT0wLG89TWF0aC5taW4oZS5sZW5ndGgtbiwyKTtpPG87KytpKWVbbitpXT0odCYyNTU8PDgqKHI/aToxLWkpKT4+PjgqKHI/aToxLWkpfWZ1bmN0aW9uIERuKGUsdCxuLHIpe3Q8MCYmKHQ9NDI5NDk2NzI5NSt0KzEpO2Zvcih2YXIgaT0wLG89TWF0aC5taW4oZS5sZW5ndGgtbiw0KTtpPG87KytpKWVbbitpXT10Pj4+OCoocj9pOjMtaSkmMjU1fWZ1bmN0aW9uIFBuKGUsdCxuLHIsaSxvKXtpZihuK3I+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO2lmKG48MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIil9ZnVuY3Rpb24gSW4oZSx0LG4scixpKXtyZXR1cm4gaXx8UG4oZSwwLG4sNCksVnQoZSx0LG4sciwyMyw0KSxuKzR9ZnVuY3Rpb24gT24oZSx0LG4scixpKXtyZXR1cm4gaXx8UG4oZSwwLG4sOCksVnQoZSx0LG4sciw1Miw4KSxuKzh9ZW4ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj10aGlzLmxlbmd0aDtpZigoZT1+fmUpPDA/KGUrPXIpPDAmJihlPTApOmU+ciYmKGU9ciksKHQ9dm9pZCAwPT09dD9yOn5+dCk8MD8odCs9cik8MCYmKHQ9MCk6dD5yJiYodD1yKSx0PGUmJih0PWUpLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQpKG49dGhpcy5zdWJhcnJheShlLHQpKS5fX3Byb3RvX189ZW4ucHJvdG90eXBlO2Vsc2V7dmFyIGk9dC1lO249bmV3IGVuKGksdm9pZCAwKTtmb3IodmFyIG89MDtvPGk7KytvKW5bb109dGhpc1tvK2VdfXJldHVybiBufSxlbi5wcm90b3R5cGUucmVhZFVJbnRMRT1mdW5jdGlvbihlLHQsbil7ZXw9MCx0fD0wLG58fFJuKGUsdCx0aGlzLmxlbmd0aCk7Zm9yKHZhciByPXRoaXNbZV0saT0xLG89MDsrK288dCYmKGkqPTI1Nik7KXIrPXRoaXNbZStvXSppO3JldHVybiByfSxlbi5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbihlLHQsbil7ZXw9MCx0fD0wLG58fFJuKGUsdCx0aGlzLmxlbmd0aCk7Zm9yKHZhciByPXRoaXNbZSstLXRdLGk9MTt0PjAmJihpKj0yNTYpOylyKz10aGlzW2UrLS10XSppO3JldHVybiByfSxlbi5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFJuKGUsMSx0aGlzLmxlbmd0aCksdGhpc1tlXX0sZW4ucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxSbihlLDIsdGhpcy5sZW5ndGgpLHRoaXNbZV18dGhpc1tlKzFdPDw4fSxlbi5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFJuKGUsMix0aGlzLmxlbmd0aCksdGhpc1tlXTw8OHx0aGlzW2UrMV19LGVuLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8Um4oZSw0LHRoaXMubGVuZ3RoKSwodGhpc1tlXXx0aGlzW2UrMV08PDh8dGhpc1tlKzJdPDwxNikrMTY3NzcyMTYqdGhpc1tlKzNdfSxlbi5wcm90b3R5cGUucmVhZFVJbnQzMkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFJuKGUsNCx0aGlzLmxlbmd0aCksMTY3NzcyMTYqdGhpc1tlXSsodGhpc1tlKzFdPDwxNnx0aGlzW2UrMl08PDh8dGhpc1tlKzNdKX0sZW4ucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbihlLHQsbil7ZXw9MCx0fD0wLG58fFJuKGUsdCx0aGlzLmxlbmd0aCk7Zm9yKHZhciByPXRoaXNbZV0saT0xLG89MDsrK288dCYmKGkqPTI1Nik7KXIrPXRoaXNbZStvXSppO3JldHVybiByPj0oaSo9MTI4KSYmKHItPU1hdGgucG93KDIsOCp0KSkscn0sZW4ucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbihlLHQsbil7ZXw9MCx0fD0wLG58fFJuKGUsdCx0aGlzLmxlbmd0aCk7Zm9yKHZhciByPXQsaT0xLG89dGhpc1tlKy0tcl07cj4wJiYoaSo9MjU2KTspbys9dGhpc1tlKy0tcl0qaTtyZXR1cm4gbz49KGkqPTEyOCkmJihvLT1NYXRoLnBvdygyLDgqdCkpLG99LGVuLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxSbihlLDEsdGhpcy5sZW5ndGgpLDEyOCZ0aGlzW2VdPy0xKigyNTUtdGhpc1tlXSsxKTp0aGlzW2VdfSxlbi5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oZSx0KXt0fHxSbihlLDIsdGhpcy5sZW5ndGgpO3ZhciBuPXRoaXNbZV18dGhpc1tlKzFdPDw4O3JldHVybiAzMjc2OCZuPzQyOTQ5MDE3NjB8bjpufSxlbi5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oZSx0KXt0fHxSbihlLDIsdGhpcy5sZW5ndGgpO3ZhciBuPXRoaXNbZSsxXXx0aGlzW2VdPDw4O3JldHVybiAzMjc2OCZuPzQyOTQ5MDE3NjB8bjpufSxlbi5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8Um4oZSw0LHRoaXMubGVuZ3RoKSx0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2fHRoaXNbZSszXTw8MjR9LGVuLnByb3RvdHlwZS5yZWFkSW50MzJCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxSbihlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV08PDI0fHRoaXNbZSsxXTw8MTZ8dGhpc1tlKzJdPDw4fHRoaXNbZSszXX0sZW4ucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fFJuKGUsNCx0aGlzLmxlbmd0aCksWXQodGhpcyxlLCEwLDIzLDQpfSxlbi5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8Um4oZSw0LHRoaXMubGVuZ3RoKSxZdCh0aGlzLGUsITEsMjMsNCl9LGVuLnByb3RvdHlwZS5yZWFkRG91YmxlTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8Um4oZSw4LHRoaXMubGVuZ3RoKSxZdCh0aGlzLGUsITAsNTIsOCl9LGVuLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8Um4oZSw4LHRoaXMubGVuZ3RoKSxZdCh0aGlzLGUsITEsNTIsOCl9LGVuLnByb3RvdHlwZS53cml0ZVVJbnRMRT1mdW5jdGlvbihlLHQsbixyKXsoZT0rZSx0fD0wLG58PTAscil8fEFuKHRoaXMsZSx0LG4sTWF0aC5wb3coMiw4Km4pLTEsMCk7dmFyIGk9MSxvPTA7Zm9yKHRoaXNbdF09MjU1JmU7KytvPG4mJihpKj0yNTYpOyl0aGlzW3Qrb109ZS9pJjI1NTtyZXR1cm4gdCtufSxlbi5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24oZSx0LG4scil7KGU9K2UsdHw9MCxufD0wLHIpfHxBbih0aGlzLGUsdCxuLE1hdGgucG93KDIsOCpuKS0xLDApO3ZhciBpPW4tMSxvPTE7Zm9yKHRoaXNbdCtpXT0yNTUmZTstLWk+PTAmJihvKj0yNTYpOyl0aGlzW3QraV09ZS9vJjI1NTtyZXR1cm4gdCtufSxlbi5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxBbih0aGlzLGUsdCwxLDI1NSwwKSxlbi5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoZT1NYXRoLmZsb29yKGUpKSx0aGlzW3RdPTI1NSZlLHQrMX0sZW4ucHJvdG90eXBlLndyaXRlVUludDE2TEU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8QW4odGhpcyxlLHQsMiw2NTUzNSwwKSxlbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPTI1NSZlLHRoaXNbdCsxXT1lPj4+OCk6Q24odGhpcyxlLHQsITApLHQrMn0sZW4ucHJvdG90eXBlLndyaXRlVUludDE2QkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8QW4odGhpcyxlLHQsMiw2NTUzNSwwKSxlbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPWU+Pj44LHRoaXNbdCsxXT0yNTUmZSk6Q24odGhpcyxlLHQsITEpLHQrMn0sZW4ucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8QW4odGhpcyxlLHQsNCw0Mjk0OTY3Mjk1LDApLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdCszXT1lPj4+MjQsdGhpc1t0KzJdPWU+Pj4xNix0aGlzW3QrMV09ZT4+PjgsdGhpc1t0XT0yNTUmZSk6RG4odGhpcyxlLHQsITApLHQrNH0sZW4ucHJvdG90eXBlLndyaXRlVUludDMyQkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8QW4odGhpcyxlLHQsNCw0Mjk0OTY3Mjk1LDApLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjI0LHRoaXNbdCsxXT1lPj4+MTYsdGhpc1t0KzJdPWU+Pj44LHRoaXNbdCszXT0yNTUmZSk6RG4odGhpcyxlLHQsITEpLHQrNH0sZW4ucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24oZSx0LG4scil7aWYoZT0rZSx0fD0wLCFyKXt2YXIgaT1NYXRoLnBvdygyLDgqbi0xKTtBbih0aGlzLGUsdCxuLGktMSwtaSl9dmFyIG89MCxzPTEsYT0wO2Zvcih0aGlzW3RdPTI1NSZlOysrbzxuJiYocyo9MjU2KTspZTwwJiYwPT09YSYmMCE9PXRoaXNbdCtvLTFdJiYoYT0xKSx0aGlzW3Qrb109KGUvcz4+MCktYSYyNTU7cmV0dXJuIHQrbn0sZW4ucHJvdG90eXBlLndyaXRlSW50QkU9ZnVuY3Rpb24oZSx0LG4scil7aWYoZT0rZSx0fD0wLCFyKXt2YXIgaT1NYXRoLnBvdygyLDgqbi0xKTtBbih0aGlzLGUsdCxuLGktMSwtaSl9dmFyIG89bi0xLHM9MSxhPTA7Zm9yKHRoaXNbdCtvXT0yNTUmZTstLW8+PTAmJihzKj0yNTYpOyllPDAmJjA9PT1hJiYwIT09dGhpc1t0K28rMV0mJihhPTEpLHRoaXNbdCtvXT0oZS9zPj4wKS1hJjI1NTtyZXR1cm4gdCtufSxlbi5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fEFuKHRoaXMsZSx0LDEsMTI3LC0xMjgpLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPU1hdGguZmxvb3IoZSkpLGU8MCYmKGU9MjU1K2UrMSksdGhpc1t0XT0yNTUmZSx0KzF9LGVuLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8QW4odGhpcyxlLHQsMiwzMjc2NywtMzI3NjgpLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44KTpDbih0aGlzLGUsdCwhMCksdCsyfSxlbi5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fEFuKHRoaXMsZSx0LDIsMzI3NjcsLTMyNzY4KSxlbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPWU+Pj44LHRoaXNbdCsxXT0yNTUmZSk6Q24odGhpcyxlLHQsITEpLHQrMn0sZW4ucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxBbih0aGlzLGUsdCw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44LHRoaXNbdCsyXT1lPj4+MTYsdGhpc1t0KzNdPWU+Pj4yNCk6RG4odGhpcyxlLHQsITApLHQrNH0sZW4ucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxBbih0aGlzLGUsdCw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLGU8MCYmKGU9NDI5NDk2NzI5NStlKzEpLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjI0LHRoaXNbdCsxXT1lPj4+MTYsdGhpc1t0KzJdPWU+Pj44LHRoaXNbdCszXT0yNTUmZSk6RG4odGhpcyxlLHQsITEpLHQrNH0sZW4ucHJvdG90eXBlLndyaXRlRmxvYXRMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIEluKHRoaXMsZSx0LCEwLG4pfSxlbi5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gSW4odGhpcyxlLHQsITEsbil9LGVuLnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gT24odGhpcyxlLHQsITAsbil9LGVuLnByb3RvdHlwZS53cml0ZURvdWJsZUJFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gT24odGhpcyxlLHQsITEsbil9LGVuLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUsdCxuLHIpe2lmKG58fChuPTApLHJ8fDA9PT1yfHwocj10aGlzLmxlbmd0aCksdD49ZS5sZW5ndGgmJih0PWUubGVuZ3RoKSx0fHwodD0wKSxyPjAmJnI8biYmKHI9bikscj09PW4pcmV0dXJuIDA7aWYoMD09PWUubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYodDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7aWYobjwwfHxuPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKHI8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic291cmNlRW5kIG91dCBvZiBib3VuZHMiKTtyPnRoaXMubGVuZ3RoJiYocj10aGlzLmxlbmd0aCksZS5sZW5ndGgtdDxyLW4mJihyPWUubGVuZ3RoLXQrbik7dmFyIGksbz1yLW47aWYodGhpcz09PWUmJm48dCYmdDxyKWZvcihpPW8tMTtpPj0wOy0taSllW2krdF09dGhpc1tpK25dO2Vsc2UgaWYobzwxZTN8fCFlbi5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihpPTA7aTxvOysraSllW2krdF09dGhpc1tpK25dO2Vsc2UgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoZSx0aGlzLnN1YmFycmF5KG4sbitvKSx0KTtyZXR1cm4gb30sZW4ucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oZSx0LG4scil7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZigic3RyaW5nIj09dHlwZW9mIHQ/KHI9dCx0PTAsbj10aGlzLmxlbmd0aCk6InN0cmluZyI9PXR5cGVvZiBuJiYocj1uLG49dGhpcy5sZW5ndGgpLDE9PT1lLmxlbmd0aCl7dmFyIGk9ZS5jaGFyQ29kZUF0KDApO2k8MjU2JiYoZT1pKX1pZih2b2lkIDAhPT1yJiYic3RyaW5nIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZyIpO2lmKCJzdHJpbmciPT10eXBlb2YgciYmIWVuLmlzRW5jb2RpbmcocikpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIityKX1lbHNlIm51bWJlciI9PXR5cGVvZiBlJiYoZSY9MjU1KTtpZih0PDB8fHRoaXMubGVuZ3RoPHR8fHRoaXMubGVuZ3RoPG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk91dCBvZiByYW5nZSBpbmRleCIpO2lmKG48PXQpcmV0dXJuIHRoaXM7dmFyIG87aWYodD4+Pj0wLG49dm9pZCAwPT09bj90aGlzLmxlbmd0aDpuPj4+MCxlfHwoZT0wKSwibnVtYmVyIj09dHlwZW9mIGUpZm9yKG89dDtvPG47KytvKXRoaXNbb109ZTtlbHNle3ZhciBzPWFuKGUpP2U6SG4obmV3IGVuKGUscikudG9TdHJpbmcoKSksYT1zLmxlbmd0aDtmb3Iobz0wO288bi10Oysrbyl0aGlzW28rdF09c1tvJWFdfXJldHVybiB0aGlzfTt2YXIgVW49L1teK1wvMC05QS1aYS16LV9dL2c7ZnVuY3Rpb24gTG4oZSl7cmV0dXJuIGU8MTY/IjAiK2UudG9TdHJpbmcoMTYpOmUudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIEhuKGUsdCl7dmFyIG47dD10fHwxLzA7Zm9yKHZhciByPWUubGVuZ3RoLGk9bnVsbCxvPVtdLHM9MDtzPHI7KytzKXtpZigobj1lLmNoYXJDb2RlQXQocykpPjU1Mjk1JiZuPDU3MzQ0KXtpZighaSl7aWYobj41NjMxOSl7KHQtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWlmKHMrMT09PXIpeyh0LT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1pPW47Y29udGludWV9aWYobjw1NjMyMCl7KHQtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpLGk9bjtjb250aW51ZX1uPTY1NTM2KyhpLTU1Mjk2PDwxMHxuLTU2MzIwKX1lbHNlIGkmJih0LT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtpZihpPW51bGwsbjwxMjgpe2lmKCh0LT0xKTwwKWJyZWFrO28ucHVzaChuKX1lbHNlIGlmKG48MjA0OCl7aWYoKHQtPTIpPDApYnJlYWs7by5wdXNoKG4+PjZ8MTkyLDYzJm58MTI4KX1lbHNlIGlmKG48NjU1MzYpe2lmKCh0LT0zKTwwKWJyZWFrO28ucHVzaChuPj4xMnwyMjQsbj4+NiY2M3wxMjgsNjMmbnwxMjgpfWVsc2V7aWYoIShuPDExMTQxMTIpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBjb2RlIHBvaW50Iik7aWYoKHQtPTQpPDApYnJlYWs7by5wdXNoKG4+PjE4fDI0MCxuPj4xMiY2M3wxMjgsbj4+NiY2M3wxMjgsNjMmbnwxMjgpfX1yZXR1cm4gb31mdW5jdGlvbiBNbihlKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxzO0p0fHxGdCgpO3ZhciBhPWUubGVuZ3RoO2lmKGElND4wKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCIpO289Ij0iPT09ZVthLTJdPzI6Ij0iPT09ZVthLTFdPzE6MCxzPW5ldyBCdCgzKmEvNC1vKSxyPW8+MD9hLTQ6YTt2YXIgYz0wO2Zvcih0PTAsbj0wO3Q8cjt0Kz00LG4rPTMpaT1LdFtlLmNoYXJDb2RlQXQodCldPDwxOHxLdFtlLmNoYXJDb2RlQXQodCsxKV08PDEyfEt0W2UuY2hhckNvZGVBdCh0KzIpXTw8NnxLdFtlLmNoYXJDb2RlQXQodCszKV0sc1tjKytdPWk+PjE2JjI1NSxzW2MrK109aT4+OCYyNTUsc1tjKytdPTI1NSZpO3JldHVybiAyPT09bz8oaT1LdFtlLmNoYXJDb2RlQXQodCldPDwyfEt0W2UuY2hhckNvZGVBdCh0KzEpXT4+NCxzW2MrK109MjU1JmkpOjE9PT1vJiYoaT1LdFtlLmNoYXJDb2RlQXQodCldPDwxMHxLdFtlLmNoYXJDb2RlQXQodCsxKV08PDR8S3RbZS5jaGFyQ29kZUF0KHQrMildPj4yLHNbYysrXT1pPj44JjI1NSxzW2MrK109MjU1JmkpLHN9KGZ1bmN0aW9uKGUpe2lmKChlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0/ZS50cmltKCk6ZS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIil9KGUpLnJlcGxhY2UoVW4sIiIpKS5sZW5ndGg8MilyZXR1cm4iIjtmb3IoO2UubGVuZ3RoJTQhPTA7KWUrPSI9IjtyZXR1cm4gZX0oZSkpfWZ1bmN0aW9uIGpuKGUsdCxuLHIpe2Zvcih2YXIgaT0wO2k8ciYmIShpK24+PXQubGVuZ3RofHxpPj1lLmxlbmd0aCk7KytpKXRbaStuXT1lW2ldO3JldHVybiBpfWZ1bmN0aW9uIHFuKGUpe3JldHVybiBudWxsIT1lJiYoISFlLl9pc0J1ZmZlcnx8Tm4oZSl8fGZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlLnJlYWRGbG9hdExFJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5zbGljZSYmTm4oZS5zbGljZSgwLDApKX0oZSkpfWZ1bmN0aW9uIE5uKGUpe3JldHVybiEhZS5jb25zdHJ1Y3RvciYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3IuaXNCdWZmZXImJmUuY29uc3RydWN0b3IuaXNCdWZmZXIoZSl9dmFyIHhuPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLEJ1ZmZlcjplbixJTlNQRUNUX01BWF9CWVRFUzo1MCxTbG93QnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybitlIT1lJiYoZT0wKSxlbi5hbGxvYygrZSl9LGlzQnVmZmVyOnFuLGtNYXhMZW5ndGg6JHR9KSxLbj17ZXhwb3J0czp7fX0sQm49e30sSm49e307T2JqZWN0LmRlZmluZVByb3BlcnR5KEpuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxKbi5kZWZhdWx0PWZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoLG49dCU0O2lmKCFuKXJldHVybiBlO3ZhciByPXQsaT00LW4sbz10K2kscz1lbi5hbGxvYyhvKTtmb3Iocy53cml0ZShlKTtpLS07KXMud3JpdGUoIj0iLHIrKyk7cmV0dXJuIHMudG9TdHJpbmcoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KEJuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgRm49Sm47ZnVuY3Rpb24gV24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9InV0ZjgiKSxlbi5pc0J1ZmZlcihlKT9ZbihlLnRvU3RyaW5nKCJiYXNlNjQiKSk6WW4oZW4uZnJvbShlLHQpLnRvU3RyaW5nKCJiYXNlNjQiKSl9ZnVuY3Rpb24gem4oZSl7cmV0dXJuIGU9ZS50b1N0cmluZygpLEZuLmRlZmF1bHQoZSkucmVwbGFjZSgvXC0vZywiKyIpLnJlcGxhY2UoL18vZywiLyIpfWZ1bmN0aW9uIFluKGUpe3JldHVybiBlLnJlcGxhY2UoLz0vZywiIikucmVwbGFjZSgvXCsvZywiLSIpLnJlcGxhY2UoL1wvL2csIl8iKX12YXIgVm4sR249V247R24uZW5jb2RlPVduLEduLmRlY29kZT1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0idXRmOCIpLGVuLmZyb20oem4oZSksImJhc2U2NCIpLnRvU3RyaW5nKHQpfSxHbi50b0Jhc2U2ND16bixHbi5mcm9tQmFzZTY0PVluLEduLnRvQnVmZmVyPWZ1bmN0aW9uKGUpe3JldHVybiBlbi5mcm9tKHpuKGUpLCJiYXNlNjQiKX0sQm4uZGVmYXVsdD1HbiwoVm49S24pLmV4cG9ydHM9Qm4uZGVmYXVsdCxWbi5leHBvcnRzLmRlZmF1bHQ9Vm4uZXhwb3J0czt2YXIgWG49S24uZXhwb3J0cywkbj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUpeyFmdW5jdGlvbih0LG4pe3ZhciByPXt9OyFmdW5jdGlvbihlKXtlLl9fZXNNb2R1bGU9ITAsZS5kaWdlc3RMZW5ndGg9MzIsZS5ibG9ja1NpemU9NjQ7dmFyIHQ9bmV3IFVpbnQzMkFycmF5KFsxMTE2MzUyNDA4LDE4OTk0NDc0NDEsMzA0OTMyMzQ3MSwzOTIxMDA5NTczLDk2MTk4NzE2MywxNTA4OTcwOTkzLDI0NTM2MzU3NDgsMjg3MDc2MzIyMSwzNjI0MzgxMDgwLDMxMDU5ODQwMSw2MDcyMjUyNzgsMTQyNjg4MTk4NywxOTI1MDc4Mzg4LDIxNjIwNzgyMDYsMjYxNDg4ODEwMywzMjQ4MjIyNTgwLDM4MzUzOTA0MDEsNDAyMjIyNDc3NCwyNjQzNDcwNzgsNjA0ODA3NjI4LDc3MDI1NTk4MywxMjQ5MTUwMTIyLDE1NTUwODE2OTIsMTk5NjA2NDk4NiwyNTU0MjIwODgyLDI4MjE4MzQzNDksMjk1Mjk5NjgwOCwzMjEwMzEzNjcxLDMzMzY1NzE4OTEsMzU4NDUyODcxMSwxMTM5MjY5OTMsMzM4MjQxODk1LDY2NjMwNzIwNSw3NzM1Mjk5MTIsMTI5NDc1NzM3MiwxMzk2MTgyMjkxLDE2OTUxODM3MDAsMTk4NjY2MTA1MSwyMTc3MDI2MzUwLDI0NTY5NTYwMzcsMjczMDQ4NTkyMSwyODIwMzAyNDExLDMyNTk3MzA4MDAsMzM0NTc2NDc3MSwzNTE2MDY1ODE3LDM2MDAzNTI4MDQsNDA5NDU3MTkwOSwyNzU0MjMzNDQsNDMwMjI3NzM0LDUwNjk0ODYxNiw2NTkwNjA1NTYsODgzOTk3ODc3LDk1ODEzOTU3MSwxMzIyODIyMjE4LDE1MzcwMDIwNjMsMTc0Nzg3Mzc3OSwxOTU1NTYyMjIyLDIwMjQxMDQ4MTUsMjIyNzczMDQ1MiwyMzYxODUyNDI0LDI0Mjg0MzY0NzQsMjc1NjczNDE4NywzMjA0MDMxNDc5LDMzMjkzMjUyOThdKTtmdW5jdGlvbiBuKGUsbixyLGksbyl7Zm9yKHZhciBzLGEsYyx1LGwsZCxoLGYscCxnLHYseSxtO28+PTY0Oyl7Zm9yKHM9blswXSxhPW5bMV0sYz1uWzJdLHU9blszXSxsPW5bNF0sZD1uWzVdLGg9bls2XSxmPW5bN10sZz0wO2c8MTY7ZysrKXY9aSs0KmcsZVtnXT0oMjU1JnJbdl0pPDwyNHwoMjU1JnJbdisxXSk8PDE2fCgyNTUmclt2KzJdKTw8OHwyNTUmclt2KzNdO2ZvcihnPTE2O2c8NjQ7ZysrKXk9KChwPWVbZy0yXSk+Pj4xN3xwPDwxNSleKHA+Pj4xOXxwPDwxMylecD4+PjEwLG09KChwPWVbZy0xNV0pPj4+N3xwPDwyNSleKHA+Pj4xOHxwPDwxNClecD4+PjMsZVtnXT0oeStlW2ctN118MCkrKG0rZVtnLTE2XXwwKTtmb3IoZz0wO2c8NjQ7ZysrKXk9KCgobD4+PjZ8bDw8MjYpXihsPj4+MTF8bDw8MjEpXihsPj4+MjV8bDw8NykpKyhsJmRefmwmaCl8MCkrKGYrKHRbZ10rZVtnXXwwKXwwKXwwLG09KChzPj4+MnxzPDwzMCleKHM+Pj4xM3xzPDwxOSleKHM+Pj4yMnxzPDwxMCkpKyhzJmFecyZjXmEmYyl8MCxmPWgsaD1kLGQ9bCxsPXUreXwwLHU9YyxjPWEsYT1zLHM9eSttfDA7blswXSs9cyxuWzFdKz1hLG5bMl0rPWMsblszXSs9dSxuWzRdKz1sLG5bNV0rPWQsbls2XSs9aCxuWzddKz1mLGkrPTY0LG8tPTY0fXJldHVybiBpfXZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuZGlnZXN0TGVuZ3RoPWUuZGlnZXN0TGVuZ3RoLHRoaXMuYmxvY2tTaXplPWUuYmxvY2tTaXplLHRoaXMuc3RhdGU9bmV3IEludDMyQXJyYXkoOCksdGhpcy50ZW1wPW5ldyBJbnQzMkFycmF5KDY0KSx0aGlzLmJ1ZmZlcj1uZXcgVWludDhBcnJheSgxMjgpLHRoaXMuYnVmZmVyTGVuZ3RoPTAsdGhpcy5ieXRlc0hhc2hlZD0wLHRoaXMuZmluaXNoZWQ9ITEsdGhpcy5yZXNldCgpfXJldHVybiB0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlWzBdPTE3NzkwMzM3MDMsdGhpcy5zdGF0ZVsxXT0zMTQ0MTM0Mjc3LHRoaXMuc3RhdGVbMl09MTAxMzkwNDI0Mix0aGlzLnN0YXRlWzNdPTI3NzM0ODA3NjIsdGhpcy5zdGF0ZVs0XT0xMzU5ODkzMTE5LHRoaXMuc3RhdGVbNV09MjYwMDgyMjkyNCx0aGlzLnN0YXRlWzZdPTUyODczNDYzNSx0aGlzLnN0YXRlWzddPTE1NDE0NTkyMjUsdGhpcy5idWZmZXJMZW5ndGg9MCx0aGlzLmJ5dGVzSGFzaGVkPTAsdGhpcy5maW5pc2hlZD0hMSx0aGlzfSx0LnByb3RvdHlwZS5jbGVhbj1mdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8dGhpcy5idWZmZXIubGVuZ3RoO2UrKyl0aGlzLmJ1ZmZlcltlXT0wO2ZvcihlPTA7ZTx0aGlzLnRlbXAubGVuZ3RoO2UrKyl0aGlzLnRlbXBbZV09MDt0aGlzLnJlc2V0KCl9LHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PWUubGVuZ3RoKSx0aGlzLmZpbmlzaGVkKXRocm93IG5ldyBFcnJvcigiU0hBMjU2OiBjYW4ndCB1cGRhdGUgYmVjYXVzZSBoYXNoIHdhcyBmaW5pc2hlZC4iKTt2YXIgcj0wO2lmKHRoaXMuYnl0ZXNIYXNoZWQrPXQsdGhpcy5idWZmZXJMZW5ndGg+MCl7Zm9yKDt0aGlzLmJ1ZmZlckxlbmd0aDw2NCYmdD4wOyl0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlckxlbmd0aCsrXT1lW3IrK10sdC0tOzY0PT09dGhpcy5idWZmZXJMZW5ndGgmJihuKHRoaXMudGVtcCx0aGlzLnN0YXRlLHRoaXMuYnVmZmVyLDAsNjQpLHRoaXMuYnVmZmVyTGVuZ3RoPTApfWZvcih0Pj02NCYmKHI9bih0aGlzLnRlbXAsdGhpcy5zdGF0ZSxlLHIsdCksdCU9NjQpO3Q+MDspdGhpcy5idWZmZXJbdGhpcy5idWZmZXJMZW5ndGgrK109ZVtyKytdLHQtLTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmZpbmlzaGVkKXt2YXIgdD10aGlzLmJ5dGVzSGFzaGVkLHI9dGhpcy5idWZmZXJMZW5ndGgsaT10LzUzNjg3MDkxMnwwLG89dDw8MyxzPXQlNjQ8NTY/NjQ6MTI4O3RoaXMuYnVmZmVyW3JdPTEyODtmb3IodmFyIGE9cisxO2E8cy04O2ErKyl0aGlzLmJ1ZmZlclthXT0wO3RoaXMuYnVmZmVyW3MtOF09aT4+PjI0JjI1NSx0aGlzLmJ1ZmZlcltzLTddPWk+Pj4xNiYyNTUsdGhpcy5idWZmZXJbcy02XT1pPj4+OCYyNTUsdGhpcy5idWZmZXJbcy01XT1pPj4+MCYyNTUsdGhpcy5idWZmZXJbcy00XT1vPj4+MjQmMjU1LHRoaXMuYnVmZmVyW3MtM109bz4+PjE2JjI1NSx0aGlzLmJ1ZmZlcltzLTJdPW8+Pj44JjI1NSx0aGlzLmJ1ZmZlcltzLTFdPW8+Pj4wJjI1NSxuKHRoaXMudGVtcCx0aGlzLnN0YXRlLHRoaXMuYnVmZmVyLDAscyksdGhpcy5maW5pc2hlZD0hMH1mb3IoYT0wO2E8ODthKyspZVs0KmErMF09dGhpcy5zdGF0ZVthXT4+PjI0JjI1NSxlWzQqYSsxXT10aGlzLnN0YXRlW2FdPj4+MTYmMjU1LGVbNCphKzJdPXRoaXMuc3RhdGVbYV0+Pj44JjI1NSxlWzQqYSszXT10aGlzLnN0YXRlW2FdPj4+MCYyNTU7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBlPW5ldyBVaW50OEFycmF5KHRoaXMuZGlnZXN0TGVuZ3RoKTtyZXR1cm4gdGhpcy5maW5pc2goZSksZX0sdC5wcm90b3R5cGUuX3NhdmVTdGF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMuc3RhdGUubGVuZ3RoO3QrKyllW3RdPXRoaXMuc3RhdGVbdF19LHQucHJvdG90eXBlLl9yZXN0b3JlU3RhdGU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHRoaXMuc3RhdGUubGVuZ3RoO24rKyl0aGlzLnN0YXRlW25dPWVbbl07dGhpcy5ieXRlc0hhc2hlZD10LHRoaXMuZmluaXNoZWQ9ITEsdGhpcy5idWZmZXJMZW5ndGg9MH0sdH0oKTtlLkhhc2g9cjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5pbm5lcj1uZXcgcix0aGlzLm91dGVyPW5ldyByLHRoaXMuYmxvY2tTaXplPXRoaXMuaW5uZXIuYmxvY2tTaXplLHRoaXMuZGlnZXN0TGVuZ3RoPXRoaXMuaW5uZXIuZGlnZXN0TGVuZ3RoO3ZhciB0PW5ldyBVaW50OEFycmF5KHRoaXMuYmxvY2tTaXplKTtpZihlLmxlbmd0aD50aGlzLmJsb2NrU2l6ZSkobmV3IHIpLnVwZGF0ZShlKS5maW5pc2godCkuY2xlYW4oKTtlbHNlIGZvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXRbbl09ZVtuXTtmb3Iobj0wO248dC5sZW5ndGg7bisrKXRbbl1ePTU0O3RoaXMuaW5uZXIudXBkYXRlKHQpO2ZvcihuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXV49MTA2O3RoaXMub3V0ZXIudXBkYXRlKHQpLHRoaXMuaXN0YXRlPW5ldyBVaW50MzJBcnJheSg4KSx0aGlzLm9zdGF0ZT1uZXcgVWludDMyQXJyYXkoOCksdGhpcy5pbm5lci5fc2F2ZVN0YXRlKHRoaXMuaXN0YXRlKSx0aGlzLm91dGVyLl9zYXZlU3RhdGUodGhpcy5vc3RhdGUpO2ZvcihuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXT0wfXJldHVybiBlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlubmVyLl9yZXN0b3JlU3RhdGUodGhpcy5pc3RhdGUsdGhpcy5pbm5lci5ibG9ja1NpemUpLHRoaXMub3V0ZXIuX3Jlc3RvcmVTdGF0ZSh0aGlzLm9zdGF0ZSx0aGlzLm91dGVyLmJsb2NrU2l6ZSksdGhpc30sZS5wcm90b3R5cGUuY2xlYW49ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuaXN0YXRlLmxlbmd0aDtlKyspdGhpcy5vc3RhdGVbZV09dGhpcy5pc3RhdGVbZV09MDt0aGlzLmlubmVyLmNsZWFuKCksdGhpcy5vdXRlci5jbGVhbigpfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5uZXIudXBkYXRlKGUpLHRoaXN9LGUucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vdXRlci5maW5pc2hlZD90aGlzLm91dGVyLmZpbmlzaChlKToodGhpcy5pbm5lci5maW5pc2goZSksdGhpcy5vdXRlci51cGRhdGUoZSx0aGlzLmRpZ2VzdExlbmd0aCkuZmluaXNoKGUpKSx0aGlzfSxlLnByb3RvdHlwZS5kaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgVWludDhBcnJheSh0aGlzLmRpZ2VzdExlbmd0aCk7cmV0dXJuIHRoaXMuZmluaXNoKGUpLGV9LGV9KCk7ZnVuY3Rpb24gbyhlKXt2YXIgdD0obmV3IHIpLnVwZGF0ZShlKSxuPXQuZGlnZXN0KCk7cmV0dXJuIHQuY2xlYW4oKSxufWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj1uZXcgaShlKS51cGRhdGUodCkscj1uLmRpZ2VzdCgpO3JldHVybiBuLmNsZWFuKCkscn1mdW5jdGlvbiBhKGUsdCxuLHIpe3ZhciBpPXJbMF07aWYoMD09PWkpdGhyb3cgbmV3IEVycm9yKCJoa2RmOiBjYW5ub3QgZXhwYW5kIG1vcmUiKTt0LnJlc2V0KCksaT4xJiZ0LnVwZGF0ZShlKSxuJiZ0LnVwZGF0ZShuKSx0LnVwZGF0ZShyKSx0LmZpbmlzaChlKSxyWzBdKyt9ZS5ITUFDPWksZS5oYXNoPW8sZS5kZWZhdWx0PW8sZS5obWFjPXM7dmFyIGM9bmV3IFVpbnQ4QXJyYXkoZS5kaWdlc3RMZW5ndGgpO2Z1bmN0aW9uIHUoZSx0LG4scil7dm9pZCAwPT09dCYmKHQ9Yyksdm9pZCAwPT09ciYmKHI9MzIpO2Zvcih2YXIgbz1uZXcgVWludDhBcnJheShbMV0pLHU9cyh0LGUpLGw9bmV3IGkodSksZD1uZXcgVWludDhBcnJheShsLmRpZ2VzdExlbmd0aCksaD1kLmxlbmd0aCxmPW5ldyBVaW50OEFycmF5KHIpLHA9MDtwPHI7cCsrKWg9PT1kLmxlbmd0aCYmKGEoZCxsLG4sbyksaD0wKSxmW3BdPWRbaCsrXTtyZXR1cm4gbC5jbGVhbigpLGQuZmlsbCgwKSxvLmZpbGwoMCksZn1mdW5jdGlvbiBsKGUsdCxuLHIpe2Zvcih2YXIgbz1uZXcgaShlKSxzPW8uZGlnZXN0TGVuZ3RoLGE9bmV3IFVpbnQ4QXJyYXkoNCksYz1uZXcgVWludDhBcnJheShzKSx1PW5ldyBVaW50OEFycmF5KHMpLGw9bmV3IFVpbnQ4QXJyYXkociksZD0wO2QqczxyO2QrKyl7dmFyIGg9ZCsxO2FbMF09aD4+PjI0JjI1NSxhWzFdPWg+Pj4xNiYyNTUsYVsyXT1oPj4+OCYyNTUsYVszXT1oPj4+MCYyNTUsby5yZXNldCgpLG8udXBkYXRlKHQpLG8udXBkYXRlKGEpLG8uZmluaXNoKHUpO2Zvcih2YXIgZj0wO2Y8cztmKyspY1tmXT11W2ZdO2ZvcihmPTI7Zjw9bjtmKyspe28ucmVzZXQoKSxvLnVwZGF0ZSh1KS5maW5pc2godSk7Zm9yKHZhciBwPTA7cDxzO3ArKyljW3BdXj11W3BdfWZvcihmPTA7ZjxzJiZkKnMrZjxyO2YrKylsW2QqcytmXT1jW2ZdfWZvcihkPTA7ZDxzO2QrKyljW2RdPXVbZF09MDtmb3IoZD0wO2Q8NDtkKyspYVtkXT0wO3JldHVybiBvLmNsZWFuKCksbH1lLmhrZGY9dSxlLnBia2RmMj1sfShyKTt2YXIgaT1yLmRlZmF1bHQ7Zm9yKHZhciBvIGluIHIpaVtvXT1yW29dO2UuZXhwb3J0cz1pfSgpfSgkbik7dmFyIFpuPUQoJG4uZXhwb3J0cyksUW49Y3J5cHRvO2NvbnN0IGVyPWU9PmUgaW5zdGFuY2VvZiBDcnlwdG9LZXksdHI9bmV3IFRleHRFbmNvZGVyLG5yPW5ldyBUZXh0RGVjb2Rlcjtjb25zdCBycj1lPT57bGV0IHQ9ZTt0IGluc3RhbmNlb2YgVWludDhBcnJheSYmKHQ9bnIuZGVjb2RlKHQpKSx0PXQucmVwbGFjZSgvLS9nLCIrIikucmVwbGFjZSgvXy9nLCIvIikucmVwbGFjZSgvXHMvZywiIik7dHJ5e3JldHVybihlPT57Y29uc3QgdD1hdG9iKGUpLG49bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKW5bZV09dC5jaGFyQ29kZUF0KGUpO3JldHVybiBufSkodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGlucHV0IHRvIGJlIGRlY29kZWQgaXMgbm90IGNvcnJlY3RseSBlbmNvZGVkLiIpfX07Y2xhc3MgaXIgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcihlKSx0aGlzLmNvZGU9IkVSUl9KT1NFX0dFTkVSSUMiLHRoaXMubmFtZT10aGlzLmNvbnN0cnVjdG9yLm5hbWUsbnVsbD09PSh0PUVycm9yLmNhcHR1cmVTdGFja1RyYWNlKXx8dm9pZCAwPT09dHx8dC5jYWxsKEVycm9yLHRoaXMsdGhpcy5jb25zdHJ1Y3Rvcil9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KT1NFX0dFTkVSSUMifX1jbGFzcyBvciBleHRlbmRzIGlye2NvbnN0cnVjdG9yKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToidW5zcGVjaWZpZWQiLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOiJ1bnNwZWNpZmllZCI7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEIix0aGlzLmNsYWltPXQsdGhpcy5yZWFzb249bn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXVF9DTEFJTV9WQUxJREFUSU9OX0ZBSUxFRCJ9fWNsYXNzIHNyIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiJ1bnNwZWNpZmllZCIsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06InVuc3BlY2lmaWVkIjtzdXBlcihlKSx0aGlzLmNvZGU9IkVSUl9KV1RfRVhQSVJFRCIsdGhpcy5jbGFpbT10LHRoaXMucmVhc29uPW59c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV1RfRVhQSVJFRCJ9fWNsYXNzIGFyIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pPU0VfQUxHX05PVF9BTExPV0VEIn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pPU0VfQUxHX05PVF9BTExPV0VEIn19Y2xhc3MgY3IgZXh0ZW5kcyBpcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSk9TRV9OT1RfU1VQUE9SVEVEIn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pPU0VfTk9UX1NVUFBPUlRFRCJ9fWNsYXNzIHVyIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXU19JTlZBTElEIn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXU19JTlZBTElEIn19Y2xhc3MgbHIgZXh0ZW5kcyBpcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldUX0lOVkFMSUQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldUX0lOVkFMSUQifX1jbGFzcyBkciBleHRlbmRzIGlye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV0tTX0lOVkFMSUQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldLU19JTlZBTElEIn19Y2xhc3MgaHIgZXh0ZW5kcyBpcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldLU19OT19NQVRDSElOR19LRVkiLHRoaXMubWVzc2FnZT0ibm8gYXBwbGljYWJsZSBrZXkgZm91bmQgaW4gdGhlIEpTT04gV2ViIEtleSBTZXQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldLU19OT19NQVRDSElOR19LRVkifX1jbGFzcyBmciBleHRlbmRzIGlye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV0tTX01VTFRJUExFX01BVENISU5HX0tFWVMiLHRoaXMubWVzc2FnZT0ibXVsdGlwbGUgbWF0Y2hpbmcga2V5cyBmb3VuZCBpbiB0aGUgSlNPTiBXZWIgS2V5IFNldCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV0tTX01VTFRJUExFX01BVENISU5HX0tFWVMifX1jbGFzcyBwciBleHRlbmRzIGlye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV1NfU0lHTkFUVVJFX1ZFUklGSUNBVElPTl9GQUlMRUQiLHRoaXMubWVzc2FnZT0ic2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldTX1NJR05BVFVSRV9WRVJJRklDQVRJT05fRkFJTEVEIn19ZnVuY3Rpb24gZ3IoKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgV2ViU29ja2V0UGFpcn1mdW5jdGlvbiB2cihlKXtsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ImFsZ29yaXRobS5uYW1lIjtyZXR1cm4gbmV3IFR5cGVFcnJvcigiQ3J5cHRvS2V5IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBvcGVyYXRpb24sIGl0cyAiLmNvbmNhdCh0LCIgbXVzdCBiZSAiKS5jb25jYXQoZSkpfWZ1bmN0aW9uIHlyKGUsdCl7cmV0dXJuIGUubmFtZT09PXR9ZnVuY3Rpb24gbXIoZSl7cmV0dXJuIHBhcnNlSW50KGUubmFtZS5zbGljZSg0KSwxMCl9ZnVuY3Rpb24gd3IoZSl7c3dpdGNoKGUpe2Nhc2UiRVMyNTYiOnJldHVybiJQLTI1NiI7Y2FzZSJFUzM4NCI6cmV0dXJuIlAtMzg0IjtjYXNlIkVTNTEyIjpyZXR1cm4iUC01MjEiO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJ1bnJlYWNoYWJsZSIpfX1mdW5jdGlvbiBfcihlLHQpe2lmKHQubGVuZ3RoJiYhdC5zb21lKCh0PT5lLnVzYWdlcy5pbmNsdWRlcyh0KSkpKXtsZXQgZT0iQ3J5cHRvS2V5IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBvcGVyYXRpb24sIGl0cyB1c2FnZXMgbXVzdCBpbmNsdWRlICI7aWYodC5sZW5ndGg+Mil7Y29uc3Qgbj10LnBvcCgpO2UrPSJvbmUgb2YgIi5jb25jYXQodC5qb2luKCIsICIpLCIsIG9yICIpLmNvbmNhdChuLCIuIil9ZWxzZSAyPT09dC5sZW5ndGg/ZSs9Im9uZSBvZiAiLmNvbmNhdCh0WzBdLCIgb3IgIikuY29uY2F0KHRbMV0sIi4iKTplKz0iIi5jb25jYXQodFswXSwiLiIpO3Rocm93IG5ldyBUeXBlRXJyb3IoZSl9fXZhciBTcj1mdW5jdGlvbihlKXtsZXQgdD0iS2V5IG11c3QgYmUgIjtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheShuPjE/bi0xOjApLGk9MTtpPG47aSsrKXJbaS0xXT1hcmd1bWVudHNbaV07aWYoci5sZW5ndGg+Mil7Y29uc3QgZT1yLnBvcCgpO3QrPSJvbmUgb2YgdHlwZSAiLmNvbmNhdChyLmpvaW4oIiwgIiksIiwgb3IgIikuY29uY2F0KGUsIi4iKX1lbHNlIDI9PT1yLmxlbmd0aD90Kz0ib25lIG9mIHR5cGUgIi5jb25jYXQoclswXSwiIG9yICIpLmNvbmNhdChyWzFdLCIuIik6dCs9Im9mIHR5cGUgIi5jb25jYXQoclswXSwiLiIpO3JldHVybiBudWxsPT1lP3QrPSIgUmVjZWl2ZWQgIi5jb25jYXQoZSk6ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUubmFtZT90Kz0iIFJlY2VpdmVkIGZ1bmN0aW9uICIuY29uY2F0KGUubmFtZSk6Im9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lJiZlLmNvbnN0cnVjdG9yJiZlLmNvbnN0cnVjdG9yLm5hbWUmJih0Kz0iIFJlY2VpdmVkIGFuIGluc3RhbmNlIG9mICIuY29uY2F0KGUuY29uc3RydWN0b3IubmFtZSkpLHR9LGJyPWU9PmVyKGUpO2NvbnN0IGtyPVsiQ3J5cHRvS2V5Il07ZnVuY3Rpb24gRXIoZSl7aWYoIm9iamVjdCIhPXR5cGVvZih0PWUpfHxudWxsPT09dHx8IltvYmplY3QgT2JqZWN0XSIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpcmV0dXJuITE7dmFyIHQ7aWYobnVsbD09PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKSlyZXR1cm4hMDtsZXQgbj1lO2Zvcig7bnVsbCE9PU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTspbj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobik7cmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlKT09PW59Y29uc3QgVHI9YXN5bmMgZT0+e3ZhciB0LG47Y29uc3R7YWxnb3JpdGhtOnIsa2V5VXNhZ2VzOml9PWZ1bmN0aW9uKGUpe2xldCB0LG47c3dpdGNoKGUua3R5KXtjYXNlIm9jdCI6c3dpdGNoKGUuYWxnKXtjYXNlIkhTMjU2IjpjYXNlIkhTMzg0IjpjYXNlIkhTNTEyIjp0PXtuYW1lOiJITUFDIixoYXNoOiJTSEEtIi5jb25jYXQoZS5hbGcuc2xpY2UoLTMpKX0sbj1bInNpZ24iLCJ2ZXJpZnkiXTticmVhaztjYXNlIkExMjhDQkMtSFMyNTYiOmNhc2UiQTE5MkNCQy1IUzM4NCI6Y2FzZSJBMjU2Q0JDLUhTNTEyIjp0aHJvdyBuZXcgY3IoIiIuY29uY2F0KGUuYWxnLCIga2V5cyBjYW5ub3QgYmUgaW1wb3J0ZWQgYXMgQ3J5cHRvS2V5IGluc3RhbmNlcyIpKTtjYXNlIkExMjhHQ00iOmNhc2UiQTE5MkdDTSI6Y2FzZSJBMjU2R0NNIjpjYXNlIkExMjhHQ01LVyI6Y2FzZSJBMTkyR0NNS1ciOmNhc2UiQTI1NkdDTUtXIjp0PXtuYW1lOiJBRVMtR0NNIn0sbj1bImVuY3J5cHQiLCJkZWNyeXB0Il07YnJlYWs7Y2FzZSJBMTI4S1ciOmNhc2UiQTE5MktXIjpjYXNlIkEyNTZLVyI6dD17bmFtZToiQUVTLUtXIn0sbj1bIndyYXBLZXkiLCJ1bndyYXBLZXkiXTticmVhaztjYXNlIlBCRVMyLUhTMjU2K0ExMjhLVyI6Y2FzZSJQQkVTMi1IUzM4NCtBMTkyS1ciOmNhc2UiUEJFUzItSFM1MTIrQTI1NktXIjp0PXtuYW1lOiJQQktERjIifSxuPVsiZGVyaXZlQml0cyJdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IGNyKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyAiYWxnIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKX1icmVhaztjYXNlIlJTQSI6c3dpdGNoKGUuYWxnKXtjYXNlIlBTMjU2IjpjYXNlIlBTMzg0IjpjYXNlIlBTNTEyIjp0PXtuYW1lOiJSU0EtUFNTIixoYXNoOiJTSEEtIi5jb25jYXQoZS5hbGcuc2xpY2UoLTMpKX0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIlJTMjU2IjpjYXNlIlJTMzg0IjpjYXNlIlJTNTEyIjp0PXtuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSIsaGFzaDoiU0hBLSIuY29uY2F0KGUuYWxnLnNsaWNlKC0zKSl9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJSU0EtT0FFUCI6Y2FzZSJSU0EtT0FFUC0yNTYiOmNhc2UiUlNBLU9BRVAtMzg0IjpjYXNlIlJTQS1PQUVQLTUxMiI6dD17bmFtZToiUlNBLU9BRVAiLGhhc2g6IlNIQS0iLmNvbmNhdChwYXJzZUludChlLmFsZy5zbGljZSgtMyksMTApfHwxKX0sbj1lLmQ/WyJkZWNyeXB0IiwidW53cmFwS2V5Il06WyJlbmNyeXB0Iiwid3JhcEtleSJdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IGNyKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyAiYWxnIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKX1icmVhaztjYXNlIkVDIjpzd2l0Y2goZS5hbGcpe2Nhc2UiRVMyNTYiOnQ9e25hbWU6IkVDRFNBIixuYW1lZEN1cnZlOiJQLTI1NiJ9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJFUzM4NCI6dD17bmFtZToiRUNEU0EiLG5hbWVkQ3VydmU6IlAtMzg0In0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIkVTNTEyIjp0PXtuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZToiUC01MjEifSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiRUNESC1FUyI6Y2FzZSJFQ0RILUVTK0ExMjhLVyI6Y2FzZSJFQ0RILUVTK0ExOTJLVyI6Y2FzZSJFQ0RILUVTK0EyNTZLVyI6dD17bmFtZToiRUNESCIsbmFtZWRDdXJ2ZTplLmNydn0sbj1lLmQ/WyJkZXJpdmVCaXRzIl06W107YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgY3IoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLICJhbGciIChBbGdvcml0aG0pIFBhcmFtZXRlciB2YWx1ZScpfWJyZWFrO2Nhc2UgZ3IoKSYmIk9LUCI6aWYoIkVkRFNBIiE9PWUuYWxnKXRocm93IG5ldyBjcignSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyk7aWYoIkVkMjU1MTkiIT09ZS5jcnYpdGhyb3cgbmV3IGNyKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyAiY3J2IiAoU3VidHlwZSBvZiBLZXkgUGFpcikgUGFyYW1ldGVyIHZhbHVlJyk7dD17bmFtZToiTk9ERS1FRDI1NTE5IixuYW1lZEN1cnZlOiJOT0RFLUVEMjU1MTkifSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IGNyKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyAia3R5IiAoS2V5IFR5cGUpIFBhcmFtZXRlciB2YWx1ZScpfXJldHVybnthbGdvcml0aG06dCxrZXlVc2FnZXM6bn19KGUpLG89W3IsbnVsbCE9PSh0PWUuZXh0KSYmdm9pZCAwIT09dCYmdCxudWxsIT09KG49ZS5rZXlfb3BzKSYmdm9pZCAwIT09bj9uOmldO2lmKCJQQktERjIiPT09ci5uYW1lKXJldHVybiBRbi5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLHJyKGUuayksLi4ubyk7Y29uc3Qgcz17Li4uZX07cmV0dXJuIGRlbGV0ZSBzLmFsZyxRbi5zdWJ0bGUuaW1wb3J0S2V5KCJqd2siLHMsLi4ubyl9O2NvbnN0IFJyPShlLHQsbik9PntlLnN0YXJ0c1dpdGgoIkhTIil8fCJkaXIiPT09ZXx8ZS5zdGFydHNXaXRoKCJQQkVTMiIpfHwvXkFcZHszfSg/OkdDTSk/S1ckLy50ZXN0KGUpPyhlPT57aWYoIShlIGluc3RhbmNlb2YgVWludDhBcnJheSkpe2lmKCFicihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFNyKGUsLi4ua3IsIlVpbnQ4QXJyYXkiKSk7aWYoInNlY3JldCIhPT1lLnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoa3Iuam9pbigiIG9yICIpLCcgaW5zdGFuY2VzIGZvciBzeW1tZXRyaWMgYWxnb3JpdGhtcyBtdXN0IGJlIG9mIHR5cGUgInNlY3JldCInKSl9fSkodCk6KChlLHQpPT57aWYoIWJyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoU3IoZSwuLi5rcikpO2lmKCJzZWNyZXQiPT09ZS50eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KGtyLmpvaW4oIiBvciAiKSwnIGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG1zIG11c3Qgbm90IGJlIG9mIHR5cGUgInNlY3JldCInKSk7aWYoInNpZ24iPT09dCYmInB1YmxpYyI9PT1lLnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoa3Iuam9pbigiIG9yICIpLCcgaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobSBzaWduaW5nIG11c3QgYmUgb2YgdHlwZSAicHJpdmF0ZSInKSk7aWYoImRlY3J5cHQiPT09dCYmInB1YmxpYyI9PT1lLnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoa3Iuam9pbigiIG9yICIpLCcgaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobSBkZWNyeXB0aW9uIG11c3QgYmUgb2YgdHlwZSAicHJpdmF0ZSInKSk7aWYoZS5hbGdvcml0aG0mJiJ2ZXJpZnkiPT09dCYmInByaXZhdGUiPT09ZS50eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KGtyLmpvaW4oIiBvciAiKSwnIGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG0gdmVyaWZ5aW5nIG11c3QgYmUgb2YgdHlwZSAicHVibGljIicpKTtpZihlLmFsZ29yaXRobSYmImVuY3J5cHQiPT09dCYmInByaXZhdGUiPT09ZS50eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KGtyLmpvaW4oIiBvciAiKSwnIGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG0gZW5jcnlwdGlvbiBtdXN0IGJlIG9mIHR5cGUgInB1YmxpYyInKSl9KSh0LG4pfTtmdW5jdGlvbiBBcihlLHQsbil7aWYoZXIodCkpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7c3dpdGNoKHQpe2Nhc2UiSFMyNTYiOmNhc2UiSFMzODQiOmNhc2UiSFM1MTIiOntpZigheXIoZS5hbGdvcml0aG0sIkhNQUMiKSl0aHJvdyB2cigiSE1BQyIpO2NvbnN0IG49cGFyc2VJbnQodC5zbGljZSgyKSwxMCk7aWYobXIoZS5hbGdvcml0aG0uaGFzaCkhPT1uKXRocm93IHZyKCJTSEEtIi5jb25jYXQobiksImFsZ29yaXRobS5oYXNoIik7YnJlYWt9Y2FzZSJSUzI1NiI6Y2FzZSJSUzM4NCI6Y2FzZSJSUzUxMiI6e2lmKCF5cihlLmFsZ29yaXRobSwiUlNBU1NBLVBLQ1MxLXYxXzUiKSl0aHJvdyB2cigiUlNBU1NBLVBLQ1MxLXYxXzUiKTtjb25zdCBuPXBhcnNlSW50KHQuc2xpY2UoMiksMTApO2lmKG1yKGUuYWxnb3JpdGhtLmhhc2gpIT09bil0aHJvdyB2cigiU0hBLSIuY29uY2F0KG4pLCJhbGdvcml0aG0uaGFzaCIpO2JyZWFrfWNhc2UiUFMyNTYiOmNhc2UiUFMzODQiOmNhc2UiUFM1MTIiOntpZigheXIoZS5hbGdvcml0aG0sIlJTQS1QU1MiKSl0aHJvdyB2cigiUlNBLVBTUyIpO2NvbnN0IG49cGFyc2VJbnQodC5zbGljZSgyKSwxMCk7aWYobXIoZS5hbGdvcml0aG0uaGFzaCkhPT1uKXRocm93IHZyKCJTSEEtIi5jb25jYXQobiksImFsZ29yaXRobS5oYXNoIik7YnJlYWt9Y2FzZSBncigpJiYiRWREU0EiOmlmKCF5cihlLmFsZ29yaXRobSwiTk9ERS1FRDI1NTE5IikpdGhyb3cgdnIoIk5PREUtRUQyNTUxOSIpO2JyZWFrO2Nhc2UiRVMyNTYiOmNhc2UiRVMzODQiOmNhc2UiRVM1MTIiOntpZigheXIoZS5hbGdvcml0aG0sIkVDRFNBIikpdGhyb3cgdnIoIkVDRFNBIik7Y29uc3Qgbj13cih0KTtpZihlLmFsZ29yaXRobS5uYW1lZEN1cnZlIT09bil0aHJvdyB2cihuLCJhbGdvcml0aG0ubmFtZWRDdXJ2ZSIpO2JyZWFrfWRlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiQ3J5cHRvS2V5IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBvcGVyYXRpb24iKX1mb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheShuPjI/bi0yOjApLGk9MjtpPG47aSsrKXJbaS0yXT1hcmd1bWVudHNbaV07X3IoZSxyKX0odCxlLG4pLHQ7aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2lmKCFlLnN0YXJ0c1dpdGgoIkhTIikpdGhyb3cgbmV3IFR5cGVFcnJvcihTcih0LC4uLmtyKSk7cmV0dXJuIFFuLnN1YnRsZS5pbXBvcnRLZXkoInJhdyIsdCx7aGFzaDoiU0hBLSIuY29uY2F0KGUuc2xpY2UoLTMpKSxuYW1lOiJITUFDIn0sITEsW25dKX10aHJvdyBuZXcgVHlwZUVycm9yKFNyKHQsLi4ua3IsIlVpbnQ4QXJyYXkiKSl9Y29uc3QgQ3I9YXN5bmMoZSx0LG4scik9Pntjb25zdCBpPWF3YWl0IEFyKGUsdCwidmVyaWZ5Iik7KChlLHQpPT57aWYoZS5zdGFydHNXaXRoKCJSUyIpfHxlLnN0YXJ0c1dpdGgoIlBTIikpe2NvbnN0e21vZHVsdXNMZW5ndGg6bn09dC5hbGdvcml0aG07aWYoIm51bWJlciIhPXR5cGVvZiBufHxuPDIwNDgpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoZSwiIHJlcXVpcmVzIGtleSBtb2R1bHVzTGVuZ3RoIHRvIGJlIDIwNDggYml0cyBvciBsYXJnZXIiKSl9fSkoZSxpKTtjb25zdCBvPWZ1bmN0aW9uKGUsdCl7Y29uc3Qgbj0iU0hBLSIuY29uY2F0KGUuc2xpY2UoLTMpKTtzd2l0Y2goZSl7Y2FzZSJIUzI1NiI6Y2FzZSJIUzM4NCI6Y2FzZSJIUzUxMiI6cmV0dXJue2hhc2g6bixuYW1lOiJITUFDIn07Y2FzZSJQUzI1NiI6Y2FzZSJQUzM4NCI6Y2FzZSJQUzUxMiI6cmV0dXJue2hhc2g6bixuYW1lOiJSU0EtUFNTIixzYWx0TGVuZ3RoOmUuc2xpY2UoLTMpPj4zfTtjYXNlIlJTMjU2IjpjYXNlIlJTMzg0IjpjYXNlIlJTNTEyIjpyZXR1cm57aGFzaDpuLG5hbWU6IlJTQVNTQS1QS0NTMS12MV81In07Y2FzZSJFUzI1NiI6Y2FzZSJFUzM4NCI6Y2FzZSJFUzUxMiI6cmV0dXJue2hhc2g6bixuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZTp0Lm5hbWVkQ3VydmV9O2Nhc2UgZ3IoKSYmIkVkRFNBIjpjb25zdHtuYW1lZEN1cnZlOnJ9PXQ7cmV0dXJue25hbWU6cixuYW1lZEN1cnZlOnJ9O2RlZmF1bHQ6dGhyb3cgbmV3IGNyKCJhbGcgIi5jb25jYXQoZSwiIGlzIG5vdCBzdXBwb3J0ZWQgZWl0aGVyIGJ5IEpPU0Ugb3IgeW91ciBqYXZhc2NyaXB0IHJ1bnRpbWUiKSl9fShlLGkuYWxnb3JpdGhtKTt0cnl7cmV0dXJuIGF3YWl0IFFuLnN1YnRsZS52ZXJpZnkobyxpLG4scil9Y2F0Y2goZSl7cmV0dXJuITF9fTthc3luYyBmdW5jdGlvbiBEcihlLHQsbil7dmFyIHI7aWYoIUVyKGUpKXRocm93IG5ldyB1cigiRmxhdHRlbmVkIEpXUyBtdXN0IGJlIGFuIG9iamVjdCIpO2lmKHZvaWQgMD09PWUucHJvdGVjdGVkJiZ2b2lkIDA9PT1lLmhlYWRlcil0aHJvdyBuZXcgdXIoJ0ZsYXR0ZW5lZCBKV1MgbXVzdCBoYXZlIGVpdGhlciBvZiB0aGUgInByb3RlY3RlZCIgb3IgImhlYWRlciIgbWVtYmVycycpO2lmKHZvaWQgMCE9PWUucHJvdGVjdGVkJiYic3RyaW5nIiE9dHlwZW9mIGUucHJvdGVjdGVkKXRocm93IG5ldyB1cigiSldTIFByb3RlY3RlZCBIZWFkZXIgaW5jb3JyZWN0IHR5cGUiKTtpZih2b2lkIDA9PT1lLnBheWxvYWQpdGhyb3cgbmV3IHVyKCJKV1MgUGF5bG9hZCBtaXNzaW5nIik7aWYoInN0cmluZyIhPXR5cGVvZiBlLnNpZ25hdHVyZSl0aHJvdyBuZXcgdXIoIkpXUyBTaWduYXR1cmUgbWlzc2luZyBvciBpbmNvcnJlY3QgdHlwZSIpO2lmKHZvaWQgMCE9PWUuaGVhZGVyJiYhRXIoZS5oZWFkZXIpKXRocm93IG5ldyB1cigiSldTIFVucHJvdGVjdGVkIEhlYWRlciBpbmNvcnJlY3QgdHlwZSIpO2xldCBpPXt9O2lmKGUucHJvdGVjdGVkKXtjb25zdCB0PXJyKGUucHJvdGVjdGVkKTt0cnl7aT1KU09OLnBhcnNlKG5yLmRlY29kZSh0KSl9Y2F0Y2goZSl7dGhyb3cgbmV3IHVyKCJKV1MgUHJvdGVjdGVkIEhlYWRlciBpcyBpbnZhbGlkIil9fWlmKCFmdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLG49MDtuPGU7bisrKXRbbl09YXJndW1lbnRzW25dO2NvbnN0IHI9dC5maWx0ZXIoQm9vbGVhbik7aWYoMD09PXIubGVuZ3RofHwxPT09ci5sZW5ndGgpcmV0dXJuITA7bGV0IGk7Zm9yKGNvbnN0IGUgb2Ygcil7Y29uc3QgdD1PYmplY3Qua2V5cyhlKTtpZihpJiYwIT09aS5zaXplKWZvcihjb25zdCBlIG9mIHQpe2lmKGkuaGFzKGUpKXJldHVybiExO2kuYWRkKGUpfWVsc2UgaT1uZXcgU2V0KHQpfXJldHVybiEwfShpLGUuaGVhZGVyKSl0aHJvdyBuZXcgdXIoIkpXUyBQcm90ZWN0ZWQgYW5kIEpXUyBVbnByb3RlY3RlZCBIZWFkZXIgUGFyYW1ldGVyIG5hbWVzIG11c3QgYmUgZGlzam9pbnQiKTtjb25zdCBvPXsuLi5pLC4uLmUuaGVhZGVyfSxzPWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYodm9pZCAwIT09aS5jcml0JiZ2b2lkIDA9PT1yLmNyaXQpdGhyb3cgbmV3IGUoJyJjcml0IiAoQ3JpdGljYWwpIEhlYWRlciBQYXJhbWV0ZXIgTVVTVCBiZSBpbnRlZ3JpdHkgcHJvdGVjdGVkJyk7aWYoIXJ8fHZvaWQgMD09PXIuY3JpdClyZXR1cm4gbmV3IFNldDtpZighQXJyYXkuaXNBcnJheShyLmNyaXQpfHwwPT09ci5jcml0Lmxlbmd0aHx8ci5jcml0LnNvbWUoKGU9PiJzdHJpbmciIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoKSkpdGhyb3cgbmV3IGUoJyJjcml0IiAoQ3JpdGljYWwpIEhlYWRlciBQYXJhbWV0ZXIgTVVTVCBiZSBhbiBhcnJheSBvZiBub24tZW1wdHkgc3RyaW5ncyB3aGVuIHByZXNlbnQnKTtsZXQgbztvPXZvaWQgMCE9PW4/bmV3IE1hcChbLi4uT2JqZWN0LmVudHJpZXMobiksLi4udC5lbnRyaWVzKCldKTp0O2Zvcihjb25zdCB0IG9mIHIuY3JpdCl7aWYoIW8uaGFzKHQpKXRocm93IG5ldyBjcignRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIicuY29uY2F0KHQsJyIgaXMgbm90IHJlY29nbml6ZWQnKSk7aWYodm9pZCAwPT09aVt0XSl0aHJvdyBuZXcgZSgnRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIicuY29uY2F0KHQsJyIgaXMgbWlzc2luZycpKTtpZihvLmdldCh0KSYmdm9pZCAwPT09clt0XSl0aHJvdyBuZXcgZSgnRXh0ZW5zaW9uIEhlYWRlciBQYXJhbWV0ZXIgIicuY29uY2F0KHQsJyIgTVVTVCBiZSBpbnRlZ3JpdHkgcHJvdGVjdGVkJykpfXJldHVybiBuZXcgU2V0KHIuY3JpdCl9KHVyLG5ldyBNYXAoW1siYjY0IiwhMF1dKSxudWxsPT1uP3ZvaWQgMDpuLmNyaXQsaSxvKTtsZXQgYT0hMDtpZihzLmhhcygiYjY0IikmJihhPWkuYjY0LCJib29sZWFuIiE9dHlwZW9mIGEpKXRocm93IG5ldyB1cignVGhlICJiNjQiIChiYXNlNjR1cmwtZW5jb2RlIHBheWxvYWQpIEhlYWRlciBQYXJhbWV0ZXIgbXVzdCBiZSBhIGJvb2xlYW4nKTtjb25zdHthbGc6Y309bztpZigic3RyaW5nIiE9dHlwZW9mIGN8fCFjKXRocm93IG5ldyB1cignSldTICJhbGciIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbWlzc2luZyBvciBpbnZhbGlkJyk7Y29uc3QgdT1uJiYoKGUsdCk9PntpZih2b2lkIDAhPT10JiYoIUFycmF5LmlzQXJyYXkodCl8fHQuc29tZSgoZT0+InN0cmluZyIhPXR5cGVvZiBlKSkpKXRocm93IG5ldyBUeXBlRXJyb3IoJyInLmNvbmNhdChlLCciIG9wdGlvbiBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MnKSk7aWYodClyZXR1cm4gbmV3IFNldCh0KX0pKCJhbGdvcml0aG1zIixuLmFsZ29yaXRobXMpO2lmKHUmJiF1LmhhcyhjKSl0aHJvdyBuZXcgYXIoJyJhbGciIChBbGdvcml0aG0pIEhlYWRlciBQYXJhbWV0ZXIgbm90IGFsbG93ZWQnKTtpZihhKXtpZigic3RyaW5nIiE9dHlwZW9mIGUucGF5bG9hZCl0aHJvdyBuZXcgdXIoIkpXUyBQYXlsb2FkIG11c3QgYmUgYSBzdHJpbmciKX1lbHNlIGlmKCJzdHJpbmciIT10eXBlb2YgZS5wYXlsb2FkJiYhKGUucGF5bG9hZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXRocm93IG5ldyB1cigiSldTIFBheWxvYWQgbXVzdCBiZSBhIHN0cmluZyBvciBhbiBVaW50OEFycmF5IGluc3RhbmNlIik7bGV0IGw9ITE7ImZ1bmN0aW9uIj09dHlwZW9mIHQmJih0PWF3YWl0IHQoaSxlKSxsPSEwKSxScihjLHQsInZlcmlmeSIpO2NvbnN0IGQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxuPTA7bjxlO24rKyl0W25dPWFyZ3VtZW50c1tuXTtjb25zdCByPXQucmVkdWNlKCgoZSx0KT0+e2xldHtsZW5ndGg6bn09dDtyZXR1cm4gZStufSksMCksaT1uZXcgVWludDhBcnJheShyKTtsZXQgbz0wO3JldHVybiB0LmZvckVhY2goKGU9PntpLnNldChlLG8pLG8rPWUubGVuZ3RofSkpLGl9KHRyLmVuY29kZShudWxsIT09KHI9ZS5wcm90ZWN0ZWQpJiZ2b2lkIDAhPT1yP3I6IiIpLHRyLmVuY29kZSgiLiIpLCJzdHJpbmciPT10eXBlb2YgZS5wYXlsb2FkP3RyLmVuY29kZShlLnBheWxvYWQpOmUucGF5bG9hZCksaD1ycihlLnNpZ25hdHVyZSk7aWYoIWF3YWl0IENyKGMsdCxoLGQpKXRocm93IG5ldyBwcjtsZXQgZjtmPWE/cnIoZS5wYXlsb2FkKToic3RyaW5nIj09dHlwZW9mIGUucGF5bG9hZD90ci5lbmNvZGUoZS5wYXlsb2FkKTplLnBheWxvYWQ7Y29uc3QgcD17cGF5bG9hZDpmfTtyZXR1cm4gdm9pZCAwIT09ZS5wcm90ZWN0ZWQmJihwLnByb3RlY3RlZEhlYWRlcj1pKSx2b2lkIDAhPT1lLmhlYWRlciYmKHAudW5wcm90ZWN0ZWRIZWFkZXI9ZS5oZWFkZXIpLGw/ey4uLnAsa2V5OnR9OnB9dmFyIFByPWU9Pk1hdGguZmxvb3IoZS5nZXRUaW1lKCkvMWUzKTtjb25zdCBJcj04NjQwMCxPcj0vXihcZCt8XGQrXC5cZCspID8oc2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KSQvaTt2YXIgVXI9ZT0+e2NvbnN0IHQ9T3IuZXhlYyhlKTtpZighdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIHRpbWUgcGVyaW9kIGZvcm1hdCIpO2NvbnN0IG49cGFyc2VGbG9hdCh0WzFdKTtzd2l0Y2godFsyXS50b0xvd2VyQ2FzZSgpKXtjYXNlInNlYyI6Y2FzZSJzZWNzIjpjYXNlInNlY29uZCI6Y2FzZSJzZWNvbmRzIjpjYXNlInMiOnJldHVybiBNYXRoLnJvdW5kKG4pO2Nhc2UibWludXRlIjpjYXNlIm1pbnV0ZXMiOmNhc2UibWluIjpjYXNlIm1pbnMiOmNhc2UibSI6cmV0dXJuIE1hdGgucm91bmQoNjAqbik7Y2FzZSJob3VyIjpjYXNlImhvdXJzIjpjYXNlImhyIjpjYXNlImhycyI6Y2FzZSJoIjpyZXR1cm4gTWF0aC5yb3VuZCgzNjAwKm4pO2Nhc2UiZGF5IjpjYXNlImRheXMiOmNhc2UiZCI6cmV0dXJuIE1hdGgucm91bmQobipJcik7Y2FzZSJ3ZWVrIjpjYXNlIndlZWtzIjpjYXNlInciOnJldHVybiBNYXRoLnJvdW5kKDYwNDgwMCpuKTtkZWZhdWx0OnJldHVybiBNYXRoLnJvdW5kKDMxNTU3NjAwKm4pfX07Y29uc3QgTHI9ZT0+ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15hcHBsaWNhdGlvblwvLywiIiksSHI9KGUsdCk9PiJzdHJpbmciPT10eXBlb2YgZT90LmluY2x1ZGVzKGUpOiEhQXJyYXkuaXNBcnJheShlKSYmdC5zb21lKFNldC5wcm90b3R5cGUuaGFzLmJpbmQobmV3IFNldChlKSkpO2FzeW5jIGZ1bmN0aW9uIE1yKGUsdCxuKXt2YXIgcjtjb25zdCBpPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCxuKXtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheSYmKGU9bnIuZGVjb2RlKGUpKSwic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IHVyKCJDb21wYWN0IEpXUyBtdXN0IGJlIGEgc3RyaW5nIG9yIFVpbnQ4QXJyYXkiKTtjb25zdHswOnIsMTppLDI6byxsZW5ndGg6c309ZS5zcGxpdCgiLiIpO2lmKDMhPT1zKXRocm93IG5ldyB1cigiSW52YWxpZCBDb21wYWN0IEpXUyIpO2NvbnN0IGE9YXdhaXQgRHIoe3BheWxvYWQ6aSxwcm90ZWN0ZWQ6cixzaWduYXR1cmU6b30sdCxuKSxjPXtwYXlsb2FkOmEucGF5bG9hZCxwcm90ZWN0ZWRIZWFkZXI6YS5wcm90ZWN0ZWRIZWFkZXJ9O3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0P3suLi5jLGtleTphLmtleX06Y30oZSx0LG4pO2lmKChudWxsPT09KHI9aS5wcm90ZWN0ZWRIZWFkZXIuY3JpdCl8fHZvaWQgMD09PXI/dm9pZCAwOnIuaW5jbHVkZXMoImI2NCIpKSYmITE9PT1pLnByb3RlY3RlZEhlYWRlci5iNjQpdGhyb3cgbmV3IGxyKCJKV1RzIE1VU1QgTk9UIHVzZSB1bmVuY29kZWQgcGF5bG9hZCIpO2NvbnN0IG89ZnVuY3Rpb24oZSx0KXtsZXQgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307Y29uc3R7dHlwOnJ9PW47aWYociYmKCJzdHJpbmciIT10eXBlb2YgZS50eXB8fExyKGUudHlwKSE9PUxyKHIpKSl0aHJvdyBuZXcgb3IoJ3VuZXhwZWN0ZWQgInR5cCIgSldUIGhlYWRlciB2YWx1ZScsInR5cCIsImNoZWNrX2ZhaWxlZCIpO2xldCBpO3RyeXtpPUpTT04ucGFyc2UobnIuZGVjb2RlKHQpKX1jYXRjaChlKXt9aWYoIUVyKGkpKXRocm93IG5ldyBscigiSldUIENsYWltcyBTZXQgbXVzdCBiZSBhIHRvcC1sZXZlbCBKU09OIG9iamVjdCIpO2NvbnN0e2lzc3VlcjpvfT1uO2lmKG8mJiEoQXJyYXkuaXNBcnJheShvKT9vOltvXSkuaW5jbHVkZXMoaS5pc3MpKXRocm93IG5ldyBvcigndW5leHBlY3RlZCAiaXNzIiBjbGFpbSB2YWx1ZScsImlzcyIsImNoZWNrX2ZhaWxlZCIpO2NvbnN0e3N1YmplY3Q6c309bjtpZihzJiZpLnN1YiE9PXMpdGhyb3cgbmV3IG9yKCd1bmV4cGVjdGVkICJzdWIiIGNsYWltIHZhbHVlJywic3ViIiwiY2hlY2tfZmFpbGVkIik7Y29uc3R7YXVkaWVuY2U6YX09bjtpZihhJiYhSHIoaS5hdWQsInN0cmluZyI9PXR5cGVvZiBhP1thXTphKSl0aHJvdyBuZXcgb3IoJ3VuZXhwZWN0ZWQgImF1ZCIgY2xhaW0gdmFsdWUnLCJhdWQiLCJjaGVja19mYWlsZWQiKTtsZXQgYztzd2l0Y2godHlwZW9mIG4uY2xvY2tUb2xlcmFuY2Upe2Nhc2Uic3RyaW5nIjpjPVVyKG4uY2xvY2tUb2xlcmFuY2UpO2JyZWFrO2Nhc2UibnVtYmVyIjpjPW4uY2xvY2tUb2xlcmFuY2U7YnJlYWs7Y2FzZSJ1bmRlZmluZWQiOmM9MDticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgY2xvY2tUb2xlcmFuY2Ugb3B0aW9uIHR5cGUiKX1jb25zdHtjdXJyZW50RGF0ZTp1fT1uLGw9UHIodXx8bmV3IERhdGUpO2lmKCh2b2lkIDAhPT1pLmlhdHx8bi5tYXhUb2tlbkFnZSkmJiJudW1iZXIiIT10eXBlb2YgaS5pYXQpdGhyb3cgbmV3IG9yKCciaWF0IiBjbGFpbSBtdXN0IGJlIGEgbnVtYmVyJywiaWF0IiwiaW52YWxpZCIpO2lmKHZvaWQgMCE9PWkubmJmKXtpZigibnVtYmVyIiE9dHlwZW9mIGkubmJmKXRocm93IG5ldyBvcignIm5iZiIgY2xhaW0gbXVzdCBiZSBhIG51bWJlcicsIm5iZiIsImludmFsaWQiKTtpZihpLm5iZj5sK2MpdGhyb3cgbmV3IG9yKCcibmJmIiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkJywibmJmIiwiY2hlY2tfZmFpbGVkIil9aWYodm9pZCAwIT09aS5leHApe2lmKCJudW1iZXIiIT10eXBlb2YgaS5leHApdGhyb3cgbmV3IG9yKCciZXhwIiBjbGFpbSBtdXN0IGJlIGEgbnVtYmVyJywiZXhwIiwiaW52YWxpZCIpO2lmKGkuZXhwPD1sLWMpdGhyb3cgbmV3IHNyKCciZXhwIiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkJywiZXhwIiwiY2hlY2tfZmFpbGVkIil9aWYobi5tYXhUb2tlbkFnZSl7Y29uc3QgZT1sLWkuaWF0O2lmKGUtYz4oIm51bWJlciI9PXR5cGVvZiBuLm1heFRva2VuQWdlP24ubWF4VG9rZW5BZ2U6VXIobi5tYXhUb2tlbkFnZSkpKXRocm93IG5ldyBzcignImlhdCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCAodG9vIGZhciBpbiB0aGUgcGFzdCknLCJpYXQiLCJjaGVja19mYWlsZWQiKTtpZihlPDAtYyl0aHJvdyBuZXcgb3IoJyJpYXQiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQgKGl0IHNob3VsZCBiZSBpbiB0aGUgcGFzdCknLCJpYXQiLCJjaGVja19mYWlsZWQiKX1yZXR1cm4gaX0oaS5wcm90ZWN0ZWRIZWFkZXIsaS5wYXlsb2FkLG4pLHM9e3BheWxvYWQ6byxwcm90ZWN0ZWRIZWFkZXI6aS5wcm90ZWN0ZWRIZWFkZXJ9O3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0P3suLi5zLGtleTppLmtleX06c31mdW5jdGlvbiBqcihlKXtyZXR1cm4gRXIoZSl9Y2xhc3MgcXJ7Y29uc3RydWN0b3IoZSl7aWYodGhpcy5fY2FjaGVkPW5ldyBXZWFrTWFwLCFmdW5jdGlvbihlKXtyZXR1cm4gZSYmIm9iamVjdCI9PXR5cGVvZiBlJiZBcnJheS5pc0FycmF5KGUua2V5cykmJmUua2V5cy5ldmVyeShqcil9KGUpKXRocm93IG5ldyBkcigiSlNPTiBXZWIgS2V5IFNldCBtYWxmb3JtZWQiKTt2YXIgdDt0aGlzLl9qd2tzPSh0PWUsImZ1bmN0aW9uIj09dHlwZW9mIHN0cnVjdHVyZWRDbG9uZT9zdHJ1Y3R1cmVkQ2xvbmUodCk6SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSkpfWFzeW5jIGdldEtleShlLHQpe2NvbnN0e2FsZzpuLGtpZDpyfT17Li4uZSwuLi50LmhlYWRlcn0saT1mdW5jdGlvbihlKXtzd2l0Y2goInN0cmluZyI9PXR5cGVvZiBlJiZlLnNsaWNlKDAsMikpe2Nhc2UiUlMiOmNhc2UiUFMiOnJldHVybiJSU0EiO2Nhc2UiRVMiOnJldHVybiJFQyI7Y2FzZSJFZCI6cmV0dXJuIk9LUCI7ZGVmYXVsdDp0aHJvdyBuZXcgY3IoJ1Vuc3VwcG9ydGVkICJhbGciIHZhbHVlIGZvciBhIEpTT04gV2ViIEtleSBTZXQnKX19KG4pLG89dGhpcy5fandrcy5rZXlzLmZpbHRlcigoZT0+e2xldCB0PWk9PT1lLmt0eTtpZih0JiYic3RyaW5nIj09dHlwZW9mIHImJih0PXI9PT1lLmtpZCksdCYmInN0cmluZyI9PXR5cGVvZiBlLmFsZyYmKHQ9bj09PWUuYWxnKSx0JiYic3RyaW5nIj09dHlwZW9mIGUudXNlJiYodD0ic2lnIj09PWUudXNlKSx0JiZBcnJheS5pc0FycmF5KGUua2V5X29wcykmJih0PWUua2V5X29wcy5pbmNsdWRlcygidmVyaWZ5IikpLHQmJiJFZERTQSI9PT1uJiYodD0iRWQyNTUxOSI9PT1lLmNydnx8IkVkNDQ4Ij09PWUuY3J2KSx0KXN3aXRjaChuKXtjYXNlIkVTMjU2Ijp0PSJQLTI1NiI9PT1lLmNydjticmVhaztjYXNlIkVTMjU2SyI6dD0ic2VjcDI1NmsxIj09PWUuY3J2O2JyZWFrO2Nhc2UiRVMzODQiOnQ9IlAtMzg0Ij09PWUuY3J2O2JyZWFrO2Nhc2UiRVM1MTIiOnQ9IlAtNTIxIj09PWUuY3J2fXJldHVybiB0fSkpLHswOnMsbGVuZ3RoOmF9PW87aWYoMD09PWEpdGhyb3cgbmV3IGhyO2lmKDEhPT1hKXRocm93IG5ldyBmcjtjb25zdCBjPXRoaXMuX2NhY2hlZC5nZXQocyl8fHRoaXMuX2NhY2hlZC5zZXQocyx7fSkuZ2V0KHMpO2lmKHZvaWQgMD09PWNbbl0pe2NvbnN0IGU9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSx0LG4pe2lmKCFFcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJKV0sgbXVzdCBiZSBhbiBvYmplY3QiKTtpZih0fHwodD1lLmFsZyksInN0cmluZyIhPXR5cGVvZiB0fHwhdCl0aHJvdyBuZXcgVHlwZUVycm9yKCciYWxnIiBhcmd1bWVudCBpcyByZXF1aXJlZCB3aGVuICJqd2suYWxnIiBpcyBub3QgcHJlc2VudCcpO3N3aXRjaChlLmt0eSl7Y2FzZSJvY3QiOmlmKCJzdHJpbmciIT10eXBlb2YgZS5rfHwhZS5rKXRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3NpbmcgImsiIChLZXkgVmFsdWUpIFBhcmFtZXRlciB2YWx1ZScpO3JldHVybiBudWxsIT1ufHwobj0hMCE9PWUuZXh0KSxuP1RyKHsuLi5lLGFsZzp0LGV4dDohMX0pOnJyKGUuayk7Y2FzZSJSU0EiOmlmKHZvaWQgMCE9PWUub3RoKXRocm93IG5ldyBjcignUlNBIEpXSyAib3RoIiAoT3RoZXIgUHJpbWVzIEluZm8pIFBhcmFtZXRlciB2YWx1ZSBpcyBub3Qgc3VwcG9ydGVkJyk7Y2FzZSJFQyI6Y2FzZSJPS1AiOnJldHVybiBUcih7Li4uZSxhbGc6dH0pO2RlZmF1bHQ6dGhyb3cgbmV3IGNyKCdVbnN1cHBvcnRlZCAia3R5IiAoS2V5IFR5cGUpIFBhcmFtZXRlciB2YWx1ZScpfX0oey4uLnMsZXh0OiEwfSxuKTtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheXx8InB1YmxpYyIhPT1lLnR5cGUpdGhyb3cgbmV3IGRyKCJKU09OIFdlYiBLZXkgU2V0IG1lbWJlcnMgbXVzdCBiZSBwdWJsaWMga2V5cyIpO2Nbbl09ZX1yZXR1cm4gY1tuXX19dmFyIE5yPXtleHBvcnRzOnt9fSx4cj17ZXhwb3J0czp7fX0sS3I9UCh4bik7IWZ1bmN0aW9uKGUsdCl7dmFyIG49S3Iscj1uLkJ1ZmZlcjtmdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuIGluIGUpdFtuXT1lW25dfWZ1bmN0aW9uIG8oZSx0LG4pe3JldHVybiByKGUsdCxuKX1yLmZyb20mJnIuYWxsb2MmJnIuYWxsb2NVbnNhZmUmJnIuYWxsb2NVbnNhZmVTbG93P2UuZXhwb3J0cz1uOihpKG4sdCksdC5CdWZmZXI9byksby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksaShyLG8pLG8uZnJvbT1mdW5jdGlvbihlLHQsbil7aWYoIm51bWJlciI9PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyIik7cmV0dXJuIHIoZSx0LG4pfSxvLmFsbG9jPWZ1bmN0aW9uKGUsdCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpO3ZhciBpPXIoZSk7cmV0dXJuIHZvaWQgMCE9PXQ/InN0cmluZyI9PXR5cGVvZiBuP2kuZmlsbCh0LG4pOmkuZmlsbCh0KTppLmZpbGwoMCksaX0sby5hbGxvY1Vuc2FmZT1mdW5jdGlvbihlKXtpZigibnVtYmVyIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpO3JldHVybiByKGUpfSxvLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihlKXtpZigibnVtYmVyIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpO3JldHVybiBuLlNsb3dCdWZmZXIoZSl9fSh4cix4ci5leHBvcnRzKTt2YXIgQnI9NjU1MzYsSnI9NDI5NDk2NzI5NTt2YXIgRnI9eHIuZXhwb3J0cy5CdWZmZXIsV3I9Qy5jcnlwdG98fEMubXNDcnlwdG87V3ImJldyLmdldFJhbmRvbVZhbHVlcz9Oci5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoZT5Kcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigicmVxdWVzdGVkIHRvbyBtYW55IHJhbmRvbSBieXRlcyIpO3ZhciBuPUZyLmFsbG9jVW5zYWZlKGUpO2lmKGU+MClpZihlPkJyKWZvcih2YXIgcj0wO3I8ZTtyKz1CcilXci5nZXRSYW5kb21WYWx1ZXMobi5zbGljZShyLHIrQnIpKTtlbHNlIFdyLmdldFJhbmRvbVZhbHVlcyhuKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClyZXR1cm4gX2UubmV4dFRpY2soKGZ1bmN0aW9uKCl7dChudWxsLG4pfSkpO3JldHVybiBufTpOci5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJTZWN1cmUgcmFuZG9tIG51bWJlciBnZW5lcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLlxuVXNlIENocm9tZSwgRmlyZWZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMSIpfTt2YXIgenI9TnIuZXhwb3J0cztjbGFzcyBZcntiYXNlNjRVUkxFbmNvZGUoZSl7cmV0dXJuIFhuLmVuY29kZShlKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpLnJlcGxhY2UoLz0vZywiIil9YmFzZTY0VVJMRGVjb2RlKGUpe3JldHVybiBYbi5kZWNvZGUoZSkudG9TdHJpbmcoKX1oYXNoU2hhMjU2KGUpe3JldHVybiBlbi5mcm9tKFpuKChuZXcgVGV4dEVuY29kZXIpLmVuY29kZShlKSkpfWdlbmVyYXRlUmFuZG9tQnl0ZXMoZSl7cmV0dXJuIHpyKGUpfXZlcmlmeUp3dChlLHQsbixyLGksbyxzLGEpe2NvbnN0IHU9e2FsZ29yaXRobXM6bixhdWRpZW5jZTpyLGNsb2NrVG9sZXJhbmNlOnMsc3ViamVjdDpvfTtyZXR1cm4obnVsbD09YXx8YSkmJih1Lmlzc3Vlcj1pKSxNcihlLChsPXtrZXlzOlt0XX0scXIucHJvdG90eXBlLmdldEtleS5iaW5kKG5ldyBxcihsKSkpLHUpLnRoZW4oKCgpPT5Qcm9taXNlLnJlc29sdmUoITApKSkuY2F0Y2goKGU9Pnt2YXIgdDtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IGMoIlNQQS1DUllQVE8tVVRJTFMtVkotSVYwMSIsbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUucmVhc29uKSYmdm9pZCAwIT09dD90OkpTT04uc3RyaW5naWZ5KGUpLCIiLmNvbmNhdChudWxsPT1lP3ZvaWQgMDplLmNvZGUsIiAiKS5jb25jYXQobnVsbD09ZT92b2lkIDA6ZS5jbGFpbSkpKX0pKTt2YXIgbH19KHQ9Pntjb25zdCBuPXNlbGY7bGV0IHI7bi5vbm1lc3NhZ2U9bj0+e2xldHtkYXRhOmEscG9ydHM6dX09bjtyZXR1cm4gZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIG4sbCxkLGgsZixwO2NvbnN0IHk9dVswXTtpZihhLnR5cGU9PT12fHxyKXN3aXRjaChhLnR5cGUpe2Nhc2Ugdjp0cnl7Y29uc3Qgbj1PYmplY3QuYXNzaWduKHt9LGEuZGF0YSk7cj15aWVsZCgodCxuKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj1uZXcgTnQsaT1uZXcgWXIsbz1uZXcgZzt5aWVsZCBvLmluaXRpYWxpemUodCxyLGkpO2NvbnN0IHM9bmV3IEEobyksYT1uKG8scyksYz1vLmdldERhdGFMYXllcigpLHU9cXQuZ2V0SW5zdGFuY2UoKTtyZXR1cm4obnVsbD09dT92b2lkIDA6dS5pbml0KSYmKHlpZWxkIHUuaW5pdCghMCwodD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgYS5hdHRhY2hUb2tlblRvUmVxdWVzdENvbmZpZyh0KX0pKSkpKSx7ZGlzYWJsZUh0dHBIYW5kbGVyOigpPT57YS5kaXNhYmxlSHR0cEhhbmRsZXIodSl9LGVuYWJsZUh0dHBIYW5kbGVyOigpPT57YS5lbmFibGVIdHRwSGFuZGxlcih1KX0sZ2V0QWNjZXNzVG9rZW46KCk9PmEuZ2V0QWNjZXNzVG9rZW4oKSxnZXRBdXRob3JpemF0aW9uVVJMOnQ9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBvLmdldEF1dGhvcml6YXRpb25VUkwodCkudGhlbigodD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIGU7Y29uc3Qgbj1udWxsIT09KGU9bmV3IFVSTCh0KS5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpKSYmdm9pZCAwIT09ZT9lOiIiLHI9eWllbGQgby5nZXRQS0NFQ29kZShuKTtyZXR1cm57YXV0aG9yaXphdGlvblVSTDp0LHBrY2U6cn19KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKX0pKSxnZXRCYXNpY1VzZXJJbmZvOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gYS5nZXRCYXNpY1VzZXJJbmZvKCl9KSksZ2V0Q29uZmlnRGF0YTooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGMuZ2V0Q29uZmlnRGF0YSgpfSkpLGdldENyeXB0b0hlbHBlcjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuZ2V0Q3J5cHRvSGVscGVyKCl9KSksZ2V0RGVjb2RlZElEUElEVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLmdldERlY29kZWRJRFBJRFRva2VuKCl9KSksZ2V0RGVjb2RlZElEVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLmdldERlY29kZWRJRFRva2VuKCl9KSksZ2V0SURUb2tlbjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuZ2V0SURUb2tlbigpfSkpLGdldE9JRENTZXJ2aWNlRW5kcG9pbnRzOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gYS5nZXRPSURDU2VydmljZUVuZHBvaW50cygpfSkpLGdldFNpZ25PdXRVUkw6KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBvLmdldFNpZ25PdXRVUkwoKX0pKSxodHRwUmVxdWVzdDp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgYS5odHRwUmVxdWVzdCh1LHQpfSkpLGh0dHBSZXF1ZXN0QWxsOnQ9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBhLmh0dHBSZXF1ZXN0QWxsKHQsdSl9KSksaXNBdXRoZW50aWNhdGVkOigpPT5hLmlzQXV0aGVudGljYXRlZCgpLHJlZnJlc2hBY2Nlc3NUb2tlbjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dHJ5e3JldHVybiB5aWVsZCBhLnJlZnJlc2hBY2Nlc3NUb2tlbigpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX19KSkscmVxdWVzdEFjY2Vzc1Rva2VuOih0LG4scixpKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGEucmVxdWVzdEFjY2Vzc1Rva2VuKHQsbix2b2lkIDAscixpKX0pKSxyZXF1ZXN0Q3VzdG9tR3JhbnQ6dD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGEucmVxdWVzdEN1c3RvbUdyYW50KHQpfSkpLHJldm9rZUFjY2Vzc1Rva2VuOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHMuZ2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpO3JldHVybiBvLnJldm9rZUFjY2Vzc1Rva2VuKCkudGhlbigoKCk9PihzLmNsZWFyUmVmcmVzaFRva2VuVGltZW91dChlKSxQcm9taXNlLnJlc29sdmUoITApKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfSkpLHNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2s6ZT0+eyhudWxsPT11P3ZvaWQgMDp1LnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2spJiZ1LnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2soZSl9LHNldEh0dHBSZXF1ZXN0U3RhcnRDYWxsYmFjazplPT57KG51bGw9PXU/dm9pZCAwOnUuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKSYmdS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2soZSl9LHNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrOmU9PnsobnVsbD09dT92b2lkIDA6dS5zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaykmJnUuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2soZSl9LHNldFNlc3Npb25TdGF0ZTp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCBjLnNldFNlc3Npb25EYXRhUGFyYW1ldGVyKCJzZXNzaW9uX3N0YXRlIix0KX0pKSxzaWduT3V0OigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gcy5jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQoKSx5aWVsZCBvLmdldFNpZ25PdXRVUkwoKX0pKSxzdGFydEF1dG9SZWZyZXNoVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3MuY2xlYXJSZWZyZXNoVG9rZW5UaW1lb3V0KCkscy5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KGEpfSkpLHVwZGF0ZUNvbmZpZzp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCBvLnVwZGF0ZUNvbmZpZyh0KX0pKX19KSkpKG4sdCksci5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrKHMpLHIuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKGkpLHIuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2sobykseS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0X2F1dGhfdXJsIjpyLmdldEF1dGhvcml6YXRpb25VUkwobnVsbD09YT92b2lkIDA6YS5kYXRhKS50aGVuKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoZSkpfSkpLmNhdGNoKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfSkpO2JyZWFrO2Nhc2UicmVxdWVzdF9nZXRfdG9rZW4iOnIucmVxdWVzdEFjY2Vzc1Rva2VuKG51bGw9PT0obj1udWxsPT1hP3ZvaWQgMDphLmRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGUsbnVsbD09PShsPW51bGw9PWE/dm9pZCAwOmEuZGF0YSl8fHZvaWQgMD09PWw/dm9pZCAwOmwuc2Vzc2lvblN0YXRlLG51bGw9PT0oZD1udWxsPT1hP3ZvaWQgMDphLmRhdGEpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLnBrY2UsbnVsbD09PShoPW51bGw9PWE/dm9pZCAwOmEuZGF0YSl8fHZvaWQgMD09PWg/dm9pZCAwOmguc3RhdGUpLnRoZW4oKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKSl9KSkuY2F0Y2goKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9KSk7YnJlYWs7Y2FzZSJodHRwLXJlcXVlc3QiOntjb25zdCBlPWEuZGF0YSx0PW51bGw9PWU/dm9pZCAwOmUuZGF0YTtpZighMD09PShudWxsPT09KHA9bnVsbD09PShmPWEuZGF0YSl8fHZvaWQgMD09PWY/dm9pZCAwOmYuZGF0YSl8fHZvaWQgMD09PXA/dm9pZCAwOnAuZm9ybURhdGEpKXtjb25zdCBuPW5ldyBGb3JtRGF0YTtmb3IoY29uc3QgZSBpbiB0KSJmb3JtRGF0YSIhPT1lJiZuLmFwcGVuZChlLHRbZV0pO2UuZGF0YT1ufXIuaHR0cFJlcXVlc3QoZSkudGhlbigoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpKX0pKS5jYXRjaCgoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX0pKTticmVha31jYXNlImh0dHAtcmVxdWVzdC1hbGwiOnIuaHR0cFJlcXVlc3RBbGwoYS5kYXRhKS50aGVuKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoZSkpfSkpLmNhdGNoKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfSkpO2JyZWFrO2Nhc2Uic2lnbi1vdXQiOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLnNpZ25PdXQoKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztjYXNlInJlcXVlc3QtY3VzdG9tLWdyYW50IjpyLnJlcXVlc3RDdXN0b21HcmFudChhLmRhdGEpLnRoZW4oKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKSl9KSkuY2F0Y2goKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9KSk7YnJlYWs7Y2FzZSJyZXZva2UtYWNjZXNzLXRva2VuIjpyLnJldm9rZUFjY2Vzc1Rva2VuKCkudGhlbigoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpKX0pKS5jYXRjaCgoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX0pKTticmVhaztjYXNlImdldC1vaWRjLXNlcnZpY2UtZW5kcG9pbnRzIjp0cnl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoeWllbGQgci5nZXRPSURDU2VydmljZUVuZHBvaW50cygpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0LWJhc2ljLXVzZXItaW5mbyI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuZ2V0QmFzaWNVc2VySW5mbygpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0LWRlY29kZWQtaWQtdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldERlY29kZWRJRFRva2VuKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXQtY3J5cHRvLWhlbHBlciI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuZ2V0Q3J5cHRvSGVscGVyKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfaWRfdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldElEVG9rZW4oKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztjYXNlImVuYWJsZV9odHRwX2hhbmRsZXIiOnIuZW5hYmxlSHR0cEhhbmRsZXIoKSx5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSgpKTticmVhaztjYXNlImRpc2FibGVfaHR0cF9oYW5kbGVyIjpyLmRpc2FibGVIdHRwSGFuZGxlcigpLHkucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKCkpO2JyZWFrO2Nhc2UiaXNfYXV0aGVudGljYXRlZCI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuaXNBdXRoZW50aWNhdGVkKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfc2lnbl9vdXRfdXJsIjp0cnl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoeWllbGQgci5nZXRTaWduT3V0VVJMKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJyZWZyZXNoX2FjY2Vzcy10b2tlbiI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIucmVmcmVzaEFjY2Vzc1Rva2VuKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJzdGFydF9hdXRvX3JlZnJlc2hfdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShyLnN0YXJ0QXV0b1JlZnJlc2hUb2tlbigpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2Uic2V0X3Nlc3Npb25fc3RhdGUiOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLnNldFNlc3Npb25TdGF0ZShudWxsPT1hP3ZvaWQgMDphLmRhdGEpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UidXBkYXRlX2NvbmZpZyI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIudXBkYXRlQ29uZmlnKG51bGw9PWE/dm9pZCAwOmEuZGF0YSkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfY29uZmlnX2RhdGEiOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldENvbmZpZ0RhdGEoKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztkZWZhdWx0Om51bGw9PXl8fHkucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKG5ldyBjKCJTUEEtQ0xJRU5UX1dPUktFUi1PTk1TRy1JVjAyIiwiVGhlIG1lc3NhZ2UgdHlwZSBpcyBpbnZhbGlkLiIsIlRoZSBtZXNzYWdlIHR5cGUgcHJvdmlkZWQsICIuY29uY2F0KGEudHlwZSwiLCBpcyBpbnZhbGlkLiIpKSkpfWVsc2UgeS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UobmV3IGMoIlNQQS1DTElFTlRfV09SS0VSLU9OTVNHLU5GMDEiLCJUaGUgd2ViIHdvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0LiIsIlRoZSBpbml0aWFsaXplIG1ldGhvZCBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uIGNhbiBiZSBjYXJyaWVkIG91dC4iKSkpfSkpfTtjb25zdCBpPSgpPT57bi5wb3N0TWVzc2FnZSh7dHlwZToicmVxdWVzdC1zdGFydCJ9KX0sbz1lPT57bi5wb3N0TWVzc2FnZSh7ZGF0YTpKU09OLnN0cmluZ2lmeShudWxsIT1lP2U6IiIpLHR5cGU6InJlcXVlc3Qtc3VjY2VzcyJ9KX0scz0oKT0+e24ucG9zdE1lc3NhZ2Uoe3R5cGU6InJlcXVlc3QtZmluaXNoIn0pfX0pKCgoZSx0KT0+bmV3IFIoZSx0KSkpO3JldHVybnt9fSgpOwoK",$W=null,eV=!1,function(e){return tV=tV||_W(qW,$W,eV),new Worker(tV,e)});const nV="init",lV="sign-out",oV="http-request",cV="http-request-all",aV="request-custom-grant",rV="revoke-access-token",sV="request-start",dV="request-success",uV="request-finish",hV="get-oidc-service-endpoints",bV="get-basic-user-info",ZV="get-decoded-id-token",mV="get-crypto-helper",pV="enable_http_handler",yV="disable_http_handler",GV="get_auth_url",XV="request_get_token",WV="is_authenticated",VV="get_sign_out_url",IV="refresh_access-token",RV="refresh-access-token-error",gV="set_session_state",fV="start_auto_refresh_token",vV="update_config",SV="get_id_token",YV="check_session_signed_in",KV="check_session_signed_out",NV="get_config_data",JV="set_session_state_from_iframe";var kV;e.Storage=void 0,(kV=e.Storage||(e.Storage={})).LocalStorage="localStorage",kV.SessionStorage="sessionStorage",kV.WebWorker="webWorker",kV.BrowserMemory="browserMemory";const CV="token_request_config";var UV;e.Hooks=void 0,(UV=e.Hooks||(e.Hooks={})).SignIn="sign-in",UV.SignOut="sign-out",UV.Initialize="initialize",UV.HttpRequestStart="http-request-start",UV.HttpRequestFinish="http-request-finish",UV.HttpRequestError="http-request-error",UV.HttpRequestSuccess="http-request-success",UV.RevokeAccessToken="revoke-access-token",UV.CustomGrant="custom-grant",UV.SignOutFailed="sign-out-failed";const LV="rpIFrame",HV="promptNoneIFrame",TV="Y2hlY2tTZXNzaW9u",wV="sign-in-silently",FV="initialized-silent-sign-in",xV="promptNoneRequestSent",PV="error",zV="error_description",BV="custom_grant_config",jV="state",MV="Access token is invalid";class QV{constructor(){}static generateSuccessMessage(e){return{blob:(null==e?void 0:e.data)instanceof Blob?null==e?void 0:e.data:null,data:JSON.stringify(null!=e?e:""),success:!0}}static generateFailureMessage(e){return(null==e?void 0:e.toJSON)&&delete e.toJSON,{error:JSON.stringify(null!=e?e:""),success:!1}}}class EV{constructor(){}static removeAuthorizationCode(){const e=location.href;history.pushState({},document.title,e.replace(/\?code=.*$/,""))}static getPKCE(e){var t;return null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:""}static setPKCE(e,t){sessionStorage.setItem(e,t)}static setSignOutURL(e,t,i){sessionStorage.setItem("".concat(FW,"-instance_").concat(i,"-").concat(t),e)}static getSignOutURL(e,t){var i;return null!==(i=sessionStorage.getItem("".concat(FW,"-instance_").concat(t,"-").concat(e)))&&void 0!==i?i:""}static removePKCE(e){sessionStorage.removeItem(e)}static canContinueSignIn(e,t){return!(e&&!EV.hasErrorInURL()&&!EV.hasAuthSearchParamsInURL()&&!t)}static isInitializedSilentSignIn(){return EV.isSilentStatePresentInURL()}static wasSignInCalled(){return!(!EV.hasErrorInURL()&&!EV.hasAuthSearchParamsInURL()||this.isSilentStatePresentInURL())}static wasSilentSignInCalled(){const e=sessionStorage.getItem(FV),t=e?JSON.parse(e):null;return Boolean(t)}static isSignOutSuccessful(){return CW(this,void 0,void 0,(function*(){if(AW.isSignOutSuccessful(window.location.href)){const e=window.location.href.split("?")[0];return history.pushState({},document.title,e),yield AW.clearUserSessionData(),!0}return!1}))}static didSignOutFail(){if(AW.didSignOutFail(window.location.href)){const e=new URL(window.location.href),t=e.searchParams.get(PV),i=e.searchParams.get(zV),n=window.location.href.split("?")[0];return history.pushState({},document.title,n),{description:null!=i?i:"",error:null!=t?t:""}}return!1}static isSilentStatePresentInURL(){var e;const t=new URL(window.location.href).searchParams.get("state");return null!==(e=null==t?void 0:t.includes(wV))&&void 0!==e&&e}static hasAuthSearchParamsInURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;return/[?&]code=[^&]+/.test(e)}static hasErrorInURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=new URL(e);return!!t.searchParams.get(PV)&&t.searchParams.get(jV)!==xW}static canSendPromptNoneRequest(){const e=sessionStorage.getItem(xV);return!(e?JSON.parse(e):null)}static setPromptNoneRequestSent(e){sessionStorage.setItem(xV,JSON.stringify(e))}static waitTillPageRedirect(e){return CW(this,void 0,void 0,(function*(){const t=null!=e?e:3e3;yield new Promise((e=>setTimeout(e,1e3*t)))}))}}EV.until=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const i=n=>e()?n():setTimeout((()=>i(n)),t);return new Promise(i)};class DV{constructor(e,t){this._authenticationClient=e,this._dataLayer=this._authenticationClient.getDataLayer(),this._spaHelper=t,this._instanceID=this._authenticationClient.getInstanceID(),this._isTokenRefreshing=!1}enableHttpHandler(e){(null==e?void 0:e.enableHandler)&&e.enableHandler()}disableHttpHandler(e){(null==e?void 0:e.disableHandler)&&e.disableHandler()}initializeSessionManger(e,t,i,n,l){var o,c,a;l.initialize(e.clientID,null!==(o=t.checkSessionIframe)&&void 0!==o?o:"",i,null!==(c=e.checkSessionInterval)&&void 0!==c?c:3,null!==(a=e.sessionRefreshInterval)&&void 0!==a?a:300,e.signInRedirectURL,n)}requestCustomGrant(e,t){var i,n,l;return CW(this,void 0,void 0,(function*(){let o=!0,c=!1;if(null==e?void 0:e.tokenEndpoint){o=!1;for(const t of[...null!==(n=null===(i=yield this._dataLayer.getConfigData())||void 0===i?void 0:i.resourceServerURLs)&&void 0!==n?n:[],e.baseUrl])if(t&&(null===(l=e.tokenEndpoint)||void 0===l?void 0:l.startsWith(t))){c=!0;break}}return e.shouldReplayAfterRefresh&&this._dataLayer.setTemporaryDataParameter(BV,JSON.stringify(e)),o||c?this._authenticationClient.requestCustomGrant(e).then((i=>CW(this,void 0,void 0,(function*(){return t&&"function"==typeof t&&t(e),e.returnsSession?(this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()):i})))).catch((e=>Promise.reject(e))):Promise.reject(new BW("SPA-MAIN_THREAD_CLIENT-RCG-IV01","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified token endpoint in this request cannot be found among the `resourceServerURLs`"))}))}getCustomGrantConfigData(){return CW(this,void 0,void 0,(function*(){const e=yield this._dataLayer.getTemporaryDataParameter(BV);return e?JSON.parse(e):null}))}refreshAccessToken(e){return CW(this,void 0,void 0,(function*(){try{yield this._authenticationClient.refreshAccessToken();const t=yield this.getCustomGrantConfigData();return t&&(yield this.requestCustomGrant(t,e)),this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()}catch(e){const t={type:RV};return window.postMessage(t),Promise.reject(e)}}))}retryFailedRequests(e){return CW(this,void 0,void 0,(function*(){const t=e.httpClient,i=e.requestConfig,n=e.isHttpHandlerEnabled,l=e.httpErrorCallback,o=e.httpFinishCallback;yield EV.until((()=>!this._isTokenRefreshing));try{const e=yield t.request(i);return Promise.resolve(e)}catch(e){return n&&("function"==typeof l&&(yield l(e)),"function"==typeof o&&o()),Promise.reject(e)}}))}httpRequest(e,t,i,n,l,o){var c,a;return CW(this,void 0,void 0,(function*(){let r=!1;const s=yield this._dataLayer.getConfigData();for(const e of[...null!==(c=yield null==s?void 0:s.resourceServerURLs)&&void 0!==c?c:[],s.baseUrl])if(e&&(null===(a=null==t?void 0:t.url)||void 0===a?void 0:a.startsWith(e))){r=!0;break}return r?e.request(t).then((e=>Promise.resolve(e))).catch((c=>CW(this,void 0,void 0,(function*(){var a,r,s;if(401===(null===(a=null==c?void 0:c.response)||void 0===a?void 0:a.status)||!(null==c?void 0:c.response)){if(this._isTokenRefreshing)return this.retryFailedRequests({enableRetrievingSignOutURLFromSession:o,httpClient:e,httpErrorCallback:n,httpFinishCallback:l,isHttpHandlerEnabled:i,requestConfig:t});let a;this._isTokenRefreshing=!0;try{a=yield this.refreshAccessToken(o),this._isTokenRefreshing=!1}catch(e){throw this._isTokenRefreshing=!1,i&&("function"==typeof n&&(yield n(Object.assign(Object.assign({},c),{code:MV}))),"function"==typeof l&&l()),new BW("SPA-AUTH_HELPER-HR-SE01",null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"Refresh token request failed.",null!==(s=null==e?void 0:e.message)&&void 0!==s?s:"An error occurred while trying to refresh the access token following a 401 response from the server.")}if(a)try{const i=yield e.request(t);return Promise.resolve(i)}catch(e){return i&&("function"==typeof n&&(yield n(e)),"function"==typeof l&&l()),Promise.reject(e)}}return i&&("function"==typeof n&&(yield n(c)),"function"==typeof l&&l()),Promise.reject(c)})))):Promise.reject(new BW("SPA-AUTH_HELPER-HR-IV02","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified endpoint in this request cannot be found among the `resourceServerURLs`"))}))}httpRequestAll(e,t,i,n,l){var o,c,a;return CW(this,void 0,void 0,(function*(){let r=!0;const s=yield this._dataLayer.getConfigData();for(const t of e){let e=!1;for(const i of[...null!==(c=null===(o=yield s)||void 0===o?void 0:o.resourceServerURLs)&&void 0!==c?c:[],s.baseUrl])if(i&&(null===(a=t.url)||void 0===a?void 0:a.startsWith(i))){e=!0;break}if(!e){r=!1;break}}const d=[];if(r)return e.forEach((e=>{d.push(t.request(e))})),(null==t?void 0:t.all)&&t.all(d).then((e=>Promise.resolve(e))).catch((e=>CW(this,void 0,void 0,(function*(){var o,c,a;if(401===(null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.status)||!(null==e?void 0:e.response)){let o;try{o=yield this._authenticationClient.refreshAccessToken()}catch(t){throw i&&("function"==typeof n&&(yield n(Object.assign(Object.assign({},e),{code:MV}))),"function"==typeof l&&l()),new BW("SPA-AUTH_HELPER-HRA-SE01",null!==(c=null==t?void 0:t.name)&&void 0!==c?c:"Refresh token request failed.",null!==(a=null==t?void 0:t.message)&&void 0!==a?a:"An error occurred while trying to refresh the access token following a 401 response from the server.")}if(o)return t.all&&t.all(d).then((e=>Promise.resolve(e))).catch((e=>CW(this,void 0,void 0,(function*(){return i&&("function"==typeof n&&(yield n(e)),"function"==typeof l&&l()),Promise.reject(e)}))))}return i&&("function"==typeof n&&(yield n(e)),"function"==typeof l&&l()),Promise.reject(e)}))));throw new BW("SPA-AUTH_HELPER-HRA-IV02","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified endpoint in this request cannot be found among the `resourceServerURLs`")}))}requestAccessToken(t,i,n,l,o,c){return CW(this,void 0,void 0,(function*(){const a=yield this._dataLayer.getConfigData();if(a.storage===e.Storage.BrowserMemory&&a.enablePKCE&&i){const e=EV.getPKCE(jW.extractPKCEKeyFromStateParam(i));yield this._authenticationClient.setPKCECode(jW.extractPKCEKeyFromStateParam(i),e)}else a.storage===e.Storage.WebWorker&&l&&(yield this._authenticationClient.setPKCECode(l,null!=o?o:""));return t?this._authenticationClient.requestAccessToken(t,null!=i?i:"",null!=o?o:"",void 0,c).then((()=>CW(this,void 0,void 0,(function*(){return a.storage!==e.Storage.WebWorker?(EV.setSignOutURL(yield this._authenticationClient.getSignOutURL(),a.clientID,this._instanceID),this._spaHelper&&(this._spaHelper.clearRefreshTokenTimeout(),this._spaHelper.refreshAccessTokenAutomatically(this)),n&&"function"==typeof n&&a.enableOIDCSessionManagement&&n()):this._spaHelper&&this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()})))).catch((e=>Promise.reject(e))):Promise.reject(new BW("SPA-AUTH_HELPER-RAT1-NF01","No authorization code.","No authorization code was found."))}))}trySignInSilently(e,t,i,n){var l;return CW(this,void 0,void 0,(function*(){if(EV.isInitializedSilentSignIn())return yield i.receivePromptNoneResponse(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""});const o=document.getElementById(LV),c=null===(l=null==o?void 0:o.contentDocument)||void 0===l?void 0:l.getElementById(HV);try{const t=yield e(n);c.src=t}catch(e){return Promise.reject(e)}return new Promise(((e,i)=>{const n=setTimeout((()=>{e(!1)}),1e4),l=o=>CW(this,void 0,void 0,(function*(){var c,a,r,s;const d=o.data;(null==d?void 0:d.type)==KV&&(window.removeEventListener("message",l),clearTimeout(n),e(!1)),(null==d?void 0:d.type)==YV&&(null===(c=null==d?void 0:d.data)||void 0===c?void 0:c.code)&&t(null===(a=null==d?void 0:d.data)||void 0===a?void 0:a.code,null===(r=null==d?void 0:d.data)||void 0===r?void 0:r.sessionState,null===(s=null==d?void 0:d.data)||void 0===s?void 0:s.state).then((t=>{window.removeEventListener("message",l),e(t)})).catch((e=>{window.removeEventListener("message",l),i(e)})).finally((()=>{clearTimeout(n)}))}));window.addEventListener("message",l)}))}))}handleSignIn(t,i,n){return CW(this,void 0,void 0,(function*(){const l=yield this._dataLayer.getConfigData();if(yield t())return Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""});if(l.storage!==e.Storage.WebWorker&&(yield this._authenticationClient.isAuthenticated()))return this._spaHelper.clearRefreshTokenTimeout(),this._spaHelper.refreshAccessTokenAutomatically(this),l.enableOIDCSessionManagement&&i(),Promise.resolve(yield this._authenticationClient.getBasicUserInfo());const o=new URL(window.location.href).searchParams.get(PV),c=new URL(window.location.href).searchParams.get(zV);if(o){const e=new URL(window.location.href);throw e.searchParams.delete(PV),e.searchParams.delete(zV),history.pushState(null,document.title,e.toString()),new BW("SPA-AUTH_HELPER-SI-SE01",o,null!=c?c:"")}if(l.storage===e.Storage.WebWorker&&n){const e=yield n();if(e)return e}}))}attachTokenToRequestConfig(e){return CW(this,void 0,void 0,(function*(){const t=Object.assign({attachToken:!0},e);t.attachToken&&(t.shouldAttachIDPAccessToken?e.headers=Object.assign(Object.assign({},e.headers),{Authorization:"Bearer ".concat(yield this.getIDPAccessToken())}):e.headers=Object.assign(Object.assign({},e.headers),{Authorization:"Bearer ".concat(yield this.getAccessToken())}))}))}getBasicUserInfo(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getBasicUserInfo()}))}getDecodedIDToken(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getDecodedIDToken()}))}getDecodedIDPIDToken(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getDecodedIDToken()}))}getCryptoHelper(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getCryptoHelper()}))}getIDToken(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getIDToken()}))}getOIDCServiceEndpoints(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getOIDCServiceEndpoints()}))}getAccessToken(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.getAccessToken()}))}getIDPAccessToken(){var e;return CW(this,void 0,void 0,(function*(){return null===(e=yield this._dataLayer.getSessionData())||void 0===e?void 0:e.access_token}))}getDataLayer(){return this._dataLayer}isAuthenticated(){return CW(this,void 0,void 0,(function*(){return this._authenticationClient.isAuthenticated()}))}}class OV{constructor(e){this._authenticationClient=e,this._dataLayer=this._authenticationClient.getDataLayer()}refreshAccessTokenAutomatically(e){var t,i;return CW(this,void 0,void 0,(function*(){if(!(null!==(i=null===(t=yield this._dataLayer.getConfigData())||void 0===t?void 0:t.periodicTokenRefresh)&&void 0!==i&&i))return;const n=yield this._dataLayer.getSessionData();if(n.refresh_token){const t=parseInt(n.expires_in),i=setTimeout((()=>CW(this,void 0,void 0,(function*(){yield e.refreshAccessToken()}))),1e3*(t<=10?t:t-10));yield this._dataLayer.setTemporaryDataParameter(LW,JSON.stringify(i))}}))}getRefreshTimeoutTimer(){return CW(this,void 0,void 0,(function*(){return(yield this._dataLayer.getTemporaryDataParameter(LW))?JSON.parse(yield this._dataLayer.getTemporaryDataParameter(LW)):-1}))}clearRefreshTokenTimeout(e){return CW(this,void 0,void 0,(function*(){if(e)return void clearTimeout(e);const t=yield this.getRefreshTimeoutTimer();-1!==t&&clearTimeout(t)}))}}const AV=(()=>{let t,i,n,l,o,c,a,r,s,d,u;const h=(e,a,r,s,d,h,Z)=>{t=e,i=a,n=r,l=s,o=h,c=d,u=Z,l>-1&&b(),c>-1&&(d=setInterval((()=>{p()}),1e3*c))},b=()=>CW(void 0,void 0,void 0,(function*(){var e;if(!i||!t||!o)return;const c="opIFrame";const a=document.getElementById(LV);(null===(e=null==a?void 0:a.contentDocument)||void 0===e?void 0:e.getElementById(c)).src=i+"?client_id="+t+"&redirect_uri="+o,r=setInterval((function(){var e;return CW(this,void 0,void 0,(function*(){const l=yield n();if(Boolean(t)&&Boolean(l)){const n="".concat(t," ").concat(l),o=document.getElementById(LV),a=(null===(e=null==o?void 0:o.contentDocument)||void 0===e?void 0:e.getElementById(c)).contentWindow;null==a||a.postMessage(n,i)}}))}),1e3*l),m()})),Z=()=>{clearInterval(r),clearInterval(undefined)},m=()=>{null===window||void 0===window||window.addEventListener("message",(function(e){var t;return CW(this,void 0,void 0,(function*(){const n=i;!n||(null==n?void 0:n.indexOf(e.origin))<0||(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===JV||"unchanged"===e.data||("error"===e.data?window.location.href=yield a():"changed"===e.data&&p())}))}),!1)},p=()=>CW(void 0,void 0,void 0,(function*(){var t;const i=document.getElementById(LV),n=null===(t=null==i?void 0:i.contentDocument)||void 0===t?void 0:t.getElementById(HV);if(EV.canSendPromptNoneRequest()){EV.setPromptNoneRequestSent(!0);const t=e=>{var i,n,l;(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.type)===JV&&(d(null!==(l=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.data)&&void 0!==l?l:""),null===window||void 0===window||window.removeEventListener("message",t))};s!==e.Storage.BrowserMemory&&s!==e.Storage.WebWorker||null===window||void 0===window||window.addEventListener("message",t);const i=yield u({prompt:"none",response_mode:"query",state:TV});n.src=i}})),y=t=>CW(void 0,void 0,void 0,(function*(){var i,n;const l=new URL(window.location.href).searchParams.get(jV),o=new URL(window.location.href).searchParams.get(wW),c=window.parent.parent;if(null!==l&&(l.includes(TV)||l.includes(wV))){const r=new URL(window.location.href).searchParams.get("code");if(null!==r&&0!==r.length){if(l.includes(wV)){const e={data:{code:r,sessionState:null!=o?o:"",state:l},type:YV};return sessionStorage.setItem(FV,"false"),c.postMessage(e,c.origin),EV.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield EV.waitTillPageRedirect(),!0}const a=new URL(window.location.href).searchParams.get("session_state");if(s===e.Storage.LocalStorage||s===e.Storage.SessionStorage)t&&(yield t(a));else{const e={data:null!=a?a:"",type:JV};null===(n=null===(i=null===window||void 0===window?void 0:window.parent)||void 0===i?void 0:i.parent)||void 0===n||n.postMessage(e)}return EV.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield EV.waitTillPageRedirect(),!0}{if(l.includes(wV)){const e={type:KV};return window.parent.parent.postMessage(e,c.origin),EV.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield EV.waitTillPageRedirect(),!0}EV.setPromptNoneRequestSent(!1);const e=yield a();return yield AW.clearUserSessionData(),c.location.href=e,window.location.href="about:blank",yield EV.waitTillPageRedirect(),!0}}return!1}));return(e,t,i)=>CW(void 0,void 0,void 0,(function*(){var n;let l=document.createElement("iframe");l.setAttribute("id",LV),l.style.display="none";let o=!1;l.onload=()=>{var e,t,i,n;l=document.getElementById(LV);const c=null==l?void 0:l.contentDocument,a=null==c?void 0:c.createElement("iframe");a&&(a.setAttribute("id","opIFrame"),a.style.display="none");const r=null==c?void 0:c.createElement("iframe");r&&(r.setAttribute("id",HV),r.style.display="none"),a&&(null===(t=null===(e=null==l?void 0:l.contentDocument)||void 0===e?void 0:e.body)||void 0===t||t.appendChild(a)),r&&(null===(n=null===(i=null==l?void 0:l.contentDocument)||void 0===i?void 0:i.body)||void 0===n||n.appendChild(r)),o=!0},null===(n=null===document||void 0===document?void 0:document.body)||void 0===n||n.appendChild(l),a=e,s=t,d=i;for(;!1===o;)yield new Promise((e=>setTimeout(e,1)));return{initialize:h,receivePromptNoneResponse:y,reset:Z}}))})();var _V={exports:{}},qV=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}},$V=qV,eI=Object.prototype.toString;function tI(e){return Array.isArray(e)}function iI(e){return void 0===e}function nI(e){return"[object ArrayBuffer]"===eI.call(e)}function lI(e){return null!==e&&"object"==typeof e}function oI(e){if("[object Object]"!==eI.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function cI(e){return"[object Function]"===eI.call(e)}function aI(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),tI(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}var rI={isArray:tI,isArrayBuffer:nI,isBuffer:function(e){return null!==e&&!iI(e)&&null!==e.constructor&&!iI(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===eI.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&nI(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:lI,isPlainObject:oI,isUndefined:iI,isDate:function(e){return"[object Date]"===eI.call(e)},isFile:function(e){return"[object File]"===eI.call(e)},isBlob:function(e){return"[object Blob]"===eI.call(e)},isFunction:cI,isStream:function(e){return lI(e)&&cI(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===eI.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:aI,merge:function e(){var t={};function i(i,n){oI(t[n])&&oI(i)?t[n]=e(t[n],i):oI(i)?t[n]=e({},i):tI(i)?t[n]=i.slice():t[n]=i}for(var n=0,l=arguments.length;n<l;n++)aI(arguments[n],i);return t},extend:function(e,t,i){return aI(t,(function(t,n){e[n]=i&&"function"==typeof t?$V(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},sI=rI;function dI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var uI=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(sI.isURLSearchParams(t))n=t.toString();else{var l=[];sI.forEach(t,(function(e,t){null!=e&&(sI.isArray(e)?t+="[]":e=[e],sI.forEach(e,(function(e){sI.isDate(e)?e=e.toISOString():sI.isObject(e)&&(e=JSON.stringify(e)),l.push(dI(t)+"="+dI(e))})))})),n=l.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},hI=rI;function bI(){this.handlers=[]}bI.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},bI.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},bI.prototype.forEach=function(e){hI.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var ZI=bI,mI="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function pI(){throw new Error("setTimeout has not been defined")}function yI(){throw new Error("clearTimeout has not been defined")}var GI=pI,XI=yI;function WI(e){if(GI===setTimeout)return setTimeout(e,0);if((GI===pI||!GI)&&setTimeout)return GI=setTimeout,setTimeout(e,0);try{return GI(e,0)}catch(t){try{return GI.call(null,e,0)}catch(t){return GI.call(this,e,0)}}}"function"==typeof mI.setTimeout&&(GI=setTimeout),"function"==typeof mI.clearTimeout&&(XI=clearTimeout);var VI,II=[],RI=!1,gI=-1;function fI(){RI&&VI&&(RI=!1,VI.length?II=VI.concat(II):gI=-1,II.length&&vI())}function vI(){if(!RI){var e=WI(fI);RI=!0;for(var t=II.length;t;){for(VI=II,II=[];++gI<t;)VI&&VI[gI].run();gI=-1,t=II.length}VI=null,RI=!1,function(e){if(XI===clearTimeout)return clearTimeout(e);if((XI===yI||!XI)&&clearTimeout)return XI=clearTimeout,clearTimeout(e);try{XI(e)}catch(t){try{return XI.call(null,e)}catch(t){return XI.call(this,e)}}}(e)}}function SI(e,t){this.fun=e,this.array=t}SI.prototype.run=function(){this.fun.apply(null,this.array)};function YI(){}var KI=YI,NI=YI,JI=YI,kI=YI,CI=YI,UI=YI,LI=YI;var HI=mI.performance||{},TI=HI.now||HI.mozNow||HI.msNow||HI.oNow||HI.webkitNow||function(){return(new Date).getTime()};var wI=new Date;var FI={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];II.push(new SI(e,t)),1!==II.length||RI||WI(vI)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:KI,addListener:NI,once:JI,off:kI,removeListener:CI,removeAllListeners:UI,emit:LI,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*TI.call(HI),i=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(i-=e[0],(n-=e[1])<0&&(i--,n+=1e9)),[i,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wI)/1e3}},xI=FI,PI=rI,zI=function(e,t,i,n,l){return e.config=t,i&&(e.code=i),e.request=n,e.response=l,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},BI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jI=zI,MI=function(e,t,i,n,l){var o=new Error(e);return jI(o,t,i,n,l)},QI=MI,EI=rI,DI=EI.isStandardBrowserEnv()?{write:function(e,t,i,n,l,o){var c=[];c.push(e+"="+encodeURIComponent(t)),EI.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),EI.isString(n)&&c.push("path="+n),EI.isString(l)&&c.push("domain="+l),!0===o&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},OI=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},AI=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},_I=rI,qI=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],$I=rI,eR=$I.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=$I.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0};function tR(e){this.message=e}tR.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},tR.prototype.__CANCEL__=!0;var iR=tR,nR=rI,lR=function(e,t,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(QI("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)},oR=DI,cR=uI,aR=function(e,t){return e&&!OI(t)?AI(e,t):t},rR=function(e){var t,i,n,l={};return e?(_I.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=_I.trim(e.substr(0,n)).toLowerCase(),i=_I.trim(e.substr(n+1)),t){if(l[t]&&qI.indexOf(t)>=0)return;l[t]="set-cookie"===t?(l[t]?l[t]:[]).concat([i]):l[t]?l[t]+", "+i:i}})),l):l},sR=eR,dR=MI,uR=BI,hR=iR,bR=function(e){return new Promise((function(t,i){var n,l=e.data,o=e.headers,c=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}nR.isFormData(l)&&delete o["Content-Type"];var r=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+d)}var u=aR(e.baseURL,e.url);function h(){if(r){var n="getAllResponseHeaders"in r?rR(r.getAllResponseHeaders()):null,l={data:c&&"text"!==c&&"json"!==c?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:n,config:e,request:r};lR((function(e){t(e),a()}),(function(e){i(e),a()}),l),r=null}}if(r.open(e.method.toUpperCase(),cR(u,e.params,e.paramsSerializer),!0),r.timeout=e.timeout,"onloadend"in r?r.onloadend=h:r.onreadystatechange=function(){r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&setTimeout(h)},r.onabort=function(){r&&(i(dR("Request aborted",e,"ECONNABORTED",r)),r=null)},r.onerror=function(){i(dR("Network Error",e,null,r)),r=null},r.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||uR;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(dR(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",r)),r=null},nR.isStandardBrowserEnv()){var b=(e.withCredentials||sR(u))&&e.xsrfCookieName?oR.read(e.xsrfCookieName):void 0;b&&(o[e.xsrfHeaderName]=b)}"setRequestHeader"in r&&nR.forEach(o,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete o[t]:r.setRequestHeader(t,e)})),nR.isUndefined(e.withCredentials)||(r.withCredentials=!!e.withCredentials),c&&"json"!==c&&(r.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&r.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(n=function(e){r&&(i(!e||e&&e.type?new hR("canceled"):e),r.abort(),r=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),l||(l=null),r.send(l)}))},ZR=rI,mR=function(e,t){PI.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))},pR=zI,yR={"Content-Type":"application/x-www-form-urlencoded"};function GR(e,t){!ZR.isUndefined(e)&&ZR.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var XR,WR={transitional:BI,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==xI&&"[object process]"===Object.prototype.toString.call(xI))&&(XR=bR),XR),transformRequest:[function(e,t){return mR(t,"Accept"),mR(t,"Content-Type"),ZR.isFormData(e)||ZR.isArrayBuffer(e)||ZR.isBuffer(e)||ZR.isStream(e)||ZR.isFile(e)||ZR.isBlob(e)?e:ZR.isArrayBufferView(e)?e.buffer:ZR.isURLSearchParams(e)?(GR(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ZR.isObject(e)||t&&"application/json"===t["Content-Type"]?(GR(t,"application/json"),function(e,t,i){if(ZR.isString(e))try{return(t||JSON.parse)(e),ZR.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||WR.transitional,i=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,l=!i&&"json"===this.responseType;if(l||n&&ZR.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(l){if("SyntaxError"===e.name)throw pR(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ZR.forEach(["delete","get","head"],(function(e){WR.headers[e]={}})),ZR.forEach(["post","put","patch"],(function(e){WR.headers[e]=ZR.merge(yR)}));var VR=WR,IR=rI,RR=VR,gR=function(e){return!(!e||!e.__CANCEL__)},fR=rI,vR=function(e,t,i){var n=this||RR;return IR.forEach(i,(function(i){e=i.call(n,e,t)})),e},SR=gR,YR=VR,KR=iR;function NR(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new KR("canceled")}var JR=rI,kR=function(e,t){t=t||{};var i={};function n(e,t){return JR.isPlainObject(e)&&JR.isPlainObject(t)?JR.merge(e,t):JR.isPlainObject(t)?JR.merge({},t):JR.isArray(t)?t.slice():t}function l(i){return JR.isUndefined(t[i])?JR.isUndefined(e[i])?void 0:n(void 0,e[i]):n(e[i],t[i])}function o(e){if(!JR.isUndefined(t[e]))return n(void 0,t[e])}function c(i){return JR.isUndefined(t[i])?JR.isUndefined(e[i])?void 0:n(void 0,e[i]):n(void 0,t[i])}function a(i){return i in t?n(e[i],t[i]):i in e?n(void 0,e[i]):void 0}var r={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:a};return JR.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=r[e]||l,n=t(e);JR.isUndefined(n)&&t!==a||(i[e]=n)})),i},CR="0.26.1",UR=CR,LR={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){LR[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var HR={};LR.transitional=function(e,t,i){function n(e,t){return"[Axios v"+UR+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,l,o){if(!1===e)throw new Error(n(l," has been removed"+(t?" in "+t:"")));return t&&!HR[l]&&(HR[l]=!0,console.warn(n(l," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,l,o)}};var TR={assertOptions:function(e,t,i){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),l=n.length;l-- >0;){var o=n[l],c=t[o];if(c){var a=e[o],r=void 0===a||c(a,o,e);if(!0!==r)throw new TypeError("option "+o+" must be "+r)}else if(!0!==i)throw Error("Unknown option "+o)}},validators:LR},wR=rI,FR=uI,xR=ZI,PR=function(e){return NR(e),e.headers=e.headers||{},e.data=vR.call(e,e.data,e.headers,e.transformRequest),e.headers=fR.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),fR.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||YR.adapter)(e).then((function(t){return NR(e),t.data=vR.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return SR(t)||(NR(e),t&&t.response&&(t.response.data=vR.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},zR=kR,BR=TR,jR=BR.validators;function MR(e){this.defaults=e,this.interceptors={request:new xR,response:new xR}}MR.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=zR(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;void 0!==i&&BR.assertOptions(i,{silentJSONParsing:jR.transitional(jR.boolean),forcedJSONParsing:jR.transitional(jR.boolean),clarifyTimeoutError:jR.transitional(jR.boolean)},!1);var n=[],l=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var o,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!l){var a=[PR,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(c),o=Promise.resolve(t);a.length;)o=o.then(a.shift(),a.shift());return o}for(var r=t;n.length;){var s=n.shift(),d=n.shift();try{r=s(r)}catch(e){d(e);break}}try{o=PR(r)}catch(e){return Promise.reject(e)}for(;c.length;)o=o.then(c.shift(),c.shift());return o},MR.prototype.getUri=function(e){return e=zR(this.defaults,e),FR(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},wR.forEach(["delete","get","head","options"],(function(e){MR.prototype[e]=function(t,i){return this.request(zR(i||{},{method:e,url:t,data:(i||{}).data}))}})),wR.forEach(["post","put","patch"],(function(e){MR.prototype[e]=function(t,i,n){return this.request(zR(n||{},{method:e,url:t,data:i}))}}));var QR=MR,ER=iR;function DR(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e){i.reason||(i.reason=new ER(e),t(i.reason))}))}DR.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},DR.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},DR.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},DR.source=function(){var e,t=new DR((function(t){e=t}));return{token:t,cancel:e}};var OR=DR,AR=rI,_R=rI,qR=qV,$R=QR,eg=kR;var tg=function e(t){var i=new $R(t),n=qR($R.prototype.request,i);return _R.extend(n,$R.prototype,i),_R.extend(n,i),n.create=function(i){return e(eg(t,i))},n}(VR);tg.Axios=$R,tg.Cancel=iR,tg.CancelToken=OR,tg.isCancel=gR,tg.VERSION=CR,tg.all=function(e){return Promise.all(e)},tg.spread=function(e){return function(t){return e.apply(null,t)}},tg.isAxiosError=function(e){return AR.isObject(e)&&!0===e.isAxiosError},_V.exports=tg,_V.exports.default=tg;var ig,ng=_V.exports;let lg=ig=class{constructor(){this.attachToken=()=>Promise.resolve(),this.requestStartCallback=()=>null,this.requestSuccessCallback=()=>null,this.requestErrorCallback=()=>null,this.requestFinishCallback=()=>null,this.init=this.init.bind(this),this.setHttpRequestErrorCallback=this.setHttpRequestErrorCallback.bind(this),this.setHttpRequestFinishCallback=this.setHttpRequestFinishCallback.bind(this),this.setHttpRequestStartCallback=this.setHttpRequestStartCallback.bind(this),this.setHttpRequestSuccessCallback=this.setHttpRequestSuccessCallback.bind(this)}static getInstance(){return this.axiosInstance||(this.axiosInstance=ng.create({withCredentials:!0}),this.clientInstance||(this.clientInstance=new ig),this.axiosInstance.interceptors.request.use((e=>CW(this,void 0,void 0,(function*(){return yield this.clientInstance.requestHandler(e)})))),this.axiosInstance.interceptors.response.use((e=>this.clientInstance.successHandler(e)),(e=>this.clientInstance.errorHandler(e))),this.axiosInstance.all=ng.all,this.axiosInstance.spread=ng.spread,this.axiosInstance.init=this.clientInstance.init,this.axiosInstance.enableHandler=this.clientInstance.enableHandler,this.axiosInstance.disableHandler=this.clientInstance.disableHandler,this.axiosInstance.disableHandlerWithTimeout=this.clientInstance.disableHandlerWithTimeout,this.axiosInstance.setHttpRequestStartCallback=this.clientInstance.setHttpRequestStartCallback,this.axiosInstance.setHttpRequestSuccessCallback=this.clientInstance.setHttpRequestSuccessCallback,this.axiosInstance.setHttpRequestErrorCallback=this.clientInstance.setHttpRequestErrorCallback,this.axiosInstance.setHttpRequestFinishCallback=this.clientInstance.setHttpRequestFinishCallback),this.axiosInstance}requestHandler(e){return CW(this,void 0,void 0,(function*(){if(yield this.attachToken(e),null==e?void 0:e.shouldEncodeToFormData){const t=null==e?void 0:e.data,i=new FormData;Object.keys(t).forEach((e=>{i.append(e,t[e])})),e.data=i}return e.startTimeInMs=(new Date).getTime(),ig.isHandlerEnabled&&this.requestStartCallback&&"function"==typeof this.requestStartCallback&&this.requestStartCallback(e),e}))}errorHandler(e){throw ig.isHandlerEnabled&&(this.requestErrorCallback&&"function"==typeof this.requestErrorCallback&&this.requestErrorCallback(e),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),e}successHandler(e){return ig.isHandlerEnabled&&(this.requestSuccessCallback&&"function"==typeof this.requestSuccessCallback&&this.requestSuccessCallback(e),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),e}init(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return CW(this,void 0,void 0,(function*(){ig.isHandlerEnabled=e,this.attachToken=t}))}enableHandler(){ig.isHandlerEnabled=!0}disableHandler(){ig.isHandlerEnabled=!1}disableHandlerWithTimeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ig.DEFAULT_HANDLER_DISABLE_TIMEOUT;ig.isHandlerEnabled=!1,setTimeout((()=>{ig.isHandlerEnabled=!0}),e)}setHttpRequestStartCallback(e){this.requestStartCallback=e}setHttpRequestSuccessCallback(e){this.requestSuccessCallback=e}setHttpRequestErrorCallback(e){this.requestErrorCallback=e}setHttpRequestFinishCallback(e){this.requestFinishCallback=e}};lg.DEFAULT_HANDLER_DISABLE_TIMEOUT=1e3,lg=ig=function(e,t,i,n){var l,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(c=(o<3?l(c):o>3?l(t,i,c):l(t,i))||c);return o>3&&c&&Object.defineProperty(t,i,c),c}([e=>{}],lg);class og{setData(e,t){return CW(this,void 0,void 0,(function*(){localStorage.setItem(e,t)}))}getData(e){var t;return CW(this,void 0,void 0,(function*(){return null!==(t=localStorage.getItem(e))&&void 0!==t?t:"{}"}))}removeData(e){return CW(this,void 0,void 0,(function*(){localStorage.removeItem(e)}))}}class cg{constructor(){this._data=new Map}setData(e,t){return CW(this,void 0,void 0,(function*(){this._data.set(e,t)}))}getData(e){var t,i;return CW(this,void 0,void 0,(function*(){return null!==(i=null===(t=this._data)||void 0===t?void 0:t.get(e))&&void 0!==i?i:"{}"}))}removeData(e){return CW(this,void 0,void 0,(function*(){this._data.delete(e)}))}}class ag{setData(e,t){return CW(this,void 0,void 0,(function*(){sessionStorage.setItem(e,t)}))}getData(e){var t;return CW(this,void 0,void 0,(function*(){return null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:"{}"}))}removeData(e){return CW(this,void 0,void 0,(function*(){sessionStorage.removeItem(e)}))}}var rg=[],sg=[],dg="undefined"!=typeof Uint8Array?Uint8Array:Array,ug=!1;function hg(){ug=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)rg[t]=e[t],sg[e.charCodeAt(t)]=t;sg["-".charCodeAt(0)]=62,sg["_".charCodeAt(0)]=63}function bg(e,t,i){for(var n,l,o=[],c=t;c<i;c+=3)n=(e[c]<<16)+(e[c+1]<<8)+e[c+2],o.push(rg[(l=n)>>18&63]+rg[l>>12&63]+rg[l>>6&63]+rg[63&l]);return o.join("")}function Zg(e){var t;ug||hg();for(var i=e.length,n=i%3,l="",o=[],c=16383,a=0,r=i-n;a<r;a+=c)o.push(bg(e,a,a+c>r?r:a+c));return 1===n?(t=e[i-1],l+=rg[t>>2],l+=rg[t<<4&63],l+="=="):2===n&&(t=(e[i-2]<<8)+e[i-1],l+=rg[t>>10],l+=rg[t>>4&63],l+=rg[t<<2&63],l+="="),o.push(l),o.join("")}function mg(e,t,i,n,l){var o,c,a=8*l-n-1,r=(1<<a)-1,s=r>>1,d=-7,u=i?l-1:0,h=i?-1:1,b=e[t+u];for(u+=h,o=b&(1<<-d)-1,b>>=-d,d+=a;d>0;o=256*o+e[t+u],u+=h,d-=8);for(c=o&(1<<-d)-1,o>>=-d,d+=n;d>0;c=256*c+e[t+u],u+=h,d-=8);if(0===o)o=1-s;else{if(o===r)return c?NaN:1/0*(b?-1:1);c+=Math.pow(2,n),o-=s}return(b?-1:1)*c*Math.pow(2,o-n)}function pg(e,t,i,n,l,o){var c,a,r,s=8*o-l-1,d=(1<<s)-1,u=d>>1,h=23===l?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,Z=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,c=d):(c=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-c))<1&&(c--,r*=2),(t+=c+u>=1?h/r:h*Math.pow(2,1-u))*r>=2&&(c++,r/=2),c+u>=d?(a=0,c=d):c+u>=1?(a=(t*r-1)*Math.pow(2,l),c+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,l),c=0));l>=8;e[i+b]=255&a,b+=Z,a/=256,l-=8);for(c=c<<l|a,s+=l;s>0;e[i+b]=255&c,b+=Z,c/=256,s-=8);e[i+b-Z]|=128*m}var yg={}.toString,Gg=Array.isArray||function(e){return"[object Array]"==yg.call(e)};Ig.TYPED_ARRAY_SUPPORT=void 0===mI.TYPED_ARRAY_SUPPORT||mI.TYPED_ARRAY_SUPPORT;var Xg=Wg();function Wg(){return Ig.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Vg(e,t){if(Wg()<t)throw new RangeError("Invalid typed array length");return Ig.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ig.prototype:(null===e&&(e=new Ig(t)),e.length=t),e}function Ig(e,t,i){if(!(Ig.TYPED_ARRAY_SUPPORT||this instanceof Ig))return new Ig(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return fg(this,e)}return Rg(this,e,t,i)}function Rg(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n);Ig.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ig.prototype:e=vg(e,t);return e}(e,t,i,n):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!Ig.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Kg(t,i),l=(e=Vg(e,n)).write(t,i);l!==n&&(e=e.slice(0,l));return e}(e,t,i):function(e,t){if(Yg(t)){var i=0|Sg(t.length);return 0===(e=Vg(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?Vg(e,0):vg(e,t);if("Buffer"===t.type&&Gg(t.data))return vg(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function gg(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function fg(e,t){if(gg(t),e=Vg(e,t<0?0:0|Sg(t)),!Ig.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function vg(e,t){var i=t.length<0?0:0|Sg(t.length);e=Vg(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function Sg(e){if(e>=Wg())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Wg().toString(16)+" bytes");return 0|e}function Yg(e){return!(null==e||!e._isBuffer)}function Kg(e,t){if(Yg(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return nf(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return lf(e).length;default:if(n)return nf(e).length;t=(""+t).toLowerCase(),n=!0}}function Ng(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Mg(this,t,i);case"utf8":case"utf-8":return Pg(this,t,i);case"ascii":return Bg(this,t,i);case"latin1":case"binary":return jg(this,t,i);case"base64":return xg(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qg(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Jg(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function kg(e,t,i,n,l){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=l?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(l)return-1;i=e.length-1}else if(i<0){if(!l)return-1;i=0}if("string"==typeof t&&(t=Ig.from(t,n)),Yg(t))return 0===t.length?-1:Cg(e,t,i,n,l);if("number"==typeof t)return t&=255,Ig.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):Cg(e,[t],i,n,l);throw new TypeError("val must be string, number or Buffer")}function Cg(e,t,i,n,l){var o,c=1,a=e.length,r=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;c=2,a/=2,r/=2,i/=2}function s(e,t){return 1===c?e[t]:e.readUInt16BE(t*c)}if(l){var d=-1;for(o=i;o<a;o++)if(s(e,o)===s(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===r)return d*c}else-1!==d&&(o-=o-d),d=-1}else for(i+r>a&&(i=a-r),o=i;o>=0;o--){for(var u=!0,h=0;h<r;h++)if(s(e,o+h)!==s(t,h)){u=!1;break}if(u)return o}return-1}function Ug(e,t,i,n){i=Number(i)||0;var l=e.length-i;n?(n=Number(n))>l&&(n=l):n=l;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var c=0;c<n;++c){var a=parseInt(t.substr(2*c,2),16);if(isNaN(a))return c;e[i+c]=a}return c}function Lg(e,t,i,n){return of(nf(t,e.length-i),e,i,n)}function Hg(e,t,i,n){return of(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function Tg(e,t,i,n){return Hg(e,t,i,n)}function wg(e,t,i,n){return of(lf(t),e,i,n)}function Fg(e,t,i,n){return of(function(e,t){for(var i,n,l,o=[],c=0;c<e.length&&!((t-=2)<0);++c)n=(i=e.charCodeAt(c))>>8,l=i%256,o.push(l),o.push(n);return o}(t,e.length-i),e,i,n)}function xg(e,t,i){return 0===t&&i===e.length?Zg(e):Zg(e.slice(t,i))}function Pg(e,t,i){i=Math.min(e.length,i);for(var n=[],l=t;l<i;){var o,c,a,r,s=e[l],d=null,u=s>239?4:s>223?3:s>191?2:1;if(l+u<=i)switch(u){case 1:s<128&&(d=s);break;case 2:128==(192&(o=e[l+1]))&&(r=(31&s)<<6|63&o)>127&&(d=r);break;case 3:o=e[l+1],c=e[l+2],128==(192&o)&&128==(192&c)&&(r=(15&s)<<12|(63&o)<<6|63&c)>2047&&(r<55296||r>57343)&&(d=r);break;case 4:o=e[l+1],c=e[l+2],a=e[l+3],128==(192&o)&&128==(192&c)&&128==(192&a)&&(r=(15&s)<<18|(63&o)<<12|(63&c)<<6|63&a)>65535&&r<1114112&&(d=r)}null===d?(d=65533,u=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),l+=u}return function(e){var t=e.length;if(t<=zg)return String.fromCharCode.apply(String,e);var i="",n=0;for(;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=zg));return i}(n)}Ig.poolSize=8192,Ig._augment=function(e){return e.__proto__=Ig.prototype,e},Ig.from=function(e,t,i){return Rg(null,e,t,i)},Ig.TYPED_ARRAY_SUPPORT&&(Ig.prototype.__proto__=Uint8Array.prototype,Ig.__proto__=Uint8Array),Ig.alloc=function(e,t,i){return function(e,t,i,n){return gg(t),t<=0?Vg(e,t):void 0!==i?"string"==typeof n?Vg(e,t).fill(i,n):Vg(e,t).fill(i):Vg(e,t)}(null,e,t,i)},Ig.allocUnsafe=function(e){return fg(null,e)},Ig.allocUnsafeSlow=function(e){return fg(null,e)},Ig.isBuffer=cf,Ig.compare=function(e,t){if(!Yg(e)||!Yg(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,l=0,o=Math.min(i,n);l<o;++l)if(e[l]!==t[l]){i=e[l],n=t[l];break}return i<n?-1:n<i?1:0},Ig.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ig.concat=function(e,t){if(!Gg(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ig.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=Ig.allocUnsafe(t),l=0;for(i=0;i<e.length;++i){var o=e[i];if(!Yg(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,l),l+=o.length}return n},Ig.byteLength=Kg,Ig.prototype._isBuffer=!0,Ig.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Jg(this,t,t+1);return this},Ig.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Jg(this,t,t+3),Jg(this,t+1,t+2);return this},Ig.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Jg(this,t,t+7),Jg(this,t+1,t+6),Jg(this,t+2,t+5),Jg(this,t+3,t+4);return this},Ig.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Pg(this,0,e):Ng.apply(this,arguments)},Ig.prototype.equals=function(e){if(!Yg(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ig.compare(this,e)},Ig.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Ig.prototype.compare=function(e,t,i,n,l){if(!Yg(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===l&&(l=this.length),t<0||i>e.length||n<0||l>this.length)throw new RangeError("out of range index");if(n>=l&&t>=i)return 0;if(n>=l)return-1;if(t>=i)return 1;if(this===e)return 0;for(var o=(l>>>=0)-(n>>>=0),c=(i>>>=0)-(t>>>=0),a=Math.min(o,c),r=this.slice(n,l),s=e.slice(t,i),d=0;d<a;++d)if(r[d]!==s[d]){o=r[d],c=s[d];break}return o<c?-1:c<o?1:0},Ig.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},Ig.prototype.indexOf=function(e,t,i){return kg(this,e,t,i,!0)},Ig.prototype.lastIndexOf=function(e,t,i){return kg(this,e,t,i,!1)},Ig.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var l=this.length-t;if((void 0===i||i>l)&&(i=l),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return Ug(this,e,t,i);case"utf8":case"utf-8":return Lg(this,e,t,i);case"ascii":return Hg(this,e,t,i);case"latin1":case"binary":return Tg(this,e,t,i);case"base64":return wg(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fg(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Ig.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var zg=4096;function Bg(e,t,i){var n="";i=Math.min(e.length,i);for(var l=t;l<i;++l)n+=String.fromCharCode(127&e[l]);return n}function jg(e,t,i){var n="";i=Math.min(e.length,i);for(var l=t;l<i;++l)n+=String.fromCharCode(e[l]);return n}function Mg(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var l="",o=t;o<i;++o)l+=tf(e[o]);return l}function Qg(e,t,i){for(var n=e.slice(t,i),l="",o=0;o<n.length;o+=2)l+=String.fromCharCode(n[o]+256*n[o+1]);return l}function Eg(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function Dg(e,t,i,n,l,o){if(!Yg(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>l||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function Og(e,t,i,n){t<0&&(t=65535+t+1);for(var l=0,o=Math.min(e.length-i,2);l<o;++l)e[i+l]=(t&255<<8*(n?l:1-l))>>>8*(n?l:1-l)}function Ag(e,t,i,n){t<0&&(t=4294967295+t+1);for(var l=0,o=Math.min(e.length-i,4);l<o;++l)e[i+l]=t>>>8*(n?l:3-l)&255}function _g(e,t,i,n,l,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function qg(e,t,i,n,l){return l||_g(e,0,i,4),pg(e,t,i,n,23,4),i+4}function $g(e,t,i,n,l){return l||_g(e,0,i,8),pg(e,t,i,n,52,8),i+8}Ig.prototype.slice=function(e,t){var i,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Ig.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Ig.prototype;else{var l=t-e;i=new Ig(l,void 0);for(var o=0;o<l;++o)i[o]=this[o+e]}return i},Ig.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||Eg(e,t,this.length);for(var n=this[e],l=1,o=0;++o<t&&(l*=256);)n+=this[e+o]*l;return n},Ig.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||Eg(e,t,this.length);for(var n=this[e+--t],l=1;t>0&&(l*=256);)n+=this[e+--t]*l;return n},Ig.prototype.readUInt8=function(e,t){return t||Eg(e,1,this.length),this[e]},Ig.prototype.readUInt16LE=function(e,t){return t||Eg(e,2,this.length),this[e]|this[e+1]<<8},Ig.prototype.readUInt16BE=function(e,t){return t||Eg(e,2,this.length),this[e]<<8|this[e+1]},Ig.prototype.readUInt32LE=function(e,t){return t||Eg(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ig.prototype.readUInt32BE=function(e,t){return t||Eg(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ig.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||Eg(e,t,this.length);for(var n=this[e],l=1,o=0;++o<t&&(l*=256);)n+=this[e+o]*l;return n>=(l*=128)&&(n-=Math.pow(2,8*t)),n},Ig.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||Eg(e,t,this.length);for(var n=t,l=1,o=this[e+--n];n>0&&(l*=256);)o+=this[e+--n]*l;return o>=(l*=128)&&(o-=Math.pow(2,8*t)),o},Ig.prototype.readInt8=function(e,t){return t||Eg(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ig.prototype.readInt16LE=function(e,t){t||Eg(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},Ig.prototype.readInt16BE=function(e,t){t||Eg(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},Ig.prototype.readInt32LE=function(e,t){return t||Eg(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ig.prototype.readInt32BE=function(e,t){return t||Eg(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ig.prototype.readFloatLE=function(e,t){return t||Eg(e,4,this.length),mg(this,e,!0,23,4)},Ig.prototype.readFloatBE=function(e,t){return t||Eg(e,4,this.length),mg(this,e,!1,23,4)},Ig.prototype.readDoubleLE=function(e,t){return t||Eg(e,8,this.length),mg(this,e,!0,52,8)},Ig.prototype.readDoubleBE=function(e,t){return t||Eg(e,8,this.length),mg(this,e,!1,52,8)},Ig.prototype.writeUIntLE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||Dg(this,e,t,i,Math.pow(2,8*i)-1,0);var l=1,o=0;for(this[t]=255&e;++o<i&&(l*=256);)this[t+o]=e/l&255;return t+i},Ig.prototype.writeUIntBE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||Dg(this,e,t,i,Math.pow(2,8*i)-1,0);var l=i-1,o=1;for(this[t+l]=255&e;--l>=0&&(o*=256);)this[t+l]=e/o&255;return t+i},Ig.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,1,255,0),Ig.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ig.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,2,65535,0),Ig.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Og(this,e,t,!0),t+2},Ig.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,2,65535,0),Ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Og(this,e,t,!1),t+2},Ig.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,4,4294967295,0),Ig.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Ag(this,e,t,!0),t+4},Ig.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,4,4294967295,0),Ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ag(this,e,t,!1),t+4},Ig.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var l=Math.pow(2,8*i-1);Dg(this,e,t,i,l-1,-l)}var o=0,c=1,a=0;for(this[t]=255&e;++o<i&&(c*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/c>>0)-a&255;return t+i},Ig.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var l=Math.pow(2,8*i-1);Dg(this,e,t,i,l-1,-l)}var o=i-1,c=1,a=0;for(this[t+o]=255&e;--o>=0&&(c*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/c>>0)-a&255;return t+i},Ig.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,1,127,-128),Ig.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ig.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,2,32767,-32768),Ig.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Og(this,e,t,!0),t+2},Ig.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,2,32767,-32768),Ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Og(this,e,t,!1),t+2},Ig.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,4,2147483647,-2147483648),Ig.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ag(this,e,t,!0),t+4},Ig.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||Dg(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ag(this,e,t,!1),t+4},Ig.prototype.writeFloatLE=function(e,t,i){return qg(this,e,t,!0,i)},Ig.prototype.writeFloatBE=function(e,t,i){return qg(this,e,t,!1,i)},Ig.prototype.writeDoubleLE=function(e,t,i){return $g(this,e,t,!0,i)},Ig.prototype.writeDoubleBE=function(e,t,i){return $g(this,e,t,!1,i)},Ig.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var l,o=n-i;if(this===e&&i<t&&t<n)for(l=o-1;l>=0;--l)e[l+t]=this[l+i];else if(o<1e3||!Ig.TYPED_ARRAY_SUPPORT)for(l=0;l<o;++l)e[l+t]=this[l+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},Ig.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var l=e.charCodeAt(0);l<256&&(e=l)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Ig.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{var c=Yg(e)?e:nf(new Ig(e,n).toString()),a=c.length;for(o=0;o<i-t;++o)this[o+t]=c[o%a]}return this};var ef=/[^+\/0-9A-Za-z-_]/g;function tf(e){return e<16?"0"+e.toString(16):e.toString(16)}function nf(e,t){var i;t=t||1/0;for(var n=e.length,l=null,o=[],c=0;c<n;++c){if((i=e.charCodeAt(c))>55295&&i<57344){if(!l){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(c+1===n){(t-=3)>-1&&o.push(239,191,189);continue}l=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),l=i;continue}i=65536+(l-55296<<10|i-56320)}else l&&(t-=3)>-1&&o.push(239,191,189);if(l=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function lf(e){return function(e){var t,i,n,l,o,c;ug||hg();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,c=new dg(3*a/4-o),n=o>0?a-4:a;var r=0;for(t=0,i=0;t<n;t+=4,i+=3)l=sg[e.charCodeAt(t)]<<18|sg[e.charCodeAt(t+1)]<<12|sg[e.charCodeAt(t+2)]<<6|sg[e.charCodeAt(t+3)],c[r++]=l>>16&255,c[r++]=l>>8&255,c[r++]=255&l;return 2===o?(l=sg[e.charCodeAt(t)]<<2|sg[e.charCodeAt(t+1)]>>4,c[r++]=255&l):1===o&&(l=sg[e.charCodeAt(t)]<<10|sg[e.charCodeAt(t+1)]<<4|sg[e.charCodeAt(t+2)]>>2,c[r++]=l>>8&255,c[r++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(ef,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function of(e,t,i,n){for(var l=0;l<n&&!(l+i>=t.length||l>=e.length);++l)t[l+i]=e[l];return l}function cf(e){return null!=e&&(!!e._isBuffer||af(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&af(e.slice(0,0))}(e))}function af(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var rf=Object.freeze({__proto__:null,Buffer:Ig,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),Ig.alloc(+e)},isBuffer:cf,kMaxLength:Xg}),sf={exports:{}},df={},uf={};Object.defineProperty(uf,"__esModule",{value:!0}),uf.default=function(e){var t=e.length,i=t%4;if(!i)return e;var n=t,l=4-i,o=t+l,c=Ig.alloc(o);for(c.write(e);l--;)c.write("=",n++);return c.toString()},Object.defineProperty(df,"__esModule",{value:!0});var hf=uf;function bf(e,t){return void 0===t&&(t="utf8"),Ig.isBuffer(e)?mf(e.toString("base64")):mf(Ig.from(e,t).toString("base64"))}function Zf(e){return e=e.toString(),hf.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function mf(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var pf,yf=bf;yf.encode=bf,yf.decode=function(e,t){return void 0===t&&(t="utf8"),Ig.from(Zf(e),"base64").toString(t)},yf.toBase64=Zf,yf.fromBase64=mf,yf.toBuffer=function(e){return Ig.from(Zf(e),"base64")},df.default=yf,(pf=sf).exports=df.default,pf.exports.default=pf.exports;var Gf=sf.exports,Xf={exports:{}};!function(e){!function(t,i){var n={};!function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(e,i,n,l,o){for(var c,a,r,s,d,u,h,b,Z,m,p,y,G;o>=64;){for(c=i[0],a=i[1],r=i[2],s=i[3],d=i[4],u=i[5],h=i[6],b=i[7],m=0;m<16;m++)p=l+4*m,e[m]=(255&n[p])<<24|(255&n[p+1])<<16|(255&n[p+2])<<8|255&n[p+3];for(m=16;m<64;m++)y=((Z=e[m-2])>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10,G=((Z=e[m-15])>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3,e[m]=(y+e[m-7]|0)+(G+e[m-16]|0);for(m=0;m<64;m++)y=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&h)|0)+(b+(t[m]+e[m]|0)|0)|0,G=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&a^c&r^a&r)|0,b=h,h=u,u=d,d=s+y|0,s=r,r=a,a=c,c=y+G|0;i[0]+=c,i[1]+=a,i[2]+=r,i[3]+=s,i[4]+=d,i[5]+=u,i[6]+=h,i[7]+=b,l+=64,o-=64}return l}var n=function(){function t(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return t.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},t.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},t.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(i(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=i(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this},t.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,n=this.bufferLength,l=t/536870912|0,o=t<<3,c=t%64<56?64:128;this.buffer[n]=128;for(var a=n+1;a<c-8;a++)this.buffer[a]=0;this.buffer[c-8]=l>>>24&255,this.buffer[c-7]=l>>>16&255,this.buffer[c-6]=l>>>8&255,this.buffer[c-5]=l>>>0&255,this.buffer[c-4]=o>>>24&255,this.buffer[c-3]=o>>>16&255,this.buffer[c-2]=o>>>8&255,this.buffer[c-1]=o>>>0&255,i(this.temp,this.state,this.buffer,0,c),this.finished=!0}for(a=0;a<8;a++)e[4*a+0]=this.state[a]>>>24&255,e[4*a+1]=this.state[a]>>>16&255,e[4*a+2]=this.state[a]>>>8&255,e[4*a+3]=this.state[a]>>>0&255;return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},t.prototype._restoreState=function(e,t){for(var i=0;i<this.state.length;i++)this.state[i]=e[i];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},t}();e.Hash=n;var l=function(){function e(e){this.inner=new n,this.outer=new n,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new n).update(e).finish(t).clean();else for(var i=0;i<e.length;i++)t[i]=e[i];for(i=0;i<t.length;i++)t[i]^=54;this.inner.update(t);for(i=0;i<t.length;i++)t[i]^=106;this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(i=0;i<t.length;i++)t[i]=0}return e.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},e.prototype.clean=function(){for(var e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()},e.prototype.update=function(e){return this.inner.update(e),this},e.prototype.finish=function(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e}();function o(e){var t=(new n).update(e),i=t.digest();return t.clean(),i}function c(e,t){var i=new l(e).update(t),n=i.digest();return i.clean(),n}function a(e,t,i,n){var l=n[0];if(0===l)throw new Error("hkdf: cannot expand more");t.reset(),l>1&&t.update(e),i&&t.update(i),t.update(n),t.finish(e),n[0]++}e.HMAC=l,e.hash=o,e.default=o,e.hmac=c;var r=new Uint8Array(e.digestLength);function s(e,t,i,n){void 0===t&&(t=r),void 0===n&&(n=32);for(var o=new Uint8Array([1]),s=c(t,e),d=new l(s),u=new Uint8Array(d.digestLength),h=u.length,b=new Uint8Array(n),Z=0;Z<n;Z++)h===u.length&&(a(u,d,i,o),h=0),b[Z]=u[h++];return d.clean(),u.fill(0),o.fill(0),b}function d(e,t,i,n){for(var o=new l(e),c=o.digestLength,a=new Uint8Array(4),r=new Uint8Array(c),s=new Uint8Array(c),d=new Uint8Array(n),u=0;u*c<n;u++){var h=u+1;a[0]=h>>>24&255,a[1]=h>>>16&255,a[2]=h>>>8&255,a[3]=h>>>0&255,o.reset(),o.update(t),o.update(a),o.finish(s);for(var b=0;b<c;b++)r[b]=s[b];for(b=2;b<=i;b++){o.reset(),o.update(s).finish(s);for(var Z=0;Z<c;Z++)r[Z]^=s[Z]}for(b=0;b<c&&u*c+b<n;b++)d[u*c+b]=r[b]}for(u=0;u<c;u++)r[u]=s[u]=0;for(u=0;u<4;u++)a[u]=0;return o.clean(),d}e.hkdf=s,e.pbkdf2=d}(n);var l=n.default;for(var o in n)l[o]=n[o];e.exports=l}()}(Xf);var Wf=i(Xf.exports),Vf=crypto;const If=e=>e instanceof CryptoKey,Rf=new TextEncoder,gf=new TextDecoder;const ff=e=>{let t=e;t instanceof Uint8Array&&(t=gf.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i})(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};class vf extends Error{constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class Sf extends vf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=i}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class Yf extends vf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=i}static get code(){return"ERR_JWT_EXPIRED"}}class Kf extends vf{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Nf extends vf{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Jf extends vf{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class kf extends vf{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class Cf extends vf{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class Uf extends vf{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class Lf extends vf{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class Hf extends vf{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function Tf(){return"function"==typeof WebSocketPair}function wf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name";return new TypeError("CryptoKey does not support this operation, its ".concat(t," must be ").concat(e))}function Ff(e,t){return e.name===t}function xf(e){return parseInt(e.name.slice(4),10)}function Pf(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function zf(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const i=t.pop();e+="one of ".concat(t.join(", "),", or ").concat(i,".")}else 2===t.length?e+="one of ".concat(t[0]," or ").concat(t[1],"."):e+="".concat(t[0],".");throw new TypeError(e)}}var Bf=function(e){let t="Key must be ";for(var i=arguments.length,n=new Array(i>1?i-1:0),l=1;l<i;l++)n[l-1]=arguments[l];if(n.length>2){const e=n.pop();t+="one of type ".concat(n.join(", "),", or ").concat(e,".")}else 2===n.length?t+="one of type ".concat(n[0]," or ").concat(n[1],"."):t+="of type ".concat(n[0],".");return null==e?t+=" Received ".concat(e):"function"==typeof e&&e.name?t+=" Received function ".concat(e.name):"object"==typeof e&&null!=e&&e.constructor&&e.constructor.name&&(t+=" Received an instance of ".concat(e.constructor.name)),t},jf=e=>If(e);const Mf=["CryptoKey"];function Qf(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let i=e;for(;null!==Object.getPrototypeOf(i);)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(e)===i}const Ef=async e=>{var t,i;const{algorithm:n,keyUsages:l}=function(e){let t,i;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:"SHA-".concat(e.alg.slice(-3))},i=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Nf("".concat(e.alg," keys cannot be imported as CryptoKey instances"));case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},i=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},i=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},i=["deriveBits"];break;default:throw new Nf('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:"SHA-".concat(e.alg.slice(-3))},i=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(e.alg.slice(-3))},i=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(e.alg.slice(-3),10)||1)},i=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Nf('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},i=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},i=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},i=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},i=e.d?["deriveBits"]:[];break;default:throw new Nf('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case Tf()&&"OKP":if("EdDSA"!==e.alg)throw new Nf('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');if("Ed25519"!==e.crv)throw new Nf('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value');t={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},i=e.d?["sign"]:["verify"];break;default:throw new Nf('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:i}}(e),o=[n,null!==(t=e.ext)&&void 0!==t&&t,null!==(i=e.key_ops)&&void 0!==i?i:l];if("PBKDF2"===n.name)return Vf.subtle.importKey("raw",ff(e.k),...o);const c={...e};return delete c.alg,Vf.subtle.importKey("jwk",c,...o)};const Df=(e,t,i)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?(e=>{if(!(e instanceof Uint8Array)){if(!jf(e))throw new TypeError(Bf(e,...Mf,"Uint8Array"));if("secret"!==e.type)throw new TypeError("".concat(Mf.join(" or "),' instances for symmetric algorithms must be of type "secret"'))}})(t):((e,t)=>{if(!jf(e))throw new TypeError(Bf(e,...Mf));if("secret"===e.type)throw new TypeError("".concat(Mf.join(" or "),' instances for asymmetric algorithms must not be of type "secret"'));if("sign"===t&&"public"===e.type)throw new TypeError("".concat(Mf.join(" or "),' instances for asymmetric algorithm signing must be of type "private"'));if("decrypt"===t&&"public"===e.type)throw new TypeError("".concat(Mf.join(" or "),' instances for asymmetric algorithm decryption must be of type "private"'));if(e.algorithm&&"verify"===t&&"private"===e.type)throw new TypeError("".concat(Mf.join(" or "),' instances for asymmetric algorithm verifying must be of type "public"'));if(e.algorithm&&"encrypt"===t&&"private"===e.type)throw new TypeError("".concat(Mf.join(" or "),' instances for asymmetric algorithm encryption must be of type "public"'))})(t,i)};function Of(e,t,i){if(If(t))return function(e,t){switch(t){case"HS256":case"HS384":case"HS512":{if(!Ff(e.algorithm,"HMAC"))throw wf("HMAC");const i=parseInt(t.slice(2),10);if(xf(e.algorithm.hash)!==i)throw wf("SHA-".concat(i),"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Ff(e.algorithm,"RSASSA-PKCS1-v1_5"))throw wf("RSASSA-PKCS1-v1_5");const i=parseInt(t.slice(2),10);if(xf(e.algorithm.hash)!==i)throw wf("SHA-".concat(i),"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Ff(e.algorithm,"RSA-PSS"))throw wf("RSA-PSS");const i=parseInt(t.slice(2),10);if(xf(e.algorithm.hash)!==i)throw wf("SHA-".concat(i),"algorithm.hash");break}case Tf()&&"EdDSA":if(!Ff(e.algorithm,"NODE-ED25519"))throw wf("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!Ff(e.algorithm,"ECDSA"))throw wf("ECDSA");const i=Pf(t);if(e.algorithm.namedCurve!==i)throw wf(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}for(var i=arguments.length,n=new Array(i>2?i-2:0),l=2;l<i;l++)n[l-2]=arguments[l];zf(e,n)}(t,e,i),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Bf(t,...Mf));return Vf.subtle.importKey("raw",t,{hash:"SHA-".concat(e.slice(-3)),name:"HMAC"},!1,[i])}throw new TypeError(Bf(t,...Mf,"Uint8Array"))}const Af=async(e,t,i,n)=>{const l=await Of(e,t,"verify");((e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:i}=t.algorithm;if("number"!=typeof i||i<2048)throw new TypeError("".concat(e," requires key modulusLength to be 2048 bits or larger"))}})(e,l);const o=function(e,t){const i="SHA-".concat(e.slice(-3));switch(e){case"HS256":case"HS384":case"HS512":return{hash:i,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:i,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:i,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:i,name:"ECDSA",namedCurve:t.namedCurve};case Tf()&&"EdDSA":const{namedCurve:n}=t;return{name:n,namedCurve:n};default:throw new Nf("alg ".concat(e," is not supported either by JOSE or your javascript runtime"))}}(e,l.algorithm);try{return await Vf.subtle.verify(o,l,i,n)}catch(e){return!1}};async function _f(e,t,i){var n;if(!Qf(e))throw new Jf("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new Jf('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new Jf("JWS Protected Header incorrect type");if(void 0===e.payload)throw new Jf("JWS Payload missing");if("string"!=typeof e.signature)throw new Jf("JWS Signature missing or incorrect type");if(void 0!==e.header&&!Qf(e.header))throw new Jf("JWS Unprotected Header incorrect type");let l={};if(e.protected){const t=ff(e.protected);try{l=JSON.parse(gf.decode(t))}catch(e){throw new Jf("JWS Protected Header is invalid")}}if(!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.filter(Boolean);if(0===n.length||1===n.length)return!0;let l;for(const e of n){const t=Object.keys(e);if(l&&0!==l.size)for(const e of t){if(l.has(e))return!1;l.add(e)}else l=new Set(t)}return!0}(l,e.header))throw new Jf("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...l,...e.header},c=function(e,t,i,n,l){if(void 0!==l.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==i?new Map([...Object.entries(i),...t.entries()]):t;for(const t of n.crit){if(!o.has(t))throw new Nf('Extension Header Parameter "'.concat(t,'" is not recognized'));if(void 0===l[t])throw new e('Extension Header Parameter "'.concat(t,'" is missing'));if(o.get(t)&&void 0===n[t])throw new e('Extension Header Parameter "'.concat(t,'" MUST be integrity protected'))}return new Set(n.crit)}(Jf,new Map([["b64",!0]]),null==i?void 0:i.crit,l,o);let a=!0;if(c.has("b64")&&(a=l.b64,"boolean"!=typeof a))throw new Jf('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:r}=o;if("string"!=typeof r||!r)throw new Jf('JWS "alg" (Algorithm) Header Parameter missing or invalid');const s=i&&((e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!=typeof e))))throw new TypeError('"'.concat(e,'" option must be an array of strings'));if(t)return new Set(t)})("algorithms",i.algorithms);if(s&&!s.has(r))throw new Kf('"alg" (Algorithm) Header Parameter not allowed');if(a){if("string"!=typeof e.payload)throw new Jf("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new Jf("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t&&(t=await t(l,e),d=!0),Df(r,t,"verify");const u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce(((e,t)=>{let{length:i}=t;return e+i}),0),l=new Uint8Array(n);let o=0;return t.forEach((e=>{l.set(e,o),o+=e.length})),l}(Rf.encode(null!==(n=e.protected)&&void 0!==n?n:""),Rf.encode("."),"string"==typeof e.payload?Rf.encode(e.payload):e.payload),h=ff(e.signature);if(!await Af(r,t,h,u))throw new Hf;let b;b=a?ff(e.payload):"string"==typeof e.payload?Rf.encode(e.payload):e.payload;const Z={payload:b};return void 0!==e.protected&&(Z.protectedHeader=l),void 0!==e.header&&(Z.unprotectedHeader=e.header),d?{...Z,key:t}:Z}var qf=e=>Math.floor(e.getTime()/1e3);const $f=86400,ev=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var tv=e=>{const t=ev.exec(e);if(!t)throw new TypeError("Invalid time period format");const i=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(i);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*i);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*i);case"day":case"days":case"d":return Math.round(i*$f);case"week":case"weeks":case"w":return Math.round(604800*i);default:return Math.round(31557600*i)}};const iv=e=>e.toLowerCase().replace(/^application\//,""),nv=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));async function lv(e,t,i){var n;const l=await async function(e,t,i){if(e instanceof Uint8Array&&(e=gf.decode(e)),"string"!=typeof e)throw new Jf("Compact JWS must be a string or Uint8Array");const{0:n,1:l,2:o,length:c}=e.split(".");if(3!==c)throw new Jf("Invalid Compact JWS");const a=await _f({payload:l,protected:n,signature:o},t,i),r={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...r,key:a.key}:r}(e,t,i);if((null===(n=l.protectedHeader.crit)||void 0===n?void 0:n.includes("b64"))&&!1===l.protectedHeader.b64)throw new kf("JWTs MUST NOT use unencoded payload");const o=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{typ:n}=i;if(n&&("string"!=typeof e.typ||iv(e.typ)!==iv(n)))throw new Sf('unexpected "typ" JWT header value',"typ","check_failed");let l;try{l=JSON.parse(gf.decode(t))}catch(e){}if(!Qf(l))throw new kf("JWT Claims Set must be a top-level JSON object");const{issuer:o}=i;if(o&&!(Array.isArray(o)?o:[o]).includes(l.iss))throw new Sf('unexpected "iss" claim value',"iss","check_failed");const{subject:c}=i;if(c&&l.sub!==c)throw new Sf('unexpected "sub" claim value',"sub","check_failed");const{audience:a}=i;if(a&&!nv(l.aud,"string"==typeof a?[a]:a))throw new Sf('unexpected "aud" claim value',"aud","check_failed");let r;switch(typeof i.clockTolerance){case"string":r=tv(i.clockTolerance);break;case"number":r=i.clockTolerance;break;case"undefined":r=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:s}=i,d=qf(s||new Date);if((void 0!==l.iat||i.maxTokenAge)&&"number"!=typeof l.iat)throw new Sf('"iat" claim must be a number',"iat","invalid");if(void 0!==l.nbf){if("number"!=typeof l.nbf)throw new Sf('"nbf" claim must be a number',"nbf","invalid");if(l.nbf>d+r)throw new Sf('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==l.exp){if("number"!=typeof l.exp)throw new Sf('"exp" claim must be a number',"exp","invalid");if(l.exp<=d-r)throw new Yf('"exp" claim timestamp check failed',"exp","check_failed")}if(i.maxTokenAge){const e=d-l.iat;if(e-r>("number"==typeof i.maxTokenAge?i.maxTokenAge:tv(i.maxTokenAge)))throw new Yf('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-r)throw new Sf('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return l}(l.protectedHeader,l.payload,i),c={payload:o,protectedHeader:l.protectedHeader};return"function"==typeof t?{...c,key:l.key}:c}function ov(e){return Qf(e)}class cv{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(ov)}(e))throw new Cf("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:i,kid:n}={...e,...t.header},l=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Nf('Unsupported "alg" value for a JSON Web Key Set')}}(i),o=this._jwks.keys.filter((e=>{let t=l===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=i===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===i&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(i){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:c,length:a}=o;if(0===a)throw new Uf;if(1!==a)throw new Lf;const r=this._cached.get(c)||this._cached.set(c,{}).get(c);if(void 0===r[i]){const e=await async function(e,t,i){if(!Qf(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),"string"!=typeof t||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=i||(i=!0!==e.ext),i?Ef({...e,alg:t,ext:!1}):ff(e.k);case"RSA":if(void 0!==e.oth)throw new Nf('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Ef({...e,alg:t});default:throw new Nf('Unsupported "kty" (Key Type) Parameter value')}}({...c,ext:!0},i);if(e instanceof Uint8Array||"public"!==e.type)throw new Cf("JSON Web Key Set members must be public keys");r[i]=e}return r[i]}}var av={exports:{}},rv={exports:{}},sv=n(rf);!function(e,t){var i=sv,n=i.Buffer;function l(e,t){for(var i in e)t[i]=e[i]}function o(e,t,i){return n(e,t,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(l(i,t),t.Buffer=o),o.prototype=Object.create(n.prototype),l(n,o),o.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,i)},o.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=n(e);return void 0!==t?"string"==typeof i?l.fill(t,i):l.fill(t):l.fill(0),l},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}}(rv,rv.exports);var dv=65536,uv=4294967295;var hv=rv.exports.Buffer,bv=t.crypto||t.msCrypto;bv&&bv.getRandomValues?av.exports=function(e,t){if(e>uv)throw new RangeError("requested too many random bytes");var i=hv.allocUnsafe(e);if(e>0)if(e>dv)for(var n=0;n<e;n+=dv)bv.getRandomValues(i.slice(n,n+dv));else bv.getRandomValues(i);if("function"==typeof t)return xI.nextTick((function(){t(null,i)}));return i}:av.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};var Zv=av.exports;class mv{base64URLEncode(e){return Gf.encode(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}base64URLDecode(e){return Gf.decode(e).toString()}hashSha256(e){return Ig.from(Wf((new TextEncoder).encode(e)))}generateRandomBytes(e){return Zv(e)}verifyJwt(e,t,i,n,l,o,c,a){const r={algorithms:i,audience:n,clockTolerance:c,subject:o};return(null==a||a)&&(r.issuer=l),lv(e,(s={keys:[t]},cv.prototype.getKey.bind(new cv(s))),r).then((()=>Promise.resolve(!0))).catch((e=>{var t;return Promise.reject(new BW("SPA-CRYPTO-UTILS-VJ-IV01",null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:JSON.stringify(e),"".concat(null==e?void 0:e.code," ").concat(null==e?void 0:e.claim)))}));var s}}const pv=(t,i,n)=>CW(void 0,void 0,void 0,(function*(){var l;const o=(t=>{switch(t){case e.Storage.LocalStorage:return new og;case e.Storage.SessionStorage:return new ag;case e.Storage.BrowserMemory:return new cg;default:return new ag}})(i.storage),c=new mv,a=new AW;yield a.initialize(i,o,c,t);const r=new OV(a),s=a.getDataLayer(),d=yield AV((()=>CW(void 0,void 0,void 0,(function*(){return a.getSignOutURL()}))),null!==(l=i.storage)&&void 0!==l?l:e.Storage.SessionStorage,(e=>s.setSessionDataParameter(wW,null!=e?e:""))),u=n(a,r);let h=!1;const b=lg.getInstance();let Z,m,p=!0;(null==b?void 0:b.init)&&(yield b.init(!0,(e=>CW(void 0,void 0,void 0,(function*(){yield u.attachTokenToRequestConfig(e)})))));const y=()=>CW(void 0,void 0,void 0,(function*(){const e=yield a.getOIDCServiceEndpoints(),t=yield s.getConfigData();u.initializeSessionManger(t,e,(()=>CW(void 0,void 0,void 0,(function*(){return(yield a.getBasicUserInfo()).sessionState}))),(e=>CW(void 0,void 0,void 0,(function*(){return a.getAuthorizationURL(e)}))),d)})),G=()=>CW(void 0,void 0,void 0,(function*(){return yield d.receivePromptNoneResponse((e=>CW(void 0,void 0,void 0,(function*(){yield s.setSessionDataParameter(wW,null!=e?e:"")}))))})),X=e=>{e.preventSignOutURLUpdate&&(h=!0)},W=(e,t,i,n)=>CW(void 0,void 0,void 0,(function*(){return yield u.requestAccessToken(e,t,y,void 0,i,n)})),V=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CW(void 0,void 0,void 0,(function*(){const i=yield s.getConfigData(),n=yield a.getAuthorizationURL(Object.assign({prompt:"none",state:wV},t)),l=new URL(n);l.searchParams.set("response_mode","query");const o=l.toString();if(i.storage===e.Storage.BrowserMemory&&i.enablePKCE){const e=l.searchParams.get(PW);EV.setPKCE(jW.extractPKCEKeyFromStateParam(null!=e?e:""),yield a.getPKCECode(null!=e?e:""))}return o}))};return{disableHttpHandler:()=>(u.disableHttpHandler(b),p=!1,!0),enableHttpHandler:()=>(u.enableHttpHandler(b),p=!0,!0),getAccessToken:()=>CW(void 0,void 0,void 0,(function*(){return u.getAccessToken()})),getBasicUserInfo:()=>CW(void 0,void 0,void 0,(function*(){return u.getBasicUserInfo()})),getCryptoHelper:()=>CW(void 0,void 0,void 0,(function*(){return u.getCryptoHelper()})),getDataLayer:()=>CW(void 0,void 0,void 0,(function*(){return u.getDataLayer()})),getDecodedIDToken:()=>CW(void 0,void 0,void 0,(function*(){return u.getDecodedIDToken()})),getHttpClient:()=>b,getIDToken:()=>CW(void 0,void 0,void 0,(function*(){return u.getIDToken()})),getOIDCServiceEndpoints:()=>CW(void 0,void 0,void 0,(function*(){return u.getOIDCServiceEndpoints()})),httpRequest:e=>CW(void 0,void 0,void 0,(function*(){return yield u.httpRequest(b,e,p,Z,m)})),httpRequestAll:e=>CW(void 0,void 0,void 0,(function*(){return yield u.httpRequestAll(e,b,p,Z,m)})),isAuthenticated:()=>CW(void 0,void 0,void 0,(function*(){return u.isAuthenticated()})),isSessionActive:()=>CW(void 0,void 0,void 0,(function*(){return"true"===(yield s.getSessionStatus())})),refreshAccessToken:()=>CW(void 0,void 0,void 0,(function*(){try{return yield u.refreshAccessToken(X)}catch(e){return Promise.reject(e)}})),requestCustomGrant:e=>CW(void 0,void 0,void 0,(function*(){return yield u.requestCustomGrant(e,X)})),revokeAccessToken:()=>CW(void 0,void 0,void 0,(function*(){const e=yield r.getRefreshTimeoutTimer();return a.revokeAccessToken().then((()=>(d.reset(),r.clearRefreshTokenTimeout(e),Promise.resolve(!0)))).catch((e=>Promise.reject(e)))})),setHttpRequestErrorCallback:e=>{Z=e},setHttpRequestFinishCallback:e=>{(null==b?void 0:b.setHttpRequestFinishCallback)&&b.setHttpRequestFinishCallback(e)},setHttpRequestStartCallback:e=>{(null==b?void 0:b.setHttpRequestStartCallback)&&b.setHttpRequestStartCallback(e)},setHttpRequestSuccessCallback:e=>{(null==b?void 0:b.setHttpRequestSuccessCallback)&&b.setHttpRequestSuccessCallback(e)},signIn:(t,n,l,o,c)=>CW(void 0,void 0,void 0,(function*(){var r,d,h;const b=yield u.handleSignIn(G,y,void 0);if(b)return b;{let u,b,m,p={params:{}};if((null==i?void 0:i.responseMode)===e.ResponseMode.formPost&&n?(u=n,b=null!=l?l:"",m=null!=o?o:""):(u=null!==(r=new URL(window.location.href).searchParams.get(TW))&&void 0!==r?r:"",b=null!==(d=new URL(window.location.href).searchParams.get(wW))&&void 0!==d?d:"",m=null!==(h=new URL(window.location.href).searchParams.get(PW))&&void 0!==h?h:"",EV.removeAuthorizationCode()),u&&m){Z="true",CW(void 0,void 0,void 0,(function*(){yield s.setSessionStatus(Z)}));const e=yield s.getTemporaryDataParameter(CV);return e&&"string"==typeof e&&(p=JSON.parse(e)),W(u,b,m,p)}return a.getAuthorizationURL(t).then((t=>CW(void 0,void 0,void 0,(function*(){if(i.storage===e.Storage.BrowserMemory&&i.enablePKCE){const e=jW.extractPKCEKeyFromStateParam(m);EV.setPKCE(e,yield a.getPKCECode(m))}return c&&s.setTemporaryDataParameter(CV,JSON.stringify(c)),location.href=t,yield EV.waitTillPageRedirect(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""})}))))}var Z})),signOut:()=>CW(void 0,void 0,void 0,(function*(){return(yield a.isAuthenticated())&&!h?location.href=yield a.getSignOutURL():location.href=EV.getSignOutURL(i.clientID,t),r.clearRefreshTokenTimeout(),yield s.removeOIDCProviderMetaData(),yield s.removeTemporaryData(),yield s.removeSessionData(),yield s.removeSessionStatus(),yield EV.waitTillPageRedirect(),!0})),trySignInSilently:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CW(void 0,void 0,void 0,(function*(){return yield u.trySignInSilently(V,W,d,e)}))},updateConfig:e=>CW(void 0,void 0,void 0,(function*(){const t=yield s.getConfigData(),i=!(t&&t.endpoints&&t.endpoints.checkSessionIframe&&e&&e.endpoints&&e.endpoints.checkSessionIframe&&t.endpoints.checkSessionIframe===e.endpoints.checkSessionIframe),n=Object.assign(Object.assign({},t),e);yield a.updateConfig(n),n.enableOIDCSessionManagement&&i&&(d.reset(),y())}))}})),yv=(t,i,n,l)=>CW(void 0,void 0,void 0,(function*(){var o;let c;const a=null!==(o=null==i?void 0:i.requestTimeout)&&void 0!==o?o:6e4;let r=!0,s=!1;const d=(t=>{switch(t){case e.Storage.LocalStorage:return new og;case e.Storage.SessionStorage:return new ag;case e.Storage.BrowserMemory:return new cg;default:return new ag}})(i.storage),u=new mv,h=new AW;yield h.initialize(i,d,u,t);const b=new OV(h),Z=yield AV((()=>CW(void 0,void 0,void 0,(function*(){const e={type:lV};try{return yield y(e)}catch(e){return EV.getSignOutURL(i.clientID,t)}}))),i.storage,(e=>G(e))),m=l(h,b),p=new n,y=e=>{const t=new MessageChannel;return p.postMessage(e,[t.port2]),new Promise(((e,i)=>{const n=setTimeout((()=>{i(new BW("SPA-WEB_WORKER_CLIENT-COM-TO01","Operation timed out.","No response was received from the web worker for "+a/1e3+" since dispatching the request"))}),a);return t.port1.onmessage=l=>{let{data:o}=l;if(clearTimeout(n),t.port1.close(),t.port2.close(),null==o?void 0:o.success){const t=(null==o?void 0:o.data)?JSON.parse(null==o?void 0:o.data):null;(null==o?void 0:o.blob)&&(t.data=null==o?void 0:o.blob),e(t)}else i(o.error?JSON.parse(o.error):null)}}))},G=e=>y({data:e,type:gV}),X=()=>y({type:fV}),W=()=>CW(void 0,void 0,void 0,(function*(){const e=yield v(),t=yield S();m.initializeSessionManger(t,e,(()=>CW(void 0,void 0,void 0,(function*(){return(yield Y()).sessionState}))),(e=>CW(void 0,void 0,void 0,(function*(){return(yield I(e)).authorizationURL}))),Z)})),V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CW(void 0,void 0,void 0,(function*(){var t;const i=yield S(),n={data:Object.assign({prompt:"none",state:wV},e),type:GV},l=yield y(n),o=jW.extractPKCEKeyFromStateParam(null!==(t=new URL(l.authorizationURL).searchParams.get(PW))&&void 0!==t?t:"");l.pkce&&i.enablePKCE&&EV.setPKCE(o,l.pkce);const c=l.authorizationURL,a=new URL(c);a.searchParams.set("response_mode","query");return a.toString()}))},I=e=>CW(void 0,void 0,void 0,(function*(){const t=yield S();return y({data:e,type:GV}).then((e=>CW(void 0,void 0,void 0,(function*(){var i;if(e.pkce&&t.enablePKCE){const t=jW.extractPKCEKeyFromStateParam(null!==(i=new URL(e.authorizationURL).searchParams.get(PW))&&void 0!==i?i:"");EV.setPKCE(t,e.pkce)}return Promise.resolve(e)}))))})),R=(e,i,n,l)=>CW(void 0,void 0,void 0,(function*(){const o=yield S(),c=jW.extractPKCEKeyFromStateParam(n),a={data:{code:e,pkce:o.enablePKCE?EV.getPKCE(c):void 0,sessionState:i,state:n,tokenRequestConfig:l},type:XV};return o.enablePKCE&&EV.removePKCE(c),y(a).then((e=>y({type:VV}).then((i=>(EV.setSignOutURL(i,o.clientID,t),o.enableOIDCSessionManagement&&W(),X(),Promise.resolve(e)))).catch((e=>Promise.reject(e))))).catch((e=>Promise.reject(e)))})),g=()=>CW(void 0,void 0,void 0,(function*(){return yield Z.receivePromptNoneResponse((e=>CW(void 0,void 0,void 0,(function*(){return G(e)}))))})),f=()=>CW(void 0,void 0,void 0,(function*(){if(yield K())return yield X(),i.enableOIDCSessionManagement&&W(),Y()})),v=()=>y({type:hV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),S=()=>y({type:NV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),Y=()=>y({type:bV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),K=()=>y({type:WV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e)));return{disableHttpHandler:()=>y({type:yV}).then((()=>(r=!1,Promise.resolve(!0)))).catch((e=>Promise.reject(e))),enableHttpHandler:()=>y({type:pV}).then((()=>(r=!0,Promise.resolve(!0)))).catch((e=>Promise.reject(e))),getBasicUserInfo:Y,getCryptoHelper:()=>y({type:mV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getDecodedIDPIDToken:()=>y({type:"get-decoded-idp-id-token"}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getDecodedIDToken:()=>y({type:ZV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getIDToken:()=>y({type:SV}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getOIDCServiceEndpoints:v,httpRequest:e=>{(null==e?void 0:e.data)&&(null==e?void 0:e.data)instanceof FormData&&(e.data=Object.assign(Object.assign({},Object.fromEntries(null==e?void 0:e.data.entries())),{formData:!0}));return y({data:e,type:oV}).then((e=>Promise.resolve(e))).catch((e=>CW(void 0,void 0,void 0,(function*(){return r&&("function"==typeof c.requestErrorCallback&&(yield c.requestErrorCallback(e)),"function"==typeof c.requestFinishCallback&&c.requestFinishCallback()),Promise.reject(e)}))))},httpRequestAll:e=>y({data:e,type:cV}).then((e=>Promise.resolve(e))).catch((e=>CW(void 0,void 0,void 0,(function*(){return r&&("function"==typeof c.requestErrorCallback&&(yield c.requestErrorCallback(e)),"function"==typeof c.requestFinishCallback&&c.requestFinishCallback()),Promise.reject(e)})))),initialize:()=>{c||(c={requestErrorCallback:()=>Promise.resolve(),requestFinishCallback:()=>null,requestStartCallback:()=>null,requestSuccessCallback:()=>null}),p.onmessage=e=>{let{data:t}=e;switch(t.type){case uV:(null==c?void 0:c.requestFinishCallback)&&(null==c||c.requestFinishCallback());break;case sV:(null==c?void 0:c.requestStartCallback)&&(null==c||c.requestStartCallback());break;case dV:(null==c?void 0:c.requestSuccessCallback)&&(null==c||c.requestSuccessCallback(t.data?JSON.parse(t.data):null))}};return y({data:i,type:nV}).then((()=>Promise.resolve(!0))).catch((e=>Promise.reject(e)))},isAuthenticated:K,refreshAccessToken:()=>y({type:IV}),requestCustomGrant:e=>y({data:e,type:aV}).then((t=>(e.preventSignOutURLUpdate&&(s=!0),Promise.resolve(t)))).catch((e=>Promise.reject(e))),revokeAccessToken:()=>y({type:rV}).then((e=>(Z.reset(),Promise.resolve(e)))).catch((e=>Promise.reject(e))),setHttpRequestErrorCallback:e=>{e&&"function"==typeof e&&(c.requestErrorCallback=e)},setHttpRequestFinishCallback:e=>{e&&"function"==typeof e&&(c.requestFinishCallback=e)},setHttpRequestStartCallback:e=>{e&&"function"==typeof e&&(c.requestStartCallback=e)},setHttpRequestSuccessCallback:e=>{e&&"function"==typeof e&&(c.requestSuccessCallback=e)},signIn:(t,n,l,o,c)=>CW(void 0,void 0,void 0,(function*(){var a,r,s;const d=yield m.handleSignIn(g,W,f);if(d)return d;{let d,u,h;return(null==i?void 0:i.responseMode)===e.ResponseMode.formPost&&n?(d=n,u=null!=l?l:"",h=null!=o?o:""):(d=null!==(a=new URL(window.location.href).searchParams.get(TW))&&void 0!==a?a:"",u=null!==(r=new URL(window.location.href).searchParams.get(wW))&&void 0!==r?r:"",h=null!==(s=new URL(window.location.href).searchParams.get(PW))&&void 0!==s?s:"",EV.removeAuthorizationCode()),d&&h?R(d,u,h,c):I(t).then((e=>CW(void 0,void 0,void 0,(function*(){return location.href=e.authorizationURL,yield EV.waitTillPageRedirect(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""})})))).catch((e=>Promise.reject(e)))}})),signOut:()=>new Promise(((e,n)=>{if(!s){return y({type:lV}).then((t=>CW(void 0,void 0,void 0,(function*(){return window.location.href=t,yield EV.waitTillPageRedirect(),e(!0)})))).catch((e=>n(e)))}window.location.href=EV.getSignOutURL(i.clientID,t),EV.waitTillPageRedirect().then((()=>Promise.resolve(!0)))})),trySignInSilently:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CW(void 0,void 0,void 0,(function*(){return yield m.trySignInSilently(V,R,Z,e)}))},updateConfig:e=>CW(void 0,void 0,void 0,(function*(){const t=yield S(),i=!(t&&t.endpoints&&t.endpoints.checkSessionIframe&&e&&e.endpoints&&e.endpoints.checkSessionIframe&&t.endpoints.checkSessionIframe===e.endpoints.checkSessionIframe),n=Object.assign(Object.assign({},t),e),l={data:n,type:vV};yield y(l),n.enableOIDCSessionManagement&&i&&(Z.reset(),W())}))}})),Gv={checkSessionInterval:3,clientHost:origin,enableOIDCSessionManagement:!1,periodicTokenRefresh:!1,sessionRefreshInterval:300,storage:e.Storage.SessionStorage};class Xv{constructor(e){this._authHelper=DV,this._worker=iV,this._initialized=!1,this._startedInitialize=!1,this._onSignInCallback=()=>null,this._onSignOutCallback=()=>null,this._onSignOutFailedCallback=()=>null,this._onEndUserSession=()=>null,this._onInitialize=()=>null,this._onCustomGrant=new Map,this._instanceID=e}instantiateAuthHelper(e){this._authHelper=e||DV}instantiateWorker(e){this._worker=e||iV}_isInitialized(){return CW(this,void 0,void 0,(function*(){if(!this._startedInitialize)return!1;let e=0;for(;!this._initialized;)1e4===e&&console.warn("It is taking longer than usual for the object to be initialized"),yield new Promise((e=>setTimeout(e,1))),e++;return!0}))}_validateMethod(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return CW(this,void 0,void 0,(function*(){return(yield this._isInitialized())?!(e&&!(yield this.isAuthenticated()))||Promise.reject(new BW("SPA-AUTH_CLIENT-VM-IV02","The user is not authenticated.","The user must be authenticated first.")):Promise.reject(new BW("SPA-AUTH_CLIENT-VM-NF01","The SDK is not initialized.","The SDK must be initialized first."))}))}static getInstance(e){var t,i;return e&&(null===(t=this._instances)||void 0===t?void 0:t.get(e))?this._instances.get(e):!e&&(null===(i=this._instances)||void 0===i?void 0:i.get(0))?this._instances.get(0):e?(this._instances.set(e,new Xv(e)),this._instances.get(e)):(this._instances.set(0,new Xv(0)),this._instances.get(0))}initialize(t,i,n){var l;return CW(this,void 0,void 0,(function*(){if(this._storage=null!==(l=t.storage)&&void 0!==l?l:e.Storage.SessionStorage,this._initialized=!1,this._startedInitialize=!0,i&&this.instantiateAuthHelper(i),n&&this.instantiateWorker(n),this._storage!==e.Storage.WebWorker){if(!this._client){const e=t,i=Object.assign({},Gv);this._client=yield pv(this._instanceID,Object.assign(Object.assign({},i),e),((e,t)=>new this._authHelper(e,t)))}return this._initialized=!0,this._onInitialize&&this._onInitialize(!0),window.addEventListener("message",(e=>{var t;(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===RV&&this.signOut()})),Promise.resolve(!0)}if(!this._client){const e=t;return this._client=yield yv(this._instanceID,Object.assign(Object.assign({},Gv),e),this._worker,((e,t)=>new this._authHelper(e,t))),this._client.initialize().then((()=>(this._onInitialize&&this._onInitialize(!0),this._initialized=!0,Promise.resolve(!0)))).catch((e=>Promise.reject(e)))}return Promise.resolve(!0)}))}getBasicUserInfo(){var e;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getBasicUserInfo()}))}signIn(e,t,i,n,l){var o;return CW(this,void 0,void 0,(function*(){if(yield this._isInitialized(),EV.canContinueSignIn(Boolean(null==e?void 0:e.callOnlyOnRedirect),t))return null==e||delete e.callOnlyOnRedirect,null===(o=this._client)||void 0===o?void 0:o.signIn(e,t,i,n,l).then((e=>(this._onSignInCallback&&(e.allowedScopes||e.displayName||e.email||e.username)&&this._onSignInCallback(e),e)))}))}trySignInSilently(e){var t;return CW(this,void 0,void 0,(function*(){if(yield this._isInitialized(),!EV.wasSignInCalled())return null===(t=this._client)||void 0===t?void 0:t.trySignInSilently(e).then((e=>{if(this._onSignInCallback&&e){const t=e;(t.allowedScopes||t.displayName||t.email||t.username)&&this._onSignInCallback(t)}return e}))}))}signOut(){var e,t;return CW(this,void 0,void 0,(function*(){yield this._validateMethod(!1);return null!==(t=yield null===(e=this._client)||void 0===e?void 0:e.signOut())&&void 0!==t&&t}))}httpRequest(e){var t;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(e.attachToken),null===(t=this._client)||void 0===t?void 0:t.httpRequest(e)}))}httpRequestAll(e){var t;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(t=this._client)||void 0===t?void 0:t.httpRequestAll(e)}))}requestCustomGrant(e){var t,i;return CW(this,void 0,void 0,(function*(){if(e.signInRequired,yield this._validateMethod(),!e.id)return Promise.reject(new BW("SPA-AUTH_CLIENT-RCG-NF01","The custom grant request id not found.","The id attribute of the custom grant config object passed as an argument should have a value."));const n=yield null===(t=this._client)||void 0===t?void 0:t.requestCustomGrant(e),l=this._onCustomGrant.get(e.id);return l&&l(null===(i=this._onCustomGrant)||void 0===i?void 0:i.get(e.id)),n}))}revokeAccessToken(){var e;return CW(this,void 0,void 0,(function*(){yield this._validateMethod();const t=yield null===(e=this._client)||void 0===e?void 0:e.revokeAccessToken();return this._onEndUserSession&&(yield this._onEndUserSession(t)),t}))}getOIDCServiceEndpoints(){var e;return CW(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.getOIDCServiceEndpoints()}))}getHttpClient(){if(this._client){if(this._storage!==e.Storage.WebWorker){return this._client.getHttpClient()}throw new BW("SPA-AUTH_CLIENT-GHC-IV01","Http client cannot be returned.","The http client cannot be returned when the storage type is set to webWorker.")}throw new BW("SPA-AUTH_CLIENT-GHC-NF02","The SDK is not initialized.","The SDK has not been initialized yet. Initialize the SDK using the initialize method before calling this method.")}getDecodedIDToken(){var e;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getDecodedIDToken()}))}getCryptoHelper(){var e;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getCryptoHelper()}))}getIDToken(){var e;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getIDToken()}))}getAccessToken(){return CW(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BW("SPA-AUTH_CLIENT-GAT-IV01","The access token cannot be returned.","The access token cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getAccessToken()}))}getIDPAccessToken(){return CW(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BW("SPA-AUTH_CLIENT-GIAT-IV01","The access token cannot be returned.","The access token cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getAccessToken()}))}getDataLayer(){return CW(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BW("SPA-AUTH_CLIENT-GDL-IV01","The data layer cannot be returned.","The data layer cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getDataLayer()}))}refreshAccessToken(){var e;return CW(this,void 0,void 0,(function*(){return yield this._validateMethod(!1),null===(e=this._client)||void 0===e?void 0:e.refreshAccessToken()}))}isAuthenticated(){var e;return CW(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.isAuthenticated()}))}isSessionActive(){return CW(this,void 0,void 0,(function*(){if(yield this._isInitialized(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BW("SPA-AUTH_CLIENT-ISA-IV01","The active session cannot be returned.","The active session cannot be returned when the storage type is set to webWorker or browserMemory."));const t=this._client;return null==t?void 0:t.isSessionActive()}))}on(t,i,n){var l,o,c,a;return CW(this,void 0,void 0,(function*(){if(yield this._isInitialized(),!i||"function"!=typeof i)throw new BW("SPA-AUTH_CLIENT-ON-IV02","Invalid callback function.","The provided callback function is invalid.");switch(t){case e.Hooks.SignIn:this._onSignInCallback=i;break;case e.Hooks.SignOut:this._onSignOutCallback=i,(yield EV.isSignOutSuccessful())&&this._onSignOutCallback();break;case e.Hooks.RevokeAccessToken:this._onEndUserSession=i;break;case e.Hooks.Initialize:this._onInitialize=i;break;case e.Hooks.HttpRequestError:null===(l=this._client)||void 0===l||l.setHttpRequestErrorCallback(i);break;case e.Hooks.HttpRequestFinish:null===(o=this._client)||void 0===o||o.setHttpRequestFinishCallback(i);break;case e.Hooks.HttpRequestStart:null===(c=this._client)||void 0===c||c.setHttpRequestStartCallback(i);break;case e.Hooks.HttpRequestSuccess:null===(a=this._client)||void 0===a||a.setHttpRequestSuccessCallback(i);break;case e.Hooks.CustomGrant:n&&this._onCustomGrant.set(n,i);break;case e.Hooks.SignOutFailed:{this._onSignOutFailedCallback=i;const e=EV.didSignOutFail();e&&this._onSignOutFailedCallback(e);break}default:throw new BW("SPA-AUTH_CLIENT-ON-IV01","Invalid hook.","The provided hook is invalid.")}}))}enableHttpHandler(){var e;return CW(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.enableHttpHandler()}))}disableHttpHandler(){var e;return CW(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.disableHttpHandler()}))}updateConfig(t){return CW(this,void 0,void 0,(function*(){if(yield this._isInitialized(),this._storage===e.Storage.WebWorker){const e=this._client;yield e.updateConfig(t)}else{const e=this._client;yield e.updateConfig(t)}}))}}Xv._instances=new Map;class Wv extends Worker{constructor(){super(...arguments),this.onmessage=()=>null}}return e.ASGARDEO_SESSION_ACTIVE="asgardeo-session-active",e.AUTHORIZATION_CODE=TW,e.AsgardeoAuthClient=AW,e.AsgardeoAuthException=BW,e.AsgardeoSPAClient=Xv,e.AuthenticationHelper=DV,e.AuthenticationUtils=jW,e.CLIENT_ID_TAG="{{clientID}}",e.CLIENT_SECRET_TAG="{{clientSecret}}",e.CryptoHelper=QW,e.DataLayer=DW,e.MainThreadClient=pv,e.OIDC_SCOPE="openid",e.PKCE_CODE_VERIFIER="pkce_code_verifier",e.PKCE_SEPARATOR="#",e.REFRESH_TOKEN_TIMER=LW,e.SCOPE_TAG="{{scope}}",e.SESSION_STATE=wW,e.SIGN_OUT_SUCCESS_PARAM=xW,e.SIGN_OUT_URL=FW,e.SPAHelper=OV,e.SPAUtils=EV,e.STATE=PW,e.SUPPORTED_SIGNATURE_ALGORITHMS=HW,e.TOKEN_REQUEST_CONFIG_KEY=CV,e.TOKEN_TAG="{{token}}",e.USERNAME_TAG="{{username}}",e.WebWorkerClass=Wv,e.WebWorkerClient=yv,e.workerReceiver=e=>{const t=self;let i;t.onmessage=t=>{let{data:c,ports:a}=t;return CW(void 0,void 0,void 0,(function*(){var t,r,s,d,u,h;const b=a[0];if(c.type===nV||i)switch(c.type){case nV:try{const t=Object.assign({},c.data);i=yield((e,t)=>CW(void 0,void 0,void 0,(function*(){const i=new cg,n=new mv,l=new AW;yield l.initialize(e,i,n);const o=new OV(l),c=t(l,o),a=l.getDataLayer(),r=lg.getInstance();return(null==r?void 0:r.init)&&(yield r.init(!0,(e=>CW(void 0,void 0,void 0,(function*(){yield c.attachTokenToRequestConfig(e)}))))),{disableHttpHandler:()=>{c.disableHttpHandler(r)},enableHttpHandler:()=>{c.enableHttpHandler(r)},getAccessToken:()=>c.getAccessToken(),getAuthorizationURL:e=>CW(void 0,void 0,void 0,(function*(){return l.getAuthorizationURL(e).then((e=>CW(void 0,void 0,void 0,(function*(){var t;const i=null!==(t=new URL(e).searchParams.get(PW))&&void 0!==t?t:"",n=yield l.getPKCECode(i);return{authorizationURL:e,pkce:n}})))).catch((e=>Promise.reject(e)))})),getBasicUserInfo:()=>CW(void 0,void 0,void 0,(function*(){return c.getBasicUserInfo()})),getConfigData:()=>CW(void 0,void 0,void 0,(function*(){return a.getConfigData()})),getCryptoHelper:()=>CW(void 0,void 0,void 0,(function*(){return c.getCryptoHelper()})),getDecodedIDPIDToken:()=>CW(void 0,void 0,void 0,(function*(){return c.getDecodedIDPIDToken()})),getDecodedIDToken:()=>CW(void 0,void 0,void 0,(function*(){return c.getDecodedIDToken()})),getIDToken:()=>CW(void 0,void 0,void 0,(function*(){return c.getIDToken()})),getOIDCServiceEndpoints:()=>CW(void 0,void 0,void 0,(function*(){return c.getOIDCServiceEndpoints()})),getSignOutURL:()=>CW(void 0,void 0,void 0,(function*(){return yield l.getSignOutURL()})),httpRequest:e=>CW(void 0,void 0,void 0,(function*(){return yield c.httpRequest(r,e)})),httpRequestAll:e=>CW(void 0,void 0,void 0,(function*(){return yield c.httpRequestAll(e,r)})),isAuthenticated:()=>c.isAuthenticated(),refreshAccessToken:()=>CW(void 0,void 0,void 0,(function*(){try{return yield c.refreshAccessToken()}catch(e){return Promise.reject(e)}})),requestAccessToken:(e,t,i,n)=>CW(void 0,void 0,void 0,(function*(){return yield c.requestAccessToken(e,t,void 0,i,n)})),requestCustomGrant:e=>CW(void 0,void 0,void 0,(function*(){return yield c.requestCustomGrant(e)})),revokeAccessToken:()=>CW(void 0,void 0,void 0,(function*(){const e=yield o.getRefreshTimeoutTimer();return l.revokeAccessToken().then((()=>(o.clearRefreshTokenTimeout(e),Promise.resolve(!0)))).catch((e=>Promise.reject(e)))})),setHttpRequestFinishCallback:e=>{(null==r?void 0:r.setHttpRequestFinishCallback)&&r.setHttpRequestFinishCallback(e)},setHttpRequestStartCallback:e=>{(null==r?void 0:r.setHttpRequestStartCallback)&&r.setHttpRequestStartCallback(e)},setHttpRequestSuccessCallback:e=>{(null==r?void 0:r.setHttpRequestSuccessCallback)&&r.setHttpRequestSuccessCallback(e)},setSessionState:e=>CW(void 0,void 0,void 0,(function*(){yield a.setSessionDataParameter(wW,e)})),signOut:()=>CW(void 0,void 0,void 0,(function*(){return o.clearRefreshTokenTimeout(),yield l.getSignOutURL()})),startAutoRefreshToken:()=>CW(void 0,void 0,void 0,(function*(){o.clearRefreshTokenTimeout(),o.refreshAccessTokenAutomatically(c)})),updateConfig:e=>CW(void 0,void 0,void 0,(function*(){yield l.updateConfig(e)}))}})))(t,e),i.setHttpRequestFinishCallback(o),i.setHttpRequestStartCallback(n),i.setHttpRequestSuccessCallback(l),b.postMessage(QV.generateSuccessMessage())}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case GV:i.getAuthorizationURL(null==c?void 0:c.data).then((e=>{b.postMessage(QV.generateSuccessMessage(e))})).catch((e=>{b.postMessage(QV.generateFailureMessage(e))}));break;case XV:i.requestAccessToken(null===(t=null==c?void 0:c.data)||void 0===t?void 0:t.code,null===(r=null==c?void 0:c.data)||void 0===r?void 0:r.sessionState,null===(s=null==c?void 0:c.data)||void 0===s?void 0:s.pkce,null===(d=null==c?void 0:c.data)||void 0===d?void 0:d.state).then((e=>{b.postMessage(QV.generateSuccessMessage(e))})).catch((e=>{b.postMessage(QV.generateFailureMessage(e))}));break;case oV:{const e=c.data,t=null==e?void 0:e.data;if(!0===(null===(h=null===(u=c.data)||void 0===u?void 0:u.data)||void 0===h?void 0:h.formData)){const i=new FormData;for(const e in t)"formData"!==e&&i.append(e,t[e]);e.data=i}i.httpRequest(e).then((e=>{b.postMessage(QV.generateSuccessMessage(e))})).catch((e=>{b.postMessage(QV.generateFailureMessage(e))}));break}case cV:i.httpRequestAll(c.data).then((e=>{b.postMessage(QV.generateSuccessMessage(e))})).catch((e=>{b.postMessage(QV.generateFailureMessage(e))}));break;case lV:try{b.postMessage(QV.generateSuccessMessage(yield i.signOut()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case aV:i.requestCustomGrant(c.data).then((e=>{b.postMessage(QV.generateSuccessMessage(e))})).catch((e=>{b.postMessage(QV.generateFailureMessage(e))}));break;case rV:i.revokeAccessToken().then((e=>{b.postMessage(QV.generateSuccessMessage(e))})).catch((e=>{b.postMessage(QV.generateFailureMessage(e))}));break;case hV:try{b.postMessage(QV.generateSuccessMessage(yield i.getOIDCServiceEndpoints()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case bV:try{b.postMessage(QV.generateSuccessMessage(yield i.getBasicUserInfo()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case ZV:try{b.postMessage(QV.generateSuccessMessage(yield i.getDecodedIDToken()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case mV:try{b.postMessage(QV.generateSuccessMessage(yield i.getCryptoHelper()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case SV:try{b.postMessage(QV.generateSuccessMessage(yield i.getIDToken()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case pV:i.enableHttpHandler(),b.postMessage(QV.generateSuccessMessage());break;case yV:i.disableHttpHandler(),b.postMessage(QV.generateSuccessMessage());break;case WV:try{b.postMessage(QV.generateSuccessMessage(yield i.isAuthenticated()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case VV:try{b.postMessage(QV.generateSuccessMessage(yield i.getSignOutURL()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case IV:try{b.postMessage(QV.generateSuccessMessage(yield i.refreshAccessToken()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case fV:try{b.postMessage(QV.generateSuccessMessage(i.startAutoRefreshToken()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case gV:try{b.postMessage(QV.generateSuccessMessage(yield i.setSessionState(null==c?void 0:c.data)))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case vV:try{b.postMessage(QV.generateSuccessMessage(yield i.updateConfig(null==c?void 0:c.data)))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;case NV:try{b.postMessage(QV.generateSuccessMessage(yield i.getConfigData()))}catch(e){b.postMessage(QV.generateFailureMessage(e))}break;default:null==b||b.postMessage(QV.generateFailureMessage(new BW("SPA-CLIENT_WORKER-ONMSG-IV02","The message type is invalid.","The message type provided, ".concat(c.type,", is invalid."))))}else b.postMessage(QV.generateFailureMessage(new BW("SPA-CLIENT_WORKER-ONMSG-NF01","The web worker has not been initialized yet.","The initialize method needs to be called before the specified operation can be carried out.")))}))};const n=()=>{t.postMessage({type:sV})},l=e=>{t.postMessage({data:JSON.stringify(null!=e?e:""),type:dV})},o=()=>{t.postMessage({type:uV})}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=asgardeo-spa.production.min.js.map
